
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>AnalysisMixin &#8212; Stoner Pacakge API Documentation</title>
    <link rel="stylesheet" href="../_static/better.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="odr_Model" href="Stoner.analysis.fitting.odr_Model.html" />
    <link rel="prev" title="DataFile" href="Stoner.Core.DataFile.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  </head><body>
    <header id="pageheader"><h1><a href="../index.html ">
        Stoner Pacakge API Documentation
    </a></h1></header>
  <div class="related top">
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="Stoner.Core.DataFile.html" title="Previous document">DataFile</a>
        </li>
        <li>
          <a href="Stoner.analysis.fitting.odr_Model.html" title="Next document">odr_Model</a>
          &rarr;
        </li>
    </ul>
  </nav>
  <nav id="breadcrumbs">
    <ul>
      <li><a href="../index.html">Stoner Package</a></li>
      <li>
        <a href="../Stoner.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">Stoner</span></code> Package</a>
      </li> 
    </ul>
  </nav>
  </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="analysismixin">
<h1>AnalysisMixin<a class="headerlink" href="#analysismixin" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="Stoner.Analysis.AnalysisMixin">
<em class="property">class </em><code class="sig-prename descclassname">Stoner.Analysis.</code><code class="sig-name descname">AnalysisMixin</code><a class="reference internal" href="../_modules/Stoner/Analysis.html#AnalysisMixin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Stoner.Analysis.AnalysisMixin" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>A mixin calss designed to work with <a class="reference internal" href="Stoner.Core.DataFile.html#Stoner.Core.DataFile" title="Stoner.Core.DataFile"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stoner.Core.DataFile</span></code></a> to provide additional analysis methods.</p>
<p class="rubric">Methods Summary</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Analysis.AnalysisMixin.SG_Filter" title="Stoner.Analysis.AnalysisMixin.SG_Filter"><code class="xref py py-obj docutils literal notranslate"><span class="pre">SG_Filter</span></code></a>([col, xcol, points, poly, order, …])</p></td>
<td><p>Implements Savitsky-Golay filtering of data for smoothing and differentiating data.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Analysis.AnalysisMixin.add" title="Stoner.Analysis.AnalysisMixin.add"><code class="xref py py-obj docutils literal notranslate"><span class="pre">add</span></code></a>(a, b[, replace, header])</p></td>
<td><p>Add one column, number or array (b) to another column (a).</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Analysis.AnalysisMixin.apply" title="Stoner.Analysis.AnalysisMixin.apply"><code class="xref py py-obj docutils literal notranslate"><span class="pre">apply</span></code></a>(func[, col, replace, header])</p></td>
<td><p>Applies the given function to each row in the data set and adds to the data set.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Analysis.AnalysisMixin.bin" title="Stoner.Analysis.AnalysisMixin.bin"><code class="xref py py-obj docutils literal notranslate"><span class="pre">bin</span></code></a>([xcol, ycol, bins, mode, clone])</p></td>
<td><p>Bin x-y data into new values of x with an error bar.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Analysis.AnalysisMixin.clip" title="Stoner.Analysis.AnalysisMixin.clip"><code class="xref py py-obj docutils literal notranslate"><span class="pre">clip</span></code></a>(clipper[, column])</p></td>
<td><p>Clips the data based on the column and the clipper value.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Analysis.AnalysisMixin.decompose" title="Stoner.Analysis.AnalysisMixin.decompose"><code class="xref py py-obj docutils literal notranslate"><span class="pre">decompose</span></code></a>([xcol, ycol, sym, asym, replace])</p></td>
<td><p>Given (x,y) data, decomposes the y part into symmetric and antisymmetric contributions in x.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Analysis.AnalysisMixin.diffsum" title="Stoner.Analysis.AnalysisMixin.diffsum"><code class="xref py py-obj docutils literal notranslate"><span class="pre">diffsum</span></code></a>(a, b[, replace, header])</p></td>
<td><p>Calculate <span class="math notranslate nohighlight">\(\frac{a-b}{a+b}\)</span> for the two columns <em>a</em> and <em>b</em>.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Analysis.AnalysisMixin.divide" title="Stoner.Analysis.AnalysisMixin.divide"><code class="xref py py-obj docutils literal notranslate"><span class="pre">divide</span></code></a>(a, b[, replace, header])</p></td>
<td><p>Divide one column (a) by  another column, number or array (b).</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Analysis.AnalysisMixin.extrapolate" title="Stoner.Analysis.AnalysisMixin.extrapolate"><code class="xref py py-obj docutils literal notranslate"><span class="pre">extrapolate</span></code></a>(new_x[, xcol, ycol, yerr, …])</p></td>
<td><p>Extrapolate data based on local fit to x,y data.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Analysis.AnalysisMixin.integrate" title="Stoner.Analysis.AnalysisMixin.integrate"><code class="xref py py-obj docutils literal notranslate"><span class="pre">integrate</span></code></a>([xcol, ycol, result, header, …])</p></td>
<td><p>Inegrate a column of data, optionally returning the cumulative integral.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Analysis.AnalysisMixin.interpolate" title="Stoner.Analysis.AnalysisMixin.interpolate"><code class="xref py py-obj docutils literal notranslate"><span class="pre">interpolate</span></code></a>(newX[, kind, xcol, replace])</p></td>
<td><p>Interpolate a dataset to get a new set of values for a given set of x data.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Analysis.AnalysisMixin.make_bins" title="Stoner.Analysis.AnalysisMixin.make_bins"><code class="xref py py-obj docutils literal notranslate"><span class="pre">make_bins</span></code></a>(xcol, bins[, mode])</p></td>
<td><p>Utility method to generate bin boundaries and centres along an axis.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Analysis.AnalysisMixin.max" title="Stoner.Analysis.AnalysisMixin.max"><code class="xref py py-obj docutils literal notranslate"><span class="pre">max</span></code></a>([column, bounds])</p></td>
<td><p>Find maximum value and index in a column of data.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Analysis.AnalysisMixin.mean" title="Stoner.Analysis.AnalysisMixin.mean"><code class="xref py py-obj docutils literal notranslate"><span class="pre">mean</span></code></a>([column, sigma, bounds])</p></td>
<td><p>Find mean value of a data column.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Analysis.AnalysisMixin.min" title="Stoner.Analysis.AnalysisMixin.min"><code class="xref py py-obj docutils literal notranslate"><span class="pre">min</span></code></a>([column, bounds])</p></td>
<td><p>Find minimum value and index in a column of data.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Analysis.AnalysisMixin.multiply" title="Stoner.Analysis.AnalysisMixin.multiply"><code class="xref py py-obj docutils literal notranslate"><span class="pre">multiply</span></code></a>(a, b[, replace, header])</p></td>
<td><p>Multiply one column (a) by  another column, number or array (b).</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Analysis.AnalysisMixin.normalise" title="Stoner.Analysis.AnalysisMixin.normalise"><code class="xref py py-obj docutils literal notranslate"><span class="pre">normalise</span></code></a>([target, base, replace, header, …])</p></td>
<td><p>Normalise data columns by dividing through by a base column value.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Analysis.AnalysisMixin.outlier_detection" title="Stoner.Analysis.AnalysisMixin.outlier_detection"><code class="xref py py-obj docutils literal notranslate"><span class="pre">outlier_detection</span></code></a>([column, window, …])</p></td>
<td><p>Function to detect outliers in a column of data.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Analysis.AnalysisMixin.peaks" title="Stoner.Analysis.AnalysisMixin.peaks"><code class="xref py py-obj docutils literal notranslate"><span class="pre">peaks</span></code></a>(**kargs)</p></td>
<td><p>Locates peaks and/or troughs in a column of data by using SG-differentiation.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Analysis.AnalysisMixin.polyfit" title="Stoner.Analysis.AnalysisMixin.polyfit"><code class="xref py py-obj docutils literal notranslate"><span class="pre">polyfit</span></code></a>([xcol, ycol, polynomial_order, …])</p></td>
<td><p>Pass through to numpy.polyfit.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Analysis.AnalysisMixin.scale" title="Stoner.Analysis.AnalysisMixin.scale"><code class="xref py py-obj docutils literal notranslate"><span class="pre">scale</span></code></a>(other[, xcol, ycol])</p></td>
<td><p>Scale the x and y data in this DataFile to match the x and y data in another DataFile.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Analysis.AnalysisMixin.smooth" title="Stoner.Analysis.AnalysisMixin.smooth"><code class="xref py py-obj docutils literal notranslate"><span class="pre">smooth</span></code></a>([window, xcol, ycol, size])</p></td>
<td><p>Smooth data by convoluting with a window.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Analysis.AnalysisMixin.span" title="Stoner.Analysis.AnalysisMixin.span"><code class="xref py py-obj docutils literal notranslate"><span class="pre">span</span></code></a>([column, bounds])</p></td>
<td><p>Returns a tuple of the maximum and minumum values within the given column and bounds by calling into <a class="reference internal" href="#Stoner.Analysis.AnalysisMixin.max" title="Stoner.Analysis.AnalysisMixin.max"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AnalysisMixin.max()</span></code></a> and <a class="reference internal" href="#Stoner.Analysis.AnalysisMixin.min" title="Stoner.Analysis.AnalysisMixin.min"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AnalysisMixin.min()</span></code></a>.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Analysis.AnalysisMixin.spline" title="Stoner.Analysis.AnalysisMixin.spline"><code class="xref py py-obj docutils literal notranslate"><span class="pre">spline</span></code></a>([xcol, ycol, sigma])</p></td>
<td><p>Construct a spline through x and y data and replace, add new data or return spline function.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Analysis.AnalysisMixin.std" title="Stoner.Analysis.AnalysisMixin.std"><code class="xref py py-obj docutils literal notranslate"><span class="pre">std</span></code></a>([column, sigma, bounds])</p></td>
<td><p>Find standard deviation value of a data column.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Analysis.AnalysisMixin.stitch" title="Stoner.Analysis.AnalysisMixin.stitch"><code class="xref py py-obj docutils literal notranslate"><span class="pre">stitch</span></code></a>(other[, xcol, ycol, overlap, …])</p></td>
<td><p>Apply a scaling to this data set to make it stich to another dataset.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#Stoner.Analysis.AnalysisMixin.subtract" title="Stoner.Analysis.AnalysisMixin.subtract"><code class="xref py py-obj docutils literal notranslate"><span class="pre">subtract</span></code></a>(a, b[, replace, header])</p></td>
<td><p>Subtract one column, number or array (b) from another column (a).</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#Stoner.Analysis.AnalysisMixin.threshold" title="Stoner.Analysis.AnalysisMixin.threshold"><code class="xref py py-obj docutils literal notranslate"><span class="pre">threshold</span></code></a>(threshold, **kargs)</p></td>
<td><p>Finds partial indices where the data in column passes the threshold, rising or falling.</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Methods Documentation</p>
<dl class="method">
<dt id="Stoner.Analysis.AnalysisMixin.SG_Filter">
<code class="sig-name descname">SG_Filter</code><span class="sig-paren">(</span><em class="sig-param">col=None</em>, <em class="sig-param">xcol=None</em>, <em class="sig-param">points=15</em>, <em class="sig-param">poly=1</em>, <em class="sig-param">order=0</em>, <em class="sig-param">pad=True</em>, <em class="sig-param">result=None</em>, <em class="sig-param">replace=False</em>, <em class="sig-param">header=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Stoner/Analysis.html#AnalysisMixin.SG_Filter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Stoner.Analysis.AnalysisMixin.SG_Filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements Savitsky-Golay filtering of data for smoothing and differentiating data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>col</strong> (<em>column index</em>) – Column of Data to be filtered. if None, first y-column in setas is filtered.</p></li>
<li><p><strong>points</strong> (<em>int</em>) – Number of data points to use in the filtering window. Should be an odd number &gt; poly+1 (default 15)</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>xcol</strong> (<em>coilumn index</em>) – If <em>order</em>&gt;1 then can be used to specify an x-column to differentiate with respect to.</p></li>
<li><p><strong>poly</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Order of polynomial to fit to the data. Must be equal or greater than order (default 1)</p></li>
<li><p><strong>order</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Order of differentiation to carry out. Default=0 meaning smooth the data only.</p></li>
<li><p><strong>pad</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a>) – Pad the start and end of the array with the mean value (True, default) or specired value (float) or leave as is.</p></li>
<li><p><strong>result</strong> (<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a><em>,</em><a class="reference external" href="https://docs.python.org/3/library/constants.html#True" title="(in Python v3.8)"><em>True</em></a><em>, or </em><em>column_index</em>) – If not None, column index to insert new data, or True to append as last column</p></li>
<li><p><strong>header</strong> (<a class="reference external" href="https://docs.python.org/3/library/string.html#module-string" title="(in Python v3.8)"><em>string</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a>) – Header for new column if result is not None. If header is Nne, a suitable column header is generated.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><em>(numpy array or self)</em> –     If result is None, a numpy array representing the smoothed or differentiated data is returned.
Otherwise, a copy of the modified AnalysisMixin object is returned.</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>If col is not specified or is None then the <code class="xref py py-attr docutils literal notranslate"><span class="pre">DataFile.setas</span></code> column assignments are used
to set an x and y column. If col is a tuple, then it is assumed to secify and x-column and y-column
for differentiating data. This is now a pass through to <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.signal.savgol_filter.html#scipy.signal.savgol_filter" title="(in SciPy v1.3.1)"><code class="xref py py-func docutils literal notranslate"><span class="pre">scipy.signal.savgol_filter()</span></code></a></p>
<p>Padding can help stop wildly wrong artefacts in the data at the start and enf of the data, particularly when the differntial order is &gt;1.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>User guide section <a class="reference internal" href="../UserGuide/analysisfile.html#smoothing-guide"><span class="std std-ref">Smoothing and Filtering Data</span></a></p>
</div>
</dd></dl>

<dl class="method">
<dt id="Stoner.Analysis.AnalysisMixin.add">
<code class="sig-name descname">add</code><span class="sig-paren">(</span><em class="sig-param">a</em>, <em class="sig-param">b</em>, <em class="sig-param">replace=False</em>, <em class="sig-param">header=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Stoner/Analysis.html#AnalysisMixin.add"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Stoner.Analysis.AnalysisMixin.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Add one column, number or array (b) to another column (a).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<em>index</em>) – First column to work with</p></li>
<li><p><strong>b</strong> (<em>index, float or 1D array</em>) – Second column to work with.</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>header</strong> (<a class="reference external" href="https://docs.python.org/3/library/string.html#module-string" title="(in Python v3.8)"><em>string</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a>) – new column header  (defaults to a-b</p></li>
<li><p><strong>replace</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Replace the a column with the new data</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(<a class="reference internal" href="Stoner.Data.html#Stoner.Data" title="Stoner.Data"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stoner.Data</span></code></a>) –     The newly modified Data object.</p>
</dd>
</dl>
<p>If a and b are tuples of length two, then the firstelement is assumed to be the value and
the second element an uncertainty in the value. The uncertainties will then be propagated and an
additional column with the uncertainites will be added to the data.</p>
</dd></dl>

<dl class="method">
<dt id="Stoner.Analysis.AnalysisMixin.apply">
<code class="sig-name descname">apply</code><span class="sig-paren">(</span><em class="sig-param">func</em>, <em class="sig-param">col=None</em>, <em class="sig-param">replace=True</em>, <em class="sig-param">header=None</em>, <em class="sig-param">**kargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Stoner/Analysis.html#AnalysisMixin.apply"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Stoner.Analysis.AnalysisMixin.apply" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies the given function to each row in the data set and adds to the data set.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>func</strong> (<em>callable</em>) – The function to apply to each row of the data.</p></li>
<li><p><strong>col</strong> (<em>index</em>) – The column in which to place the result of the function</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>replace</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Either replace the existing column/complete data or create a new column or data file.</p></li>
<li><p><strong>header</strong> (<a class="reference external" href="https://docs.python.org/3/library/string.html#module-string" title="(in Python v3.8)"><em>string</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a>) – The new column header(s) (defaults to the name of the function func</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If any extra keyword arguments are supplied then these are passed to the function directly. If
you need to pass any arguments that overlap with the keyword arguments to <a href="#id1"><span class="problematic" id="id2">:py:math:`AnalysisMixin.apply`</span></a>
then these can be supplied in a dictionary argument <em>_extra</em>.</p>
<p>The callable <em>func</em> should have a signature:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="n">row</span><span class="p">,</span><span class="o">**</span><span class="n">kargs</span><span class="p">):</span>
</pre></div>
</div>
<p>and should return either a single float, in which case it will be used to repalce the specified column, or an
array, in which case it is used to completely replace the row of data.</p>
<p>If the function returns a complete row of data, then the <em>replace</em> parameter will cause the return value to be
a new datafile, leaving the original unchanged. The <em>headers</em> parameter can give the complete column headers for
the new data file.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(<a class="reference internal" href="Stoner.Data.html#Stoner.Data" title="Stoner.Data"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stoner.Data</span></code></a>) –     The newly modified Data object.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="Stoner.Analysis.AnalysisMixin.bin">
<code class="sig-name descname">bin</code><span class="sig-paren">(</span><em class="sig-param">xcol=None</em>, <em class="sig-param">ycol=None</em>, <em class="sig-param">bins=0.03</em>, <em class="sig-param">mode='log'</em>, <em class="sig-param">clone=True</em>, <em class="sig-param">**kargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Stoner/Analysis.html#AnalysisMixin.bin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Stoner.Analysis.AnalysisMixin.bin" title="Permalink to this definition">¶</a></dt>
<dd><p>Bin x-y data into new values of x with an error bar.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>xcol</strong> (<em>index</em>) – Index of column of data with X values</p></li>
<li><p><strong>ycol</strong> (<em>index</em>) – Index of column of data with Y values</p></li>
<li><p><strong>bins</strong> (<em>int, float or 1d array</em>) – Number of bins (if integer) or size of bins (if float), or bin edges (if array)</p></li>
<li><p><strong>mode</strong> (<em>string</em>) – “log” or “lin” for logarithmic or linear binning</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>yerr</strong> (<a class="reference internal" href="Stoner.DataFolder.index.html#Stoner.DataFolder.index" title="Stoner.DataFolder.index"><em>index</em></a>) – Column with y-error data if present.</p></li>
<li><p><strong>bin_start</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a>) – Manually override the minimum bin value</p></li>
<li><p><strong>bin_stop</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a>) – Manually override the maximum bin value</p></li>
<li><p><strong>clone</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Return a clone of the current AnalysisMixin with binned data (True)
or just the numbers (False).</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(<a class="reference internal" href="Stoner.Data.html#Stoner.Data" title="Stoner.Data"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stoner.Data</span></code></a> or tuple of 4 array-like) –     Either a clone of the current data set with the new binned data or
tuple of (bin centres, bin values, bin errors, number points/bin),
depending on the <em>clone</em> parameter.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Algorithm inspired by MatLab code wbin,    Copyright (c) 2012:
Michael Lindholm Nielsen</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>User Guide section <a class="reference internal" href="../UserGuide/analysisfile.html#binning-guide"><span class="std std-ref">(Re)Binning Data</span></a></p>
</div>
</dd></dl>

<dl class="method">
<dt id="Stoner.Analysis.AnalysisMixin.clip">
<code class="sig-name descname">clip</code><span class="sig-paren">(</span><em class="sig-param">clipper</em>, <em class="sig-param">column=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Stoner/Analysis.html#AnalysisMixin.clip"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Stoner.Analysis.AnalysisMixin.clip" title="Permalink to this definition">¶</a></dt>
<dd><p>Clips the data based on the column and the clipper value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>column</strong> (<em>index</em>) – Column to look for the maximum in</p></li>
<li><p><strong>clipper</strong> (<em>tuple or array</em>) – Either a tuple of (min,max) or a numpy.ndarray -
in which case the max and min values in that array will be
used as the clip limits</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>(<a class="reference internal" href="Stoner.Data.html#Stoner.Data" title="Stoner.Data"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stoner.Data</span></code></a>) –     The newly modified Data object.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If column is not defined (or is None) the <code class="xref py py-attr docutils literal notranslate"><span class="pre">DataFile.setas</span></code> column
assignments are used.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="Stoner.Analysis.AnalysisMixin.decompose">
<code class="sig-name descname">decompose</code><span class="sig-paren">(</span><em class="sig-param">xcol=None</em>, <em class="sig-param">ycol=None</em>, <em class="sig-param">sym=None</em>, <em class="sig-param">asym=None</em>, <em class="sig-param">replace=True</em>, <em class="sig-param">**kwords</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Stoner/Analysis.html#AnalysisMixin.decompose"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Stoner.Analysis.AnalysisMixin.decompose" title="Permalink to this definition">¶</a></dt>
<dd><p>Given (x,y) data, decomposes the y part into symmetric and antisymmetric contributions in x.</p>
<dl class="field-list simple">
<dt class="field-odd">Keyword Arguments</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>xcol</strong> (<a class="reference internal" href="Stoner.DataFolder.index.html#Stoner.DataFolder.index" title="Stoner.DataFolder.index"><em>index</em></a>) – Index of column with x data - defaults to first x column in self.setas</p></li>
<li><p><strong>ycol</strong> (<a class="reference internal" href="Stoner.DataFolder.index.html#Stoner.DataFolder.index" title="Stoner.DataFolder.index"><em>index</em></a><em> or </em><em>list of indices</em>) – indices of y column(s) data</p></li>
<li><p><strong>sym</strong> (<a class="reference internal" href="Stoner.DataFolder.index.html#Stoner.DataFolder.index" title="Stoner.DataFolder.index"><em>index</em></a>) – Index of column to place symmetric data in default, append to end of data</p></li>
<li><p><strong>asym</strong> (<a class="reference internal" href="Stoner.DataFolder.index.html#Stoner.DataFolder.index" title="Stoner.DataFolder.index"><em>index</em></a>) – Index of column for asymmetric part of ata. Defaults to appending to end of data</p></li>
<li><p><strong>replace</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Overwrite data with output (true)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><em>self</em> – The newly modified <a class="reference internal" href="#Stoner.Analysis.AnalysisMixin" title="Stoner.Analysis.AnalysisMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">AnalysisMixin</span></code></a>.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;Decompose Example&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">Stoner</span> <span class="kn">import</span> <span class="n">Data</span>
<span class="kn">from</span> <span class="nn">Stoner.tools</span> <span class="kn">import</span> <span class="n">format_val</span>
<span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">linspace</span><span class="p">,</span> <span class="n">reshape</span><span class="p">,</span> <span class="n">array</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">201</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="mf">0.3</span> <span class="o">*</span> <span class="n">x</span> <span class="o">**</span> <span class="mi">3</span> <span class="o">-</span> <span class="mi">6</span> <span class="o">*</span> <span class="n">x</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">11</span> <span class="o">*</span> <span class="n">x</span> <span class="o">-</span> <span class="mi">20</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">Data</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">setas</span><span class="o">=</span><span class="s2">&quot;xy&quot;</span><span class="p">,</span> <span class="n">column_headers</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;X&quot;</span><span class="p">,</span> <span class="s2">&quot;Y&quot;</span><span class="p">])</span>
<span class="n">d</span><span class="o">.</span><span class="n">decompose</span><span class="p">()</span>
<span class="n">d</span><span class="o">.</span><span class="n">setas</span> <span class="o">=</span> <span class="s2">&quot;xyyy&quot;</span>
<span class="n">coeffs</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">polyfit</span><span class="p">(</span><span class="n">polynomial_order</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">str_coeffs</span> <span class="o">=</span> <span class="p">[</span><span class="n">format_val</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;eng&quot;</span><span class="p">,</span> <span class="n">places</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">coeffs</span><span class="o">.</span><span class="n">ravel</span><span class="p">()]</span>
<span class="n">str_coeffs</span> <span class="o">=</span> <span class="n">reshape</span><span class="p">(</span><span class="n">array</span><span class="p">(</span><span class="n">str_coeffs</span><span class="p">),</span> <span class="n">coeffs</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="n">d</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">d</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="o">-</span><span class="mi">6</span><span class="p">,</span> <span class="o">-</span><span class="mi">800</span><span class="p">,</span> <span class="s2">&quot;Coefficients</span><span class="se">\n</span><span class="s2">{}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">str_coeffs</span><span class="p">),</span> <span class="n">fontdict</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;size&quot;</span><span class="p">:</span> <span class="s2">&quot;x-small&quot;</span><span class="p">})</span>
<span class="n">d</span><span class="o">.</span><span class="n">ylabel</span> <span class="o">=</span> <span class="s2">&quot;Data&quot;</span>
<span class="n">d</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;Decompose Example&quot;</span>
<span class="n">d</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../samples/decompose.png">png</a>, <a class="reference external" href="../samples/decompose.hires.png">hires.png</a>, <a class="reference external" href="../samples/decompose.pdf">pdf</a>)</p>
<div class="figure align-default">
<img alt="../_images/decompose.png" src="../_images/decompose.png" />
</div>
</dd></dl>

<dl class="method">
<dt id="Stoner.Analysis.AnalysisMixin.diffsum">
<code class="sig-name descname">diffsum</code><span class="sig-paren">(</span><em class="sig-param">a</em>, <em class="sig-param">b</em>, <em class="sig-param">replace=False</em>, <em class="sig-param">header=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Stoner/Analysis.html#AnalysisMixin.diffsum"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Stoner.Analysis.AnalysisMixin.diffsum" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate <span class="math notranslate nohighlight">\(\frac{a-b}{a+b}\)</span> for the two columns <em>a</em> and <em>b</em>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<em>index</em>) – First column to work with</p></li>
<li><p><strong>b</strong> (<em>index, float or 1D array</em>) – Second column to work with.</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>header</strong> (<a class="reference external" href="https://docs.python.org/3/library/string.html#module-string" title="(in Python v3.8)"><em>string</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a>) – new column header  (defaults to a-b</p></li>
<li><p><strong>replace</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Replace the a column with the new data</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(<a class="reference internal" href="Stoner.Data.html#Stoner.Data" title="Stoner.Data"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stoner.Data</span></code></a>) –     The newly modified Data object.</p>
</dd>
</dl>
<p>If a and b are tuples of length two, then the firstelement is assumed to be the value and
the second element an uncertainty in the value. The uncertainties will then be propagated and an
additional column with the uncertainites will be added to the data.</p>
</dd></dl>

<dl class="method">
<dt id="Stoner.Analysis.AnalysisMixin.divide">
<code class="sig-name descname">divide</code><span class="sig-paren">(</span><em class="sig-param">a</em>, <em class="sig-param">b</em>, <em class="sig-param">replace=False</em>, <em class="sig-param">header=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Stoner/Analysis.html#AnalysisMixin.divide"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Stoner.Analysis.AnalysisMixin.divide" title="Permalink to this definition">¶</a></dt>
<dd><p>Divide one column (a) by  another column, number or array (b).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<em>index</em>) – First column to work with</p></li>
<li><p><strong>b</strong> (<em>index, float or 1D array</em>) – Second column to work with.</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>header</strong> (<a class="reference external" href="https://docs.python.org/3/library/string.html#module-string" title="(in Python v3.8)"><em>string</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a>) – new column header  (defaults to a-b</p></li>
<li><p><strong>replace</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Replace the a column with the new data</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(<a class="reference internal" href="Stoner.Data.html#Stoner.Data" title="Stoner.Data"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stoner.Data</span></code></a>) –     The newly modified Data object.</p>
</dd>
</dl>
<p>If a and b are tuples of length two, then the firstelement is assumed to be the value and
the second element an uncertainty in the value. The uncertainties will then be propagated and an
additional column with the uncertainites will be added to the data.</p>
</dd></dl>

<dl class="method">
<dt id="Stoner.Analysis.AnalysisMixin.extrapolate">
<code class="sig-name descname">extrapolate</code><span class="sig-paren">(</span><em class="sig-param">new_x</em>, <em class="sig-param">xcol=None</em>, <em class="sig-param">ycol=None</em>, <em class="sig-param">yerr=None</em>, <em class="sig-param">overlap=20</em>, <em class="sig-param">kind='linear'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Stoner/Analysis.html#AnalysisMixin.extrapolate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Stoner.Analysis.AnalysisMixin.extrapolate" title="Permalink to this definition">¶</a></dt>
<dd><p>Extrapolate data based on local fit to x,y data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>new_x</strong> (<em>float or array</em>) – New values of x data.</p>
</dd>
<dt class="field-even">Keyword Arguments</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>xcol</strong> (<em>column index</em><em>, </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a>) – column containing x-data or None to use setas attribute</p></li>
<li><p><strong>ycol</strong> (<em>column index</em><em>(</em><em>es</em><em>) or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a>) – column(s) containing the y-data or None to use setas attribute.</p></li>
<li><p><strong>yerr</strong> (<em>column index</em><em>(</em><em>es</em><em>) or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a>) – y error data column or None to use setas attribute</p></li>
<li><p><strong>overlap</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – range of x-data used for the local fit for extrapolating. If int then overlap number of
points is used, if float then that range x-axis space is used.</p></li>
<li><p><strong>kind</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#callable" title="(in Python v3.8)"><em>callable</em></a>) – Determines local fitting function. If string should be “linear”, “quadratic” or “cubic” if
callable, then represents a function to be fitted to the data.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><em>(array)</em> –     Extrapolated values.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the new_x values lie outside the span of the x-data, then the nearest <em>overlap</em> portion of the data is used
to estimate the values. If the new_x values are within the span of the x-data then the portion of the data
centred about the point and overlap points long will be used to interpolate a value.</p>
<p>If <em>kind</em> is callable, it should take x values in the first parameter and free fitting parameters as the other
parameters (i.e. as with <code class="xref py py-meth docutils literal notranslate"><span class="pre">AnalysisMixin.curve_fit()</span></code>).</p>
</div>
</dd></dl>

<dl class="method">
<dt id="Stoner.Analysis.AnalysisMixin.integrate">
<code class="sig-name descname">integrate</code><span class="sig-paren">(</span><em class="sig-param">xcol=None</em>, <em class="sig-param">ycol=None</em>, <em class="sig-param">result=None</em>, <em class="sig-param">header=None</em>, <em class="sig-param">result_name=None</em>, <em class="sig-param">output='data'</em>, <em class="sig-param">bounds=&lt;function AnalysisMixin.&lt;lambda&gt;&gt;</em>, <em class="sig-param">**kargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Stoner/Analysis.html#AnalysisMixin.integrate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Stoner.Analysis.AnalysisMixin.integrate" title="Permalink to this definition">¶</a></dt>
<dd><p>Inegrate a column of data, optionally returning the cumulative integral.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>xcol</strong> (<em>index</em>) – The X data column index (or header)</p></li>
<li><p><strong>ycol</strong> (<em>index</em>)</p></li>
<li><p><strong>The Y data column index</strong> (<em>or header</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>result</strong> (<a class="reference internal" href="Stoner.DataFolder.index.html#Stoner.DataFolder.index" title="Stoner.DataFolder.index"><em>index</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a>) – Either a column index (or header) to overwrite with the cumulative data,
or True to add a new column or None to not store the cumulative result.</p></li>
<li><p><strong>result_name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – The metadata name for the final result</p></li>
<li><p><strong>header</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – The name of the header for the results column.</p></li>
<li><p><strong>output</strong> (<em>Str</em>) – What to return - ‘data’ (default) - this object, ‘result’: final result</p></li>
<li><p><strong>bounds</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#callable" title="(in Python v3.8)"><em>callable</em></a>) – A function that evaluates for each row to determine if the data should be integrated over.</p></li>
<li><p><strong>**kargs</strong> – Other keyword arguements are fed direct to the scipy.integrate.cumtrapz method</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(<a class="reference internal" href="Stoner.Data.html#Stoner.Data" title="Stoner.Data"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stoner.Data</span></code></a>) –     The newly modified Data object.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is a pass through to the scipy.integrate.cumtrapz routine which just uses trapezoidal integration. A better alternative would be
to offer a variety of methods including simpson’s rule and interpolation of data. If xcol or ycol are not specified then
the current values from the <a class="reference internal" href="Stoner.Core.DataFile.html#Stoner.Core.DataFile.setas" title="Stoner.Core.DataFile.setas"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Stoner.Core.DataFile.setas</span></code></a> attribute are used.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="Stoner.Analysis.AnalysisMixin.interpolate">
<code class="sig-name descname">interpolate</code><span class="sig-paren">(</span><em class="sig-param">newX</em>, <em class="sig-param">kind='linear'</em>, <em class="sig-param">xcol=None</em>, <em class="sig-param">replace=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Stoner/Analysis.html#AnalysisMixin.interpolate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Stoner.Analysis.AnalysisMixin.interpolate" title="Permalink to this definition">¶</a></dt>
<dd><p>Interpolate a dataset to get a new set of values for a given set of x data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ewX</strong> (<em>1D array or None</em>) – Row indices or X column values to interpolate with. If None, then the
<a class="reference internal" href="#Stoner.Analysis.AnalysisMixin.interpolate" title="Stoner.Analysis.AnalysisMixin.interpolate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AnalysisMixin.interpolate()</span></code></a> returns an interpolation function. Unlike the raw interpolation
function from scipy, this interpolation function will work with MaskedArrays by compressing them
first.</p>
</dd>
<dt class="field-even">Keyword Arguments</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>kind</strong> (<a class="reference external" href="https://docs.python.org/3/library/string.html#module-string" title="(in Python v3.8)"><em>string</em></a>) – Type of interpolation function to use - does a pass through from numpy. Default is linear.</p></li>
<li><p><strong>xcol</strong> (<a class="reference internal" href="Stoner.DataFolder.index.html#Stoner.DataFolder.index" title="Stoner.DataFolder.index"><em>index</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a>) – Column index or label that contains the data to use with newX to determine which rows to return. Defaults to None.</p></li>
<li><p><strong>replace</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – If true, then the current AnalysisMixin’s data is replaced with the  newly interpolated data and the current AnalysisMixin is
returned.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><em>(2D numpy array)</em> –     Section of the current object’s data if replace is False(default) or the modofied AnalysisMixin if replace is true.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Returns complete rows of data corresponding to the indices given in newX. if xcol is None, then newX is interpreted as (fractional) row indices.
Otherwise, the column specified in xcol is thresholded with the values given in newX and the resultant row indices used to return the data.</p>
<p>If the positional argument, newX is None, then the return value is an interpolation function. This interpolation function takes one argument
- if <em>xcol</em> was None, this argument is interpreted as array indices, but if <em>xcol</em> was specified, then this argument is interpreted as
an array of xvalues.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="Stoner.Analysis.AnalysisMixin.make_bins">
<code class="sig-name descname">make_bins</code><span class="sig-paren">(</span><em class="sig-param">xcol</em>, <em class="sig-param">bins</em>, <em class="sig-param">mode='lin'</em>, <em class="sig-param">**kargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Stoner/Analysis.html#AnalysisMixin.make_bins"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Stoner.Analysis.AnalysisMixin.make_bins" title="Permalink to this definition">¶</a></dt>
<dd><p>Utility method to generate bin boundaries and centres along an axis.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>xcol</strong> (<em>index</em>) – Column of data with X values</p></li>
<li><p><strong>bins</strong> (<em>1d_)array or int or float</em>) – Number of bins (int) or width of bins (if float)</p></li>
<li><p><strong>mode</strong> (<em>string</em>) – “lin” for linear binning, “log” for logarithmic binning.</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>bin_start</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a>) – Override minimum bin value</p></li>
<li><p><strong>bin_stop</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a>) – Override the maximum bin value</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><em>(tuple of 4 arrays)</em> –     bin_start,bin_stop,bin_centres (1D arrays): The locations of the bin
boundaries and centres for each bin.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="Stoner.Analysis.AnalysisMixin.max">
<code class="sig-name descname">max</code><span class="sig-paren">(</span><em class="sig-param">column=None</em>, <em class="sig-param">bounds=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Stoner/Analysis.html#AnalysisMixin.max"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Stoner.Analysis.AnalysisMixin.max" title="Permalink to this definition">¶</a></dt>
<dd><p>Find maximum value and index in a column of data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>column</strong> (<em>index</em>) – Column to look for the maximum in</p>
</dd>
<dt class="field-even">Keyword Arguments</dt>
<dd class="field-even"><p><strong>bounds</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#callable" title="(in Python v3.8)"><em>callable</em></a>) – A callable function that takes a single argument list of
numbers representing one row, and returns True for all rows to search in.</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><em>(float,int)</em> –     (maximum value,row index of max value)</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If column is not defined (or is None) the <code class="xref py py-attr docutils literal notranslate"><span class="pre">DataFile.setas</span></code> column
assignments are used.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="Stoner.Analysis.AnalysisMixin.mean">
<code class="sig-name descname">mean</code><span class="sig-paren">(</span><em class="sig-param">column=None</em>, <em class="sig-param">sigma=None</em>, <em class="sig-param">bounds=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Stoner/Analysis.html#AnalysisMixin.mean"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Stoner.Analysis.AnalysisMixin.mean" title="Permalink to this definition">¶</a></dt>
<dd><p>Find mean value of a data column.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>column</strong> (<em>index</em>) – Column to look for the maximum in</p>
</dd>
<dt class="field-even">Keyword Arguments</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>sigma</strong> (<em>column index</em><em> or </em><a class="reference internal" href="../Stoner.html#module-Stoner.core.array" title="Stoner.core.array"><em>array</em></a>) – The uncertainity noted for each value in the mean</p></li>
<li><p><strong>bounds</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#callable" title="(in Python v3.8)"><em>callable</em></a>) – A callable function that takes a single argument list of
numbers representing one row, and returns True for all rows to search in.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><em>(float)</em> –     The mean of the data.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If column is not defined (or is None) the <code class="xref py py-attr docutils literal notranslate"><span class="pre">DataFile.setas</span></code> column
assignments are used.</p>
</div>
<div class="admonition-todo admonition" id="id3">
<p class="admonition-title">Todo</p>
<p>Fix the row index when the bounds function is used - see note of <a class="reference internal" href="#Stoner.Analysis.AnalysisMixin.max" title="Stoner.Analysis.AnalysisMixin.max"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AnalysisMixin.max()</span></code></a></p>
</div>
</dd></dl>

<dl class="method">
<dt id="Stoner.Analysis.AnalysisMixin.min">
<code class="sig-name descname">min</code><span class="sig-paren">(</span><em class="sig-param">column=None</em>, <em class="sig-param">bounds=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Stoner/Analysis.html#AnalysisMixin.min"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Stoner.Analysis.AnalysisMixin.min" title="Permalink to this definition">¶</a></dt>
<dd><p>Find minimum value and index in a column of data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>column</strong> (<em>index</em>) – Column to look for the maximum in</p>
</dd>
<dt class="field-even">Keyword Arguments</dt>
<dd class="field-even"><p><strong>bounds</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#callable" title="(in Python v3.8)"><em>callable</em></a>) – A callable function that takes a single argument list of
numbers representing one row, and returns True for all rows to search in.</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><em>(float,int)</em> –     (minimum value,row index of min value)</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If column is not defined (or is None) the <code class="xref py py-attr docutils literal notranslate"><span class="pre">DataFile.setas</span></code> column
assignments are used.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="Stoner.Analysis.AnalysisMixin.multiply">
<code class="sig-name descname">multiply</code><span class="sig-paren">(</span><em class="sig-param">a</em>, <em class="sig-param">b</em>, <em class="sig-param">replace=False</em>, <em class="sig-param">header=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Stoner/Analysis.html#AnalysisMixin.multiply"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Stoner.Analysis.AnalysisMixin.multiply" title="Permalink to this definition">¶</a></dt>
<dd><p>Multiply one column (a) by  another column, number or array (b).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<em>index</em>) – First column to work with</p></li>
<li><p><strong>b</strong> (<em>index, float or 1D array</em>) – Second column to work with.</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>header</strong> (<a class="reference external" href="https://docs.python.org/3/library/string.html#module-string" title="(in Python v3.8)"><em>string</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a>) – new column header  (defaults to a-b</p></li>
<li><p><strong>replace</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Replace the a column with the new data</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(<a class="reference internal" href="Stoner.Data.html#Stoner.Data" title="Stoner.Data"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stoner.Data</span></code></a>) –     The newly modified Data object.</p>
</dd>
</dl>
<p>If a and b are tuples of length two, then the firstelement is assumed to be the value and
the second element an uncertainty in the value. The uncertainties will then be propagated and an
additional column with the uncertainites will be added to the data.</p>
</dd></dl>

<dl class="method">
<dt id="Stoner.Analysis.AnalysisMixin.normalise">
<code class="sig-name descname">normalise</code><span class="sig-paren">(</span><em class="sig-param">target=None</em>, <em class="sig-param">base=None</em>, <em class="sig-param">replace=True</em>, <em class="sig-param">header=None</em>, <em class="sig-param">scale=None</em>, <em class="sig-param">limits=(0.0</em>, <em class="sig-param">1.0)</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Stoner/Analysis.html#AnalysisMixin.normalise"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Stoner.Analysis.AnalysisMixin.normalise" title="Permalink to this definition">¶</a></dt>
<dd><p>Normalise data columns by dividing through by a base column value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>target</strong> (<em>index</em>) – One or more target columns to normalise can be a string, integer or list of strings or integers.
If None then the default ‘y’ column is used.</p>
</dd>
<dt class="field-even">Keyword Arguments</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>base</strong> (<a class="reference internal" href="Stoner.DataFolder.index.html#Stoner.DataFolder.index" title="Stoner.DataFolder.index"><em>index</em></a>) – The column to normalise to, can be an integer or string. <strong>Depricated</strong> can also be a tuple (low,high) being the output range</p></li>
<li><p><strong>replace</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Set True(default) to overwrite  the target data columns</p></li>
<li><p><strong>header</strong> (<a class="reference external" href="https://docs.python.org/3/library/string.html#module-string" title="(in Python v3.8)"><em>string</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a>) – The new column header - default is target name(norm)</p></li>
<li><p><strong>scale</strong> (<a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a><em> or </em><em>tuple of float</em><em>,</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a>) – Output range after normalising - low,high or None to map to -1,1</p></li>
<li><p><strong>limits</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a><em>,</em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a>) – (low,high) - Take the input range from the <em>high</em> and <em>low</em> fraction of the input when sorted.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(<a class="reference internal" href="Stoner.Data.html#Stoner.Data" title="Stoner.Data"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stoner.Data</span></code></a>) –     The newly modified Data object.</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>The <em>limits</em> parameter is used to set the input scale being normalised from - if the data has a few outliers then
this setting can be used to clip the input range before normalising. The parameters in the limit are the values at
the <em>low</em> and <em>high</em> fractions of the cumulative distribution function of the data.</p>
</dd></dl>

<dl class="method">
<dt id="Stoner.Analysis.AnalysisMixin.outlier_detection">
<code class="sig-name descname">outlier_detection</code><span class="sig-paren">(</span><em class="sig-param">column=None</em>, <em class="sig-param">window=7</em>, <em class="sig-param">certainty=3.0</em>, <em class="sig-param">action='mask'</em>, <em class="sig-param">width=1</em>, <em class="sig-param">func=None</em>, <em class="sig-param">**kargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Stoner/Analysis.html#AnalysisMixin.outlier_detection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Stoner.Analysis.AnalysisMixin.outlier_detection" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to detect outliers in a column of data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>column</strong> (<em>column index</em>) – specifing column for outlier detection. If not set,
defaults to the current y set column.</p>
</dd>
<dt class="field-even">Keyword Arguments</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>window</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – data window for anomoly detection</p></li>
<li><p><strong>certainty</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a>) – eg 3 detects data 3 standard deviations from average</p></li>
<li><p><strong>action</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#callable" title="(in Python v3.8)"><em>callable</em></a>) – what to do with outlying points, options are
* ‘mask’ outlier points are masked (default)
* ‘mask row’ outlier rows are masked
* ‘delete’  outlier rows are deleted
* callable  the value of the action keyword is called with the outlier row
* anything else defaults to do nothing.</p></li>
<li><p><strong>width</strong> (<em>odd integer</em>) – Number of rows that an outliing spike could occupy. Defaults to 1.</p></li>
<li><p><strong>func</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#callable" title="(in Python v3.8)"><em>callable</em></a>) – A function that determines if the current row is an outlier.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(<a class="reference internal" href="Stoner.Data.html#Stoner.Data" title="Stoner.Data"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stoner.Data</span></code></a>) –     The newly modified Data object.</p>
</dd>
</dl>
<p>outlier_detection will add row numbers of detected outliers to the metadata
of d, also will perform action depending on request eg ‘mask’, ‘delete’
(any other action defaults to doing nothing).</p>
<p>The detection looks at a window of the data, takes the average and looks
to see if the current data point falls certainty * std deviations away from
data average.</p>
<p>The outlier detection function has the signatrure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">outlier</span><span class="p">(</span><span class="n">row</span><span class="p">,</span><span class="n">column</span><span class="p">,</span><span class="n">window</span><span class="p">,</span><span class="n">certainity</span><span class="p">,</span><span class="o">**</span><span class="n">kargs</span><span class="p">)</span>
    <span class="c1">#code</span>
    <span class="k">return</span> <span class="kc">True</span> <span class="c1"># or False</span>
</pre></div>
</div>
<p>All extra keyword arguments are passed to the outlier detector.</p>
<p>IF <em>action</em> is a callable function then it should take the form of:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">action</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">column</span><span class="p">,</span><span class="n">row</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>where <em>i</em> is the number of the outlier row, <em>column</em> the same value as above
and <em>row</em> is the data for the row.</p>
<p>In all cases the indices of the outlier rows are added to the ;outlier’ metadata.</p>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;Detect outlying points from a lione.&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">Stoner</span> <span class="kn">import</span> <span class="n">Data</span>
<span class="kn">from</span> <span class="nn">Stoner.analysis.utils</span> <span class="kn">import</span> <span class="n">poly_outlier</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">201</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="mf">0.01</span> <span class="o">*</span> <span class="n">x</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="mi">5</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span> <span class="o">/</span> <span class="mf">10.0</span><span class="p">)</span>

<span class="n">i</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">-</span> <span class="mi">20</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span> <span class="o">+</span> <span class="mi">10</span>
<span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">i</span><span class="p">),</span> <span class="n">scale</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>

<span class="n">d</span> <span class="o">=</span> <span class="n">Data</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">column_stack</span><span class="p">((</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)),</span> <span class="n">column_headers</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">],</span> <span class="n">setas</span><span class="o">=</span><span class="s2">&quot;xy&quot;</span><span class="p">)</span>
<span class="n">d</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fmt</span><span class="o">=</span><span class="s2">&quot;b.&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;raw data&quot;</span><span class="p">)</span>
<span class="n">e</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">clone</span>
<span class="n">e</span><span class="o">.</span><span class="n">outlier_detection</span><span class="p">(</span><span class="n">window</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;delete&quot;</span><span class="p">)</span>
<span class="n">e</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fmt</span><span class="o">=</span><span class="s2">&quot;r-&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Default Outliers removed&quot;</span><span class="p">)</span>
<span class="n">f</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">clone</span>
<span class="n">f</span><span class="o">.</span><span class="n">outlier_detection</span><span class="p">(</span>
    <span class="n">window</span><span class="o">=</span><span class="mi">21</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">certainty</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;delete&quot;</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="n">poly_outlier</span>
<span class="p">)</span>
<span class="n">f</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fmt</span><span class="o">=</span><span class="s2">&quot;g-&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Poly Outliers removed&quot;</span><span class="p">)</span>
<span class="n">g</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">clone</span>
<span class="n">g</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">outlier_detection</span><span class="p">(</span>
    <span class="n">window</span><span class="o">=</span><span class="mi">21</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">certainty</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">action</span><span class="o">=</span><span class="s2">&quot;delete&quot;</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="n">poly_outlier</span>
<span class="p">)</span>
<span class="n">g</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="s2">&quot;purple&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Masked outliers&quot;</span><span class="p">)</span>
<span class="n">g</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">clone</span>
<span class="n">e</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;Outlier detection test&quot;</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../samples/outlier.png">png</a>, <a class="reference external" href="../samples/outlier.hires.png">hires.png</a>, <a class="reference external" href="../samples/outlier.pdf">pdf</a>)</p>
<div class="figure align-default">
<img alt="../_images/outlier.png" src="../_images/outlier.png" />
</div>
</dd></dl>

<dl class="method">
<dt id="Stoner.Analysis.AnalysisMixin.peaks">
<code class="sig-name descname">peaks</code><span class="sig-paren">(</span><em class="sig-param">**kargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Stoner/Analysis.html#AnalysisMixin.peaks"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Stoner.Analysis.AnalysisMixin.peaks" title="Permalink to this definition">¶</a></dt>
<dd><p>Locates peaks and/or troughs in a column of data by using SG-differentiation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ycol</strong> (<em>index</em>) – the column name or index of the data in which to search for peaks</p></li>
<li><p><strong>width</strong> (<em>int or float</em>) – the expected minium halalf-width of a peak in terms of the number of data points (int) or distance in x (float).
This is used in the differnetiation code to find local maxima. Bigger equals less sensitive
to experimental noise, smaller means better eable to see sharp peaks</p></li>
<li><p><strong>poly</strong> (<em>int</em>) – the order of polynomial to use when differentiating the data to locate a peak. Must &gt;=2, higher numbers
will find sharper peaks more accurately but at the risk of finding more false positives.</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>significance</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a>) – used to decide whether a local maxmima is a significant peak. Essentially just the curvature
of the data. Bigger means less sensistive, smaller means more likely to detect noise. Default is the maximum curvature/(2*width)</p></li>
<li><p><strong>xcol</strong> (<a class="reference internal" href="Stoner.DataFolder.index.html#Stoner.DataFolder.index" title="Stoner.DataFolder.index"><em>index</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a>) – name or index of data column that p[rovides the x-coordinate (default None)</p></li>
<li><p><strong>peaks</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – select whether to measure peaks in data (default True)</p></li>
<li><p><strong>troughs</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – select whether to measure troughs in data (default False)</p></li>
<li><p><strong>sort</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Sor the results by significance of peak</p></li>
<li><p><strong>modify</strong> (<em>book</em>) – If true, then the returned object is a copy of self with only the peaks/troughs left in the data.</p></li>
<li><p><strong>full_data</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – If True (default) then all columns of the data at which peaks in the <em>ycol</em> column are found. <em>modify</em> true implies
<em>full_data</em> is also true. If <em>full_data</em> is False, then only the x-column values of the peaks are returned.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><em>(various)</em> –     If <em>modify</em> is true, then returns a the AnalysisMixin with the data set to just the peaks/troughs. If <em>modify</em> is false (default),
then the return value depends on <em>ycol</em> and <em>xcol</em>. If <em>ycol</em> is not None and <em>xcol</em> is None, then returns conplete rows of
data corresponding to the found peaks/troughs. If <em>xcol</em> is not None, or <em>ycol</em> is None and <em>xcol</em> is None, then
returns a 1D array of the x positions of the peaks/troughs.</p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>User guide section <a class="reference internal" href="../UserGuide/analysisfile.html#peak-finding"><span class="std std-ref">Peak Finding</span></a></p>
</div>
</dd></dl>

<dl class="method">
<dt id="Stoner.Analysis.AnalysisMixin.polyfit">
<code class="sig-name descname">polyfit</code><span class="sig-paren">(</span><em class="sig-param">xcol=None</em>, <em class="sig-param">ycol=None</em>, <em class="sig-param">polynomial_order=2</em>, <em class="sig-param">bounds=&lt;function AnalysisMixin.&lt;lambda&gt;&gt;</em>, <em class="sig-param">result=None</em>, <em class="sig-param">replace=False</em>, <em class="sig-param">header=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Stoner/Analysis.html#AnalysisMixin.polyfit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Stoner.Analysis.AnalysisMixin.polyfit" title="Permalink to this definition">¶</a></dt>
<dd><p>Pass through to numpy.polyfit.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>xcol</strong> (<em>index</em>) – Index to the column in the data with the X data in it</p></li>
<li><p><strong>ycol</strong> (<em>index</em>) – Index to the column int he data with the Y data in it</p></li>
<li><p><strong>polynomial_order</strong> (<em>int</em>) – Order of polynomial to fit (default 2)</p></li>
<li><p><strong>bounds</strong> (<em>callable</em>) – A function that evaluates True if the current row should be included in the fit</p></li>
<li><p><strong>result</strong> (<em>index or None</em>) – Add the fitted data to the current data object in a new column (default don’t add)</p></li>
<li><p><strong>replace</strong> (<em>bool</em>) – Overwrite or insert new data if result is not None (default False)</p></li>
<li><p><strong>header</strong> (<em>string or None</em>) – Name of column_header of replacement data. Default is construct a string from the y column headser and polynomial order.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><em>(numpy.poly)</em> –     The best fit polynomial as a numpy.poly object.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the x or y columns are not specified (or are None) the the setas attribute is used instead.</p>
<p>This method is depricated and may be removed in a future version in favour of the more general curve_fit</p>
</div>
</dd></dl>

<dl class="method">
<dt id="Stoner.Analysis.AnalysisMixin.scale">
<code class="sig-name descname">scale</code><span class="sig-paren">(</span><em class="sig-param">other</em>, <em class="sig-param">xcol=None</em>, <em class="sig-param">ycol=None</em>, <em class="sig-param">**kargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Stoner/Analysis.html#AnalysisMixin.scale"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Stoner.Analysis.AnalysisMixin.scale" title="Permalink to this definition">¶</a></dt>
<dd><p>Scale the x and y data in this DataFile to match the x and y data in another DataFile.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>other</strong> (<em>DataFile</em>) – The other isntance of a datafile to match to</p>
</dd>
<dt class="field-even">Keyword Arguments</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>xcol</strong> (<em>column index</em>) – Column with x points in it, default to None to use setas attribute value</p></li>
<li><p><strong>ycol</strong> (<em>column index</em>) – Column with ypoints in it, default to None to use setas attribute value</p></li>
<li><p><strong>xmode</strong> (<em>'affine'</em><em>, </em><em>'linear'</em><em>,</em><em>'scale'</em><em>,</em><em>'offset'</em>) – How to manipulate the x-data to match up</p></li>
<li><p><strong>ymode</strong> (<em>'linear'</em><em>,</em><em>'scale'</em><em>,</em><em>'offset'</em>) – How to manipulate the y-data to match up.</p></li>
<li><p><strong>bounds</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#callable" title="(in Python v3.8)"><em>callable</em></a>) – Used to identiyf the set of (x,y) points to be used for scaling. Defaults to the whole data set if not speicifed.</p></li>
<li><p><strong>otherbounds</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#callable" title="(in Python v3.8)"><em>callable</em></a>) – Used to detemrine the set of (x,y) points in the other data file. Defaults to bounds if not given.</p></li>
<li><p><strong>use_estimate</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a><em> or </em><em>3x2 array</em>) – Specifies whether to estimate an initial transformation value or to use the provided one, or
start with an identity transformation.</p></li>
<li><p><strong>replace</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Whether to map the x,y data to the new co-ordinates and return a copy of this AnalysisMixin (true) or to just return
the results of the scaling.</p></li>
<li><p><strong>headers</strong> (<em>2-element list</em><em> or </em><em>tuple of strings</em>) – new column headers to use if replace is True.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><em>(various)</em> –     Either a copy of the :py:class:Stoner.Data` modified so that the x and y columns match <em>other</em> if <em>replace</em> is True, or
<em>opt_trans</em>,*trans_err*,*new_xy_data*. Where <em>opt_trans</em> is the optimum affine transformation, <em>trans_err</em> is a matrix
giving the standard error in the transformation matrix components and  <em>new_xy_data</em> is an (n x 2) array of the transformed data.</p>
</dd>
</dl>
<p class="rubric">Example</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;Example of using scale to overlap data&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">Stoner</span> <span class="kn">import</span> <span class="n">Data</span>
<span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">linspace</span><span class="p">,</span> <span class="n">sin</span><span class="p">,</span> <span class="n">exp</span><span class="p">,</span> <span class="n">pi</span><span class="p">,</span> <span class="n">column_stack</span>
<span class="kn">from</span> <span class="nn">numpy.random</span> <span class="kn">import</span> <span class="n">normal</span>
<span class="kn">import</span> <span class="nn">matplotlib</span> <span class="kn">as</span> <span class="nn">mpl</span>
<span class="kn">from</span> <span class="nn">tabulate</span> <span class="kn">import</span> <span class="n">tabulate</span>

<span class="n">mpl</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">,</span> <span class="n">usetex</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span> <span class="o">*</span> <span class="n">pi</span><span class="p">,</span> <span class="mi">201</span><span class="p">)</span>
<span class="n">x2</span> <span class="o">=</span> <span class="n">x</span> <span class="o">*</span> <span class="mf">1.5</span> <span class="o">+</span> <span class="mf">0.23</span>
<span class="n">y</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">*</span> <span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">x</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">pi</span><span class="p">))</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">+</span> <span class="n">normal</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">scale</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
<span class="n">y2</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">x</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">pi</span><span class="p">))</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">normal</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">scale</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>

<span class="n">d</span> <span class="o">=</span> <span class="n">Data</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">column_headers</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Time&quot;</span><span class="p">,</span> <span class="s2">&quot;Signal 1&quot;</span><span class="p">],</span> <span class="n">setas</span><span class="o">=</span><span class="s2">&quot;xy&quot;</span><span class="p">)</span>
<span class="n">d2</span> <span class="o">=</span> <span class="n">Data</span><span class="p">(</span><span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">column_headers</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Time&quot;</span><span class="p">,</span> <span class="s2">&quot;Signal 2&quot;</span><span class="p">],</span> <span class="n">setas</span><span class="o">=</span><span class="s2">&quot;xy&quot;</span><span class="p">)</span>

<span class="n">d</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;1$^</span><span class="se">\\</span><span class="s2">mathrm{st}$ signal&quot;</span><span class="p">)</span>
<span class="n">d2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">figure</span><span class="o">=</span><span class="n">d</span><span class="o">.</span><span class="n">fig</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;2$^</span><span class="se">\\</span><span class="s2">mathrm{nd}$ signal&quot;</span><span class="p">)</span>
<span class="n">d3</span> <span class="o">=</span> <span class="n">d2</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="s2">&quot;Signal 2 scaled&quot;</span><span class="p">,</span> <span class="n">xmode</span><span class="o">=</span><span class="s2">&quot;affine&quot;</span><span class="p">)</span>
<span class="n">d3</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">figure</span><span class="o">=</span><span class="n">d</span><span class="o">.</span><span class="n">fig</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;1$^</span><span class="se">\\</span><span class="s2">mathrm{st}$ scaled signals&quot;</span><span class="p">)</span>
<span class="n">d3</span><span class="p">[</span><span class="s2">&quot;test&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">linspace</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="n">txt</span> <span class="o">=</span> <span class="n">tabulate</span><span class="p">(</span><span class="n">d3</span><span class="p">[</span><span class="s2">&quot;Transform&quot;</span><span class="p">],</span> <span class="n">floatfmt</span><span class="o">=</span><span class="s2">&quot;.2f&quot;</span><span class="p">,</span> <span class="n">tablefmt</span><span class="o">=</span><span class="s2">&quot;grid&quot;</span><span class="p">)</span>
<span class="n">d3</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s2">&quot;Transform</span><span class="se">\n</span><span class="s2">{}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">txt</span><span class="p">),</span> <span class="n">fontdict</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;size&quot;</span><span class="p">:</span> <span class="s2">&quot;x-small&quot;</span><span class="p">})</span>

<span class="n">np_data</span> <span class="o">=</span> <span class="n">column_stack</span><span class="p">((</span><span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">))</span>
<span class="n">d4</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="n">np_data</span><span class="p">,</span> <span class="n">header</span><span class="o">=</span><span class="s2">&quot;Signal 2 scaled&quot;</span><span class="p">,</span> <span class="n">xmode</span><span class="o">=</span><span class="s2">&quot;affine&quot;</span><span class="p">,</span> <span class="n">use_estimate</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">d4</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">figure</span><span class="o">=</span><span class="n">d</span><span class="o">.</span><span class="n">fig</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;2$^</span><span class="se">\\</span><span class="s2">mathrm{nd}$ scaled signal&quot;</span><span class="p">)</span>
<span class="n">d4</span><span class="o">.</span><span class="n">ylim</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>
<span class="n">txt</span> <span class="o">=</span> <span class="n">tabulate</span><span class="p">(</span><span class="n">d4</span><span class="p">[</span><span class="s2">&quot;Transform&quot;</span><span class="p">],</span> <span class="n">floatfmt</span><span class="o">=</span><span class="s2">&quot;.2f&quot;</span><span class="p">,</span> <span class="n">tablefmt</span><span class="o">=</span><span class="s2">&quot;grid&quot;</span><span class="p">)</span>
<span class="n">d4</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="o">-</span><span class="mi">7</span><span class="p">,</span> <span class="s2">&quot;Transform</span><span class="se">\n</span><span class="s2">{}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">txt</span><span class="p">),</span> <span class="n">fontdict</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;size&quot;</span><span class="p">:</span> <span class="s2">&quot;x-small&quot;</span><span class="p">})</span>

<span class="n">d4</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;Scaling Example&quot;</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../samples/scale.png">png</a>, <a class="reference external" href="../samples/scale.hires.png">hires.png</a>, <a class="reference external" href="../samples/scale.pdf">pdf</a>)</p>
<div class="figure align-default">
<img alt="../_images/scale.png" src="../_images/scale.png" />
</div>
</dd></dl>

<dl class="method">
<dt id="Stoner.Analysis.AnalysisMixin.smooth">
<code class="sig-name descname">smooth</code><span class="sig-paren">(</span><em class="sig-param">window='boxcar'</em>, <em class="sig-param">xcol=None</em>, <em class="sig-param">ycol=None</em>, <em class="sig-param">size=None</em>, <em class="sig-param">**kargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Stoner/Analysis.html#AnalysisMixin.smooth"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Stoner.Analysis.AnalysisMixin.smooth" title="Permalink to this definition">¶</a></dt>
<dd><p>Smooth data by convoluting with a window.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>window</strong> (<em>string or tuple</em>) – Defines the window type to use by passing to <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.signal.get_window.html#scipy.signal.get_window" title="(in SciPy v1.3.1)"><code class="xref py py-func docutils literal notranslate"><span class="pre">scipy.signal.get_window()</span></code></a>.</p>
</dd>
<dt class="field-even">Keyword Arguments</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>xcol</strong> (<em>column index</em><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a>) – Data to use as x data if needed to define a window. If None, use <a class="reference internal" href="Stoner.Core.DataFile.html#Stoner.Core.DataFile.setas" title="Stoner.Core.DataFile.setas"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Stoner.Core.DataFile.setas</span></code></a></p></li>
<li><p><strong>ycvol</strong> (<em>column index</em><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a>) – Data to be smoothed</p></li>
<li><p><strong>size</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a>) – If int, then the number of points to use in the smoothing window. If float, then the size in x-data to be used.</p></li>
<li><p><strong>result</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a><em> or </em><em>column index</em>) – Whether to add the smoothed data to the dataset and if so where.</p></li>
<li><p><strong>replace</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Replace the exiting data or insert as a new column.</p></li>
<li><p><strong>header</strong> (<a class="reference external" href="https://docs.python.org/3/library/string.html#module-string" title="(in Python v3.8)"><em>string</em></a>) – New column header for the new data.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><em>(self or array)</em> –     If result is False, then the return value will be a copy of the smoothed data, otherwise the return value
is a copy of the AnalysisMixin object with the smoothed data added,</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>If size is float, then it is necessary to map the X-data to a number of rows and to ensure that the data is evenly spaced in x.
To do this, the number of rows in the window is found by dividing the span in x by the size and multiplying by the total
lenfth. Then the data is interpolated to a new set of evenly space X over the same range, smoothed and then interpoalted back
to the original x values.</p>
</dd></dl>

<dl class="method">
<dt id="Stoner.Analysis.AnalysisMixin.span">
<code class="sig-name descname">span</code><span class="sig-paren">(</span><em class="sig-param">column=None</em>, <em class="sig-param">bounds=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Stoner/Analysis.html#AnalysisMixin.span"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Stoner.Analysis.AnalysisMixin.span" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a tuple of the maximum and minumum values within the given column and bounds by calling into <a class="reference internal" href="#Stoner.Analysis.AnalysisMixin.max" title="Stoner.Analysis.AnalysisMixin.max"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AnalysisMixin.max()</span></code></a> and <a class="reference internal" href="#Stoner.Analysis.AnalysisMixin.min" title="Stoner.Analysis.AnalysisMixin.min"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AnalysisMixin.min()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>column</strong> (<em>index</em>) – Column to look for the maximum in</p>
</dd>
<dt class="field-even">Keyword Arguments</dt>
<dd class="field-even"><p><strong>bounds</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#callable" title="(in Python v3.8)"><em>callable</em></a>) – A callable function that takes a single argument list of
numbers representing one row, and returns True for all rows to search in.</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><em>(float,float)</em> –     A tuple of (min value, max value)</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If column is not defined (or is None) the <code class="xref py py-attr docutils literal notranslate"><span class="pre">DataFile.setas</span></code> column
assignments are used.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="Stoner.Analysis.AnalysisMixin.spline">
<code class="sig-name descname">spline</code><span class="sig-paren">(</span><em class="sig-param">xcol=None</em>, <em class="sig-param">ycol=None</em>, <em class="sig-param">sigma=None</em>, <em class="sig-param">**kargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Stoner/Analysis.html#AnalysisMixin.spline"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Stoner.Analysis.AnalysisMixin.spline" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a spline through x and y data and replace, add new data or return spline function.</p>
<dl class="field-list simple">
<dt class="field-odd">Keyword Arguments</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>xcol</strong> (<em>column index</em>) – Column with x data or if None, use setas attribute.</p></li>
<li><p><strong>ycol</strong> (<em>column index</em>) – Column with y data or if None, use the setas attribute</p></li>
<li><p><strong>sigma</strong> (<em>column index</em><em>, or </em><em>array of data</em>) – Column with weights, or if None use the 1/yerr column.</p></li>
<li><p><strong>replace</strong> (<em>Boolean</em><em> or </em><em>column index</em><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a>) – If True then the y-column data is repalced, if a column index then the
new data is added after the specified index, if False then the new y-data is returned and if None, then
spline object is returned.</p></li>
<li><p><strong>header</strong> (<a class="reference external" href="https://docs.python.org/3/library/string.html#module-string" title="(in Python v3.8)"><em>string</em></a>) – If <em>replace</em> is True or a column index then use this string as the new column header.</p></li>
<li><p><strong>order</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – The order of spline to use (1-5)</p></li>
<li><p><strong>smoothing</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a>) – The smoothing factor to use when fitting the spline. A value of zero will create an
interpolating spline.</p></li>
<li><p><strong>bbox</strong> (<em>tuple of length 2</em>) – Bounding box for the spline - defaults to range of x values</p></li>
<li><p><strong>ext</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – How to extrapolate, default is “extrapolate”, but can also be “raise”,”zeros” or “const”.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><em>(various)</em> –     Depending on the value of <em>replace</em>, returns a copy of the AnalysisMixin, a 1D numpy array of data or an
scipy.interpolate.UniverateSpline object.</p>
</dd>
</dl>
<p>This is really jsut a pass through to the scipy.interpolate.UnivariateSpline function. Also used in the extrapolate
function.</p>
</dd></dl>

<dl class="method">
<dt id="Stoner.Analysis.AnalysisMixin.std">
<code class="sig-name descname">std</code><span class="sig-paren">(</span><em class="sig-param">column=None</em>, <em class="sig-param">sigma=None</em>, <em class="sig-param">bounds=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Stoner/Analysis.html#AnalysisMixin.std"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Stoner.Analysis.AnalysisMixin.std" title="Permalink to this definition">¶</a></dt>
<dd><p>Find standard deviation value of a data column.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>column</strong> (<em>index</em>) – Column to look for the maximum in</p>
</dd>
<dt class="field-even">Keyword Arguments</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>sigma</strong> (<em>column index</em><em> or </em><a class="reference internal" href="../Stoner.html#module-Stoner.core.array" title="Stoner.core.array"><em>array</em></a>) – The uncertainity noted for each value in the mean</p></li>
<li><p><strong>bounds</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#callable" title="(in Python v3.8)"><em>callable</em></a>) – A callable function that takes a single argument list of
numbers representing one row, and returns True for all rows to search in.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><em>(float)</em> –     The standard deviation of the data.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If column is not defined (or is None) the <code class="xref py py-attr docutils literal notranslate"><span class="pre">DataFile.setas</span></code> column
assignments are used.</p>
</div>
<div class="admonition-todo admonition" id="id4">
<p class="admonition-title">Todo</p>
<p>Fix the row index when the bounds function is used - see note of <a class="reference internal" href="#Stoner.Analysis.AnalysisMixin.max" title="Stoner.Analysis.AnalysisMixin.max"><code class="xref py py-meth docutils literal notranslate"><span class="pre">AnalysisMixin.max()</span></code></a></p>
</div>
</dd></dl>

<dl class="method">
<dt id="Stoner.Analysis.AnalysisMixin.stitch">
<code class="sig-name descname">stitch</code><span class="sig-paren">(</span><em class="sig-param">other</em>, <em class="sig-param">xcol=None</em>, <em class="sig-param">ycol=None</em>, <em class="sig-param">overlap=None</em>, <em class="sig-param">min_overlap=0.0</em>, <em class="sig-param">mode='All'</em>, <em class="sig-param">func=None</em>, <em class="sig-param">p0=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Stoner/Analysis.html#AnalysisMixin.stitch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Stoner.Analysis.AnalysisMixin.stitch" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply a scaling to this data set to make it stich to another dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>other</strong> (<em>DataFile</em>) – Another data set that is used as the base to stitch this one on to</p></li>
<li><p><strong>xcol,ycol</strong> (<em>index or None</em>) – The x and y data columns. If left as None then the current setas attribute is used.</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>overlap</strong> (<em>tuple of</em><em> (</em><em>lower</em><em>,</em><em>higher</em><em>) or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a>) – The band of x values that are used in both data sets to match,
if left as None, thenthe common overlap of the x data is used.</p></li>
<li><p><strong>min_overlap</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.8)"><em>float</em></a>) – If you know that overlap must be bigger than a certain amount, the bounds between the two
data sets needs to be adjusted. In this case min_overlap shifts the boundary of the overlap on this DataFile.</p></li>
<li><p><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – Unless <em>func</em> is specified, controls which parameters are actually variable, defaults to all of them.</p></li>
<li><p><strong>func</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#callable" title="(in Python v3.8)"><em>callable</em></a>) – a stitching function that transforms <span class="math notranslate nohighlight">\((x,y)\rightarrow(x',y')\)</span>. Default is to use
functions defined by <em>mode</em></p></li>
<li><p><strong>p0</strong> (<em>iterable</em>) – if func is not None then p0 should be the starting values for the stitching function parameters</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(<a class="reference internal" href="Stoner.Data.html#Stoner.Data" title="Stoner.Data"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stoner.Data</span></code></a>) –     A copy of the current <a class="reference internal" href="#Stoner.Analysis.AnalysisMixin" title="Stoner.Analysis.AnalysisMixin"><code class="xref py py-class docutils literal notranslate"><span class="pre">AnalysisMixin</span></code></a> with the x and y data columns adjusted to stitch</p>
</dd>
</dl>
<p>To stitch the data together, the x and y data in the current data file is transforms so that
<span class="math notranslate nohighlight">\(x'=x+A\)</span> and <span class="math notranslate nohighlight">\(y'=By+C\)</span> where <span class="math notranslate nohighlight">\(A,B,C\)</span> are constants and <span class="math notranslate nohighlight">\((x',y')\)</span> are close matches to the
<span class="math notranslate nohighlight">\((x,y)\)</span> data in <em>other</em>. The algorithm assumes that the overlap region contains equal
numbers of <span class="math notranslate nohighlight">\((x,y)\)</span> points <em>mode</em> controls whether A,B, and C are fixed or adjustable</p>
<blockquote>
<div><ul class="simple">
<li><p>“All” - all three parameters adjustable</p></li>
<li><p>“Scale y, shift x” - C is fixed at 0.0</p></li>
<li><p>“Scale and shift y” A is fixed at 0.0</p></li>
<li><p>“Scale y” - only B is adjustable</p></li>
<li><p>“Shift y” - Only c is adjsutable</p></li>
<li><p>“Shift x” - Only A is adjustable</p></li>
<li><p>“Shift both” - B is fixed at 1.0</p></li>
</ul>
</div></blockquote>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>User Guide section <a class="reference internal" href="../UserGuide/analysisfile.html#stitch-guide"><span class="std std-ref">Stitching Datasets together</span></a></p>
</div>
</dd></dl>

<dl class="method">
<dt id="Stoner.Analysis.AnalysisMixin.subtract">
<code class="sig-name descname">subtract</code><span class="sig-paren">(</span><em class="sig-param">a</em>, <em class="sig-param">b</em>, <em class="sig-param">replace=False</em>, <em class="sig-param">header=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Stoner/Analysis.html#AnalysisMixin.subtract"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Stoner.Analysis.AnalysisMixin.subtract" title="Permalink to this definition">¶</a></dt>
<dd><p>Subtract one column, number or array (b) from another column (a).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>a</strong> (<em>index</em>) – First column to work with</p></li>
<li><p><strong>b</strong> (<em>index, float or 1D array</em>) – Second column to work with.</p></li>
</ul>
</dd>
<dt class="field-even">Keyword Arguments</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>header</strong> (<a class="reference external" href="https://docs.python.org/3/library/string.html#module-string" title="(in Python v3.8)"><em>string</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a>) – new column header  (defaults to a-b</p></li>
<li><p><strong>replace</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Replace the a column with the new data</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>(<a class="reference internal" href="Stoner.Data.html#Stoner.Data" title="Stoner.Data"><code class="xref py py-class docutils literal notranslate"><span class="pre">Stoner.Data</span></code></a>) –     The newly modified Data object.</p>
</dd>
</dl>
<p>If a and b are tuples of length two, then the firstelement is assumed to be the value and
the second element an uncertainty in the value. The uncertainties will then be propagated and an
additional column with the uncertainites will be added to the data.</p>
</dd></dl>

<dl class="method">
<dt id="Stoner.Analysis.AnalysisMixin.threshold">
<code class="sig-name descname">threshold</code><span class="sig-paren">(</span><em class="sig-param">threshold</em>, <em class="sig-param">**kargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Stoner/Analysis.html#AnalysisMixin.threshold"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Stoner.Analysis.AnalysisMixin.threshold" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds partial indices where the data in column passes the threshold, rising or falling.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>threshold</strong> (<em>float</em>) – Value to look for in column col</p>
</dd>
<dt class="field-even">Keyword Arguments</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>col</strong> (<a class="reference internal" href="Stoner.DataFolder.index.html#Stoner.DataFolder.index" title="Stoner.DataFolder.index"><em>index</em></a>) – Column index to look for data in</p></li>
<li><p><strong>rising</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – look for case where the data is increasing in value (defaukt True)</p></li>
<li><p><strong>falling</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – look for case where data is fallinh in value (default False)</p></li>
<li><p><strong>xcol</strong> (<a class="reference internal" href="Stoner.DataFolder.index.html#Stoner.DataFolder.index" title="Stoner.DataFolder.index"><em>index</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a>) – rather than returning a fractional row index, return the
interpolated value in column xcol. If xcol is False, then return a complete row
all_vals (bool): return all crossing points of the threshold or just the first. (default False)</p></li>
<li><p><strong>transpose</strong> (<em>bbool</em>) – Swap the x and y columns around - this is most useful when the column assignments
have been done via the setas attribute</p></li>
<li><p><strong>all_vals</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.8)"><em>bool</em></a>) – Return all values that match the criteria, or just the first in the file.</p></li>
</ul>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><em>(float)</em> –     Either a sing;le fractional row index, or an in terpolated x value</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you don’t sepcify a col value or set it to None, then the assigned columns via the
<code class="xref py py-attr docutils literal notranslate"><span class="pre">DataFile.setas</span></code> attribute will be used.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>There has been an API change. Versions prior to 0.1.9 placed the column before the threshold in the positional
argument list. In order to support the use of assigned columns, this has been swapped to the present order.</p>
</div>
</dd></dl>

</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/StonerLogo2.png" alt="Logo"/>
            </a></p>
  <h4>Previous topic</h4>
  <p class="topless"><a href="Stoner.Core.DataFile.html"
                        title="previous chapter">DataFile</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="Stoner.analysis.fitting.odr_Model.html"
                        title="next chapter">odr_Model</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/classes/Stoner.Analysis.AnalysisMixin.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<form class="search" action="../search.html" method="get">
  <input type="text" name="q"
   placeholder="type to search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  <div class="related bottom">
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="Stoner.Core.DataFile.html" title="Previous document">DataFile</a>
        </li>
        <li>
          <a href="Stoner.analysis.fitting.odr_Model.html" title="Next document">odr_Model</a>
          &rarr;
        </li>
    </ul>
  </nav>
  <nav id="breadcrumbs">
    <ul>
      <li><a href="../index.html">Stoner Package</a></li>
      <li>
        <a href="../Stoner.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">Stoner</span></code> Package</a>
      </li> 
    </ul>
  </nav>
  </div>
  <footer id="pagefooter">&copy; 2013-15, Gavin Burnell et al.Last updated on Oct 25, 2019.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a>
      2.2.0
        with the <a href="http://github.com/irskep/sphinx-better-theme">
          better</a> theme.

  </footer>

  
  </body>
</html>