
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Data &#8212; Stoner Pacakge API Documentation</title>
    <link rel="stylesheet" href="../_static/better.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="AnalysisMixin" href="Stoner.Analysis.AnalysisMixin.html" />
    <link rel="prev" title="DataFile" href="Stoner.Core.DataFile.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  </head>
  <body>
    <header id="pageheader"><h1><a href="../index.html ">
        Stoner Pacakge API Documentation
    </a></h1></header>
  <div class="related top">
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="Stoner.Core.DataFile.html" title="Previous document">DataFile</a>
        </li>
        <li>
          <a href="Stoner.Analysis.AnalysisMixin.html" title="Next document">AnalysisMixin</a>
          &rarr;
        </li>
    </ul>
  </nav>
  <nav id="breadcrumbs">
    <ul>
      <li><a href="../index.html">Stoner Package</a></li>
      <li>
        <a href="../Stoner.html">Stoner Package</a>
      </li> 
    </ul>
  </nav>
  </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="data">
<h1>Data<a class="headerlink" href="#data" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="Stoner.Core.Data">
<em class="property">class </em><code class="descclassname">Stoner.Core.</code><code class="descname">Data</code><span class="sig-paren">(</span><em>*args</em>, <em>**kargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Stoner/Core.html#Data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Stoner.Core.Data" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="Stoner.Analysis.AnalysisMixin.html#Stoner.Analysis.AnalysisMixin" title="Stoner.Analysis.AnalysisMixin"><code class="xref py py-class docutils literal"><span class="pre">Stoner.Analysis.AnalysisMixin</span></code></a>, <a class="reference internal" href="Stoner.plot.PlotMixin.html#Stoner.plot.PlotMixin" title="Stoner.plot.core.PlotMixin"><code class="docutils literal"><span class="pre">Stoner.plot.PlotMixin</span></code></a>, <a class="reference internal" href="Stoner.Core.DataFile.html#Stoner.Core.DataFile" title="Stoner.Core.DataFile"><code class="xref py py-class docutils literal"><span class="pre">Stoner.Core.DataFile</span></code></a></p>
<p>A merged class of <a class="reference internal" href="Stoner.Core.DataFile.html#Stoner.Core.DataFile" title="Stoner.Core.DataFile"><code class="xref py py-class docutils literal"><span class="pre">Stoner.Core.DataFile</span></code></a>, <a class="reference internal" href="Stoner.Analysis.AnalysisMixin.html#Stoner.Analysis.AnalysisMixin" title="Stoner.Analysis.AnalysisMixin"><code class="xref py py-class docutils literal"><span class="pre">Stoner.Analysis.AnalysisMixin</span></code></a> and <a class="reference internal" href="Stoner.plot.PlotMixin.html#Stoner.plot.PlotMixin" title="Stoner.plot.PlotMixin"><code class="xref py py-class docutils literal"><span class="pre">Stoner.plot.PlotMixin</span></code></a></p>
<p>Also has the <code class="xref py py-mod docutils literal"><span class="pre">Stoner.FielFormats</span></code> loaded redy for use.
This ‘kitchen-sink’ class is intended as a convenience for writing scripts that carry out both plotting and
analysis on data files.</p>
<p class="rubric">Attributes Summary</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.T" title="Stoner.Core.Data.T"><code class="xref py py-obj docutils literal"><span class="pre">T</span></code></a></td>
<td>Gets the current data transposed.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.ax" title="Stoner.Core.Data.ax"><code class="xref py py-obj docutils literal"><span class="pre">ax</span></code></a></td>
<td>Return the current axis number.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.axes" title="Stoner.Core.Data.axes"><code class="xref py py-obj docutils literal"><span class="pre">axes</span></code></a></td>
<td>Return  the current axes object.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.basename" title="Stoner.Core.Data.basename"><code class="xref py py-obj docutils literal"><span class="pre">basename</span></code></a></td>
<td>Returns the basename of the current filename.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.clone" title="Stoner.Core.Data.clone"><code class="xref py py-obj docutils literal"><span class="pre">clone</span></code></a></td>
<td>Gets a deep copy of the current DataFile.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.column_headers" title="Stoner.Core.Data.column_headers"><code class="xref py py-obj docutils literal"><span class="pre">column_headers</span></code></a></td>
<td>Pass through to the setas attribute.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.data" title="Stoner.Core.Data.data"><code class="xref py py-obj docutils literal"><span class="pre">data</span></code></a></td>
<td>Property Accessors for the main numerical data.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.dict_records" title="Stoner.Core.Data.dict_records"><code class="xref py py-obj docutils literal"><span class="pre">dict_records</span></code></a></td>
<td>Return the data as a dictionary of single columns with column headers for the keys.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.dims" title="Stoner.Core.Data.dims"><code class="xref py py-obj docutils literal"><span class="pre">dims</span></code></a></td>
<td>An alias for self.data.axes</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.dtype" title="Stoner.Core.Data.dtype"><code class="xref py py-obj docutils literal"><span class="pre">dtype</span></code></a></td>
<td>Return the _np_ dtype attribute of the data</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.fig" title="Stoner.Core.Data.fig"><code class="xref py py-obj docutils literal"><span class="pre">fig</span></code></a></td>
<td>Get the current figure.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.fignum" title="Stoner.Core.Data.fignum"><code class="xref py py-obj docutils literal"><span class="pre">fignum</span></code></a></td>
<td>Return the current figure number.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.filename" title="Stoner.Core.Data.filename"><code class="xref py py-obj docutils literal"><span class="pre">filename</span></code></a></td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.labels" title="Stoner.Core.Data.labels"><code class="xref py py-obj docutils literal"><span class="pre">labels</span></code></a></td>
<td>Return the labels for the plot columns</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.legend" title="Stoner.Core.Data.legend"><code class="xref py py-obj docutils literal"><span class="pre">legend</span></code></a></td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.mask" title="Stoner.Core.Data.mask"><code class="xref py py-obj docutils literal"><span class="pre">mask</span></code></a></td>
<td>Returns the mask of the data array.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.metadata" title="Stoner.Core.Data.metadata"><code class="xref py py-obj docutils literal"><span class="pre">metadata</span></code></a></td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.mime_type" title="Stoner.Core.Data.mime_type"><code class="xref py py-obj docutils literal"><span class="pre">mime_type</span></code></a></td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.multiple" title="Stoner.Core.Data.multiple"><code class="xref py py-obj docutils literal"><span class="pre">multiple</span></code></a></td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.no_fmt" title="Stoner.Core.Data.no_fmt"><code class="xref py py-obj docutils literal"><span class="pre">no_fmt</span></code></a></td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.patterns" title="Stoner.Core.Data.patterns"><code class="xref py py-obj docutils literal"><span class="pre">patterns</span></code></a></td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.positional_fmt" title="Stoner.Core.Data.positional_fmt"><code class="xref py py-obj docutils literal"><span class="pre">positional_fmt</span></code></a></td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.priority" title="Stoner.Core.Data.priority"><code class="xref py py-obj docutils literal"><span class="pre">priority</span></code></a></td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.records" title="Stoner.Core.Data.records"><code class="xref py py-obj docutils literal"><span class="pre">records</span></code></a></td>
<td>Returns the data as a _np_ structured data array.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.setas" title="Stoner.Core.Data.setas"><code class="xref py py-obj docutils literal"><span class="pre">setas</span></code></a></td>
<td>Get the list of column assignments.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.shape" title="Stoner.Core.Data.shape"><code class="xref py py-obj docutils literal"><span class="pre">shape</span></code></a></td>
<td>Pass through the numpy shape attribute of the data.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.showfig" title="Stoner.Core.Data.showfig"><code class="xref py py-obj docutils literal"><span class="pre">showfig</span></code></a></td>
<td>Returns either the current figure or self or None, depeding on whether the attribute is True or False or None.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.subclasses" title="Stoner.Core.Data.subclasses"><code class="xref py py-obj docutils literal"><span class="pre">subclasses</span></code></a></td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.subplots" title="Stoner.Core.Data.subplots"><code class="xref py py-obj docutils literal"><span class="pre">subplots</span></code></a></td>
<td>Return the subplot instances.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.template" title="Stoner.Core.Data.template"><code class="xref py py-obj docutils literal"><span class="pre">template</span></code></a></td>
<td>Return the current plot template.</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods Summary</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.SG_Filter" title="Stoner.Core.Data.SG_Filter"><code class="xref py py-obj docutils literal"><span class="pre">SG_Filter</span></code></a>([col,&nbsp;points,&nbsp;poly,&nbsp;order,&nbsp;…])</td>
<td>Implements Savitsky-Golay filtering of data for smoothing and differentiating data.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.__call__" title="Stoner.Core.Data.__call__"><code class="xref py py-obj docutils literal"><span class="pre">__call__</span></code></a>(*args,&nbsp;**kargs)</td>
<td>Clone the DataFile, but allowing additional arguments to modify the new clone.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.add" title="Stoner.Core.Data.add"><code class="xref py py-obj docutils literal"><span class="pre">add</span></code></a>(a,&nbsp;b[,&nbsp;replace,&nbsp;header])</td>
<td>Add one column, number or array (b) to another column (a).</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.add_column" title="Stoner.Core.Data.add_column"><code class="xref py py-obj docutils literal"><span class="pre">add_column</span></code></a>(column_data[,&nbsp;header,&nbsp;index])</td>
<td>Appends a column of data or inserts a column to a datafile instance.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.annotate_fit" title="Stoner.Core.Data.annotate_fit"><code class="xref py py-obj docutils literal"><span class="pre">annotate_fit</span></code></a>(model[,&nbsp;x,&nbsp;y,&nbsp;z,&nbsp;text_only])</td>
<td>Annotate a plot with some information about a fit.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.apply" title="Stoner.Core.Data.apply"><code class="xref py py-obj docutils literal"><span class="pre">apply</span></code></a>(func[,&nbsp;col,&nbsp;replace,&nbsp;header])</td>
<td>Applies the given function to each row in the data set and adds to the data set.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.bin" title="Stoner.Core.Data.bin"><code class="xref py py-obj docutils literal"><span class="pre">bin</span></code></a>([xcol,&nbsp;ycol,&nbsp;bins,&nbsp;mode,&nbsp;clone])</td>
<td>Bin x-y data into new values of x with an error bar.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.clear" title="Stoner.Core.Data.clear"><code class="xref py py-obj docutils literal"><span class="pre">clear</span></code></a>(()&nbsp;-&gt;&nbsp;None.&nbsp;&nbsp;Remove&nbsp;all&nbsp;items&nbsp;from&nbsp;D.)</td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.clip" title="Stoner.Core.Data.clip"><code class="xref py py-obj docutils literal"><span class="pre">clip</span></code></a>(clipper[,&nbsp;column])</td>
<td>Clips the data based on the column and the clipper value.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.closest" title="Stoner.Core.Data.closest"><code class="xref py py-obj docutils literal"><span class="pre">closest</span></code></a>(value[,&nbsp;xcol])</td>
<td>Return the row in a data file which has an x-column value closest to the given value.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.colormap_xyz" title="Stoner.Core.Data.colormap_xyz"><code class="xref py py-obj docutils literal"><span class="pre">colormap_xyz</span></code></a>([xcol,&nbsp;ycol,&nbsp;zcol])</td>
<td>An xyz plot that forces the use of plt.contour.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.column" title="Stoner.Core.Data.column"><code class="xref py py-obj docutils literal"><span class="pre">column</span></code></a>(col)</td>
<td>Extracts one or more columns of data from the datafile by name, partial name, regular expression or numeric index.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.columns" title="Stoner.Core.Data.columns"><code class="xref py py-obj docutils literal"><span class="pre">columns</span></code></a>([not_masked])</td>
<td>Generator method that will iterate over the columns of data int he datafile.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.contour_xyz" title="Stoner.Core.Data.contour_xyz"><code class="xref py py-obj docutils literal"><span class="pre">contour_xyz</span></code></a>([xcol,&nbsp;ycol,&nbsp;zcol,&nbsp;shape,&nbsp;xlim,&nbsp;…])</td>
<td>An xyz plot that forces the use of plt.contour.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.count" title="Stoner.Core.Data.count"><code class="xref py py-obj docutils literal"><span class="pre">count</span></code></a>([axis])</td>
<td>Count the number of un-masked elements in the <a class="reference internal" href="Stoner.Core.DataFile.html#Stoner.Core.DataFile" title="Stoner.Core.DataFile"><code class="xref py py-class docutils literal"><span class="pre">DataFile</span></code></a>.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.curve_fit" title="Stoner.Core.Data.curve_fit"><code class="xref py py-obj docutils literal"><span class="pre">curve_fit</span></code></a>(func[,&nbsp;xcol,&nbsp;ycol,&nbsp;p0,&nbsp;sigma])</td>
<td>General curve fitting function passed through from scipy.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.decompose" title="Stoner.Core.Data.decompose"><code class="xref py py-obj docutils literal"><span class="pre">decompose</span></code></a>([xcol,&nbsp;ycol,&nbsp;sym,&nbsp;asym,&nbsp;replace])</td>
<td>Given (x,y) data, decomposes the y part into symmetric and antisymmetric contributions in x.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.del_column" title="Stoner.Core.Data.del_column"><code class="xref py py-obj docutils literal"><span class="pre">del_column</span></code></a>([col,&nbsp;duplicates])</td>
<td>Deletes a column from the current <a class="reference internal" href="Stoner.Core.DataFile.html#Stoner.Core.DataFile" title="Stoner.Core.DataFile"><code class="xref py py-class docutils literal"><span class="pre">DataFile</span></code></a> object.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.del_rows" title="Stoner.Core.Data.del_rows"><code class="xref py py-obj docutils literal"><span class="pre">del_rows</span></code></a>([col,&nbsp;val,&nbsp;invert])</td>
<td>Searchs in the numerica data for the lines that match and deletes the corresponding rows.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.diffsum" title="Stoner.Core.Data.diffsum"><code class="xref py py-obj docutils literal"><span class="pre">diffsum</span></code></a>(a,&nbsp;b[,&nbsp;replace,&nbsp;header])</td>
<td>Calculate <span class="math">\(\frac{a-b}{a+b}\)</span> for the two columns <em>a</em> and <em>b</em>.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.dir" title="Stoner.Core.Data.dir"><code class="xref py py-obj docutils literal"><span class="pre">dir</span></code></a>([pattern])</td>
<td>Return a list of keys in the metadata, filtering wiht a regular expression if necessary.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.divide" title="Stoner.Core.Data.divide"><code class="xref py py-obj docutils literal"><span class="pre">divide</span></code></a>(a,&nbsp;b[,&nbsp;replace,&nbsp;header])</td>
<td>Divide one column (a) by  another column, number or array (b).</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.extrapolate" title="Stoner.Core.Data.extrapolate"><code class="xref py py-obj docutils literal"><span class="pre">extrapolate</span></code></a>(new_x[,&nbsp;xcol,&nbsp;ycol,&nbsp;yerr,&nbsp;…])</td>
<td>Extrapolate data based on local fit to x,y data.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.figure" title="Stoner.Core.Data.figure"><code class="xref py py-obj docutils literal"><span class="pre">figure</span></code></a>([figure,&nbsp;projection])</td>
<td>Set the figure used by <a class="reference internal" href="Stoner.plot.PlotMixin.html#Stoner.plot.PlotMixin" title="Stoner.plot.PlotMixin"><code class="xref py py-class docutils literal"><span class="pre">Stoner.plot.PlotMixin</span></code></a>.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.filter" title="Stoner.Core.Data.filter"><code class="xref py py-obj docutils literal"><span class="pre">filter</span></code></a>([func,&nbsp;cols,&nbsp;reset])</td>
<td>Sets the mask on rows of data by evaluating a function for each row.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.find_col" title="Stoner.Core.Data.find_col"><code class="xref py py-obj docutils literal"><span class="pre">find_col</span></code></a>(col[,&nbsp;force_list])</td>
<td>Indexes the column headers in order to locate a column of data.shape.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.format" title="Stoner.Core.Data.format"><code class="xref py py-obj docutils literal"><span class="pre">format</span></code></a>(key,&nbsp;**kargs)</td>
<td>Return the contents of key pretty formatted using <code class="xref py py-func docutils literal"><span class="pre">format_error()</span></code>.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.get" title="Stoner.Core.Data.get"><code class="xref py py-obj docutils literal"><span class="pre">get</span></code></a>(item[,&nbsp;default])</td>
<td>A wrapper around __get_item__ that handles missing keys by returning None.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.get_filename" title="Stoner.Core.Data.get_filename"><code class="xref py py-obj docutils literal"><span class="pre">get_filename</span></code></a>(mode)</td>
<td>Forces the user to choose a new filename using a system dialog box.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.griddata" title="Stoner.Core.Data.griddata"><code class="xref py py-obj docutils literal"><span class="pre">griddata</span></code></a>([xcol,&nbsp;ycol,&nbsp;zcol,&nbsp;shape,&nbsp;xlim,&nbsp;…])</td>
<td>Function to convert xyz data onto a regular grid.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.image_plot" title="Stoner.Core.Data.image_plot"><code class="xref py py-obj docutils literal"><span class="pre">image_plot</span></code></a>([xcol,&nbsp;ycol,&nbsp;zcol,&nbsp;shape,&nbsp;xlim,&nbsp;ylim])</td>
<td>Grid up the three columns of data and plot.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.insert_rows" title="Stoner.Core.Data.insert_rows"><code class="xref py py-obj docutils literal"><span class="pre">insert_rows</span></code></a>(row,&nbsp;new_data)</td>
<td>Insert new_data into the data array at position row.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.inset" title="Stoner.Core.Data.inset"><code class="xref py py-obj docutils literal"><span class="pre">inset</span></code></a>([parent,&nbsp;loc,&nbsp;width,&nbsp;height])</td>
<td>Add a new set of axes as an inset to the current plot.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.integrate" title="Stoner.Core.Data.integrate"><code class="xref py py-obj docutils literal"><span class="pre">integrate</span></code></a>([xcol,&nbsp;ycol,&nbsp;result,&nbsp;result_name,&nbsp;…])</td>
<td>Inegrate a column of data, optionally returning the cumulative integral.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.interpolate" title="Stoner.Core.Data.interpolate"><code class="xref py py-obj docutils literal"><span class="pre">interpolate</span></code></a>(newX[,&nbsp;kind,&nbsp;xcol,&nbsp;replace])</td>
<td>Interpolate a dataset to get a new set of values for a given set of x data.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.items" title="Stoner.Core.Data.items"><code class="xref py py-obj docutils literal"><span class="pre">items</span></code></a>(…)</td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.keys" title="Stoner.Core.Data.keys"><code class="xref py py-obj docutils literal"><span class="pre">keys</span></code></a>()</td>
<td>An alias for <code class="xref py py-meth docutils literal"><span class="pre">DataFile.dir(None)()</span></code> .</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.lmfit" title="Stoner.Core.Data.lmfit"><code class="xref py py-obj docutils literal"><span class="pre">lmfit</span></code></a>(model[,&nbsp;xcol,&nbsp;ycol,&nbsp;p0,&nbsp;sigma])</td>
<td>Wrapper around lmfit module fitting.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.load" title="Stoner.Core.Data.load"><code class="xref py py-obj docutils literal"><span class="pre">load</span></code></a>([filename,&nbsp;auto_load,&nbsp;filetype])</td>
<td>Loads the <a class="reference internal" href="Stoner.Core.DataFile.html#Stoner.Core.DataFile" title="Stoner.Core.DataFile"><code class="xref py py-class docutils literal"><span class="pre">DataFile</span></code></a> in from disc guessing a better subclass if necessary.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.make_bins" title="Stoner.Core.Data.make_bins"><code class="xref py py-obj docutils literal"><span class="pre">make_bins</span></code></a>(xcol,&nbsp;bins[,&nbsp;mode])</td>
<td>Utility method to generate bin boundaries and centres along an axis.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.max" title="Stoner.Core.Data.max"><code class="xref py py-obj docutils literal"><span class="pre">max</span></code></a>([column,&nbsp;bounds])</td>
<td>FInd maximum value and index in a column of data.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.mean" title="Stoner.Core.Data.mean"><code class="xref py py-obj docutils literal"><span class="pre">mean</span></code></a>([column,&nbsp;sigma,&nbsp;bounds])</td>
<td>FInd mean value of a data column.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.min" title="Stoner.Core.Data.min"><code class="xref py py-obj docutils literal"><span class="pre">min</span></code></a>([column,&nbsp;bounds])</td>
<td>FInd minimum value and index in a column of data.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.multiply" title="Stoner.Core.Data.multiply"><code class="xref py py-obj docutils literal"><span class="pre">multiply</span></code></a>(a,&nbsp;b[,&nbsp;replace,&nbsp;header])</td>
<td>Multiply one column (a) by  another column, number or array (b).</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.normalise" title="Stoner.Core.Data.normalise"><code class="xref py py-obj docutils literal"><span class="pre">normalise</span></code></a>([target,&nbsp;base,&nbsp;replace,&nbsp;header])</td>
<td>Normalise data columns by dividing through by a base column value.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.odr" title="Stoner.Core.Data.odr"><code class="xref py py-obj docutils literal"><span class="pre">odr</span></code></a>(model[,&nbsp;xcol,&nbsp;ycol,&nbsp;sigma_x,&nbsp;sigma_y])</td>
<td>Wrapper around scipy.odr orthogonal distance regression fitting.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.outlier_detection" title="Stoner.Core.Data.outlier_detection"><code class="xref py py-obj docutils literal"><span class="pre">outlier_detection</span></code></a>([column,&nbsp;window,&nbsp;…])</td>
<td>Function to detect outliers in a column of data.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.peaks" title="Stoner.Core.Data.peaks"><code class="xref py py-obj docutils literal"><span class="pre">peaks</span></code></a>([ycol,&nbsp;width,&nbsp;significance,&nbsp;xcol,&nbsp;…])</td>
<td>Locates peaks and/or troughs in a column of data by using SG-differentiation.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.plot" title="Stoner.Core.Data.plot"><code class="xref py py-obj docutils literal"><span class="pre">plot</span></code></a>(*args,&nbsp;**kargs)</td>
<td>Try to make an appropriate plot based on the defined column assignments.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.plot_matrix" title="Stoner.Core.Data.plot_matrix"><code class="xref py py-obj docutils literal"><span class="pre">plot_matrix</span></code></a>([xvals,&nbsp;yvals,&nbsp;rectang,&nbsp;cmap,&nbsp;…])</td>
<td>Plots a surface plot by assuming that the current dataset represents a regular matrix of points.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.plot_xy" title="Stoner.Core.Data.plot_xy"><code class="xref py py-obj docutils literal"><span class="pre">plot_xy</span></code></a>([xcol,&nbsp;ycol,&nbsp;fmt,&nbsp;xerr,&nbsp;yerr])</td>
<td>Makes a simple X-Y plot of the specified data.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.plot_xyuv" title="Stoner.Core.Data.plot_xyuv"><code class="xref py py-obj docutils literal"><span class="pre">plot_xyuv</span></code></a>([xcol,&nbsp;ycol,&nbsp;ucol,&nbsp;vcol,&nbsp;wcol])</td>
<td>Makes an overlaid image and quiver plot.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.plot_xyz" title="Stoner.Core.Data.plot_xyz"><code class="xref py py-obj docutils literal"><span class="pre">plot_xyz</span></code></a>([xcol,&nbsp;ycol,&nbsp;zcol,&nbsp;shape,&nbsp;xlim,&nbsp;…])</td>
<td>Plots a surface plot based on rows of X,Y,Z data using matplotlib.pcolor().</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.plot_xyzuvw" title="Stoner.Core.Data.plot_xyzuvw"><code class="xref py py-obj docutils literal"><span class="pre">plot_xyzuvw</span></code></a>([xcol,&nbsp;ycol,&nbsp;zcol,&nbsp;ucol,&nbsp;vcol,&nbsp;wcol])</td>
<td>Plots a vector field plot based on rows of X,Y,Z (U,V,W) data using ,ayavi.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.polyfit" title="Stoner.Core.Data.polyfit"><code class="xref py py-obj docutils literal"><span class="pre">polyfit</span></code></a>([xcol,&nbsp;ycol,&nbsp;polynomial_order,&nbsp;…])</td>
<td>Pass through to numpy.polyfit.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.pop" title="Stoner.Core.Data.pop"><code class="xref py py-obj docutils literal"><span class="pre">pop</span></code></a>((k[,d])&nbsp;-&gt;&nbsp;v,&nbsp;…)</td>
<td>If key is not found, d is returned if given, otherwise KeyError is raised.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.popitem" title="Stoner.Core.Data.popitem"><code class="xref py py-obj docutils literal"><span class="pre">popitem</span></code></a>(()&nbsp;-&gt;&nbsp;(k,&nbsp;v),&nbsp;…)</td>
<td>as a 2-tuple; but raise KeyError if D is empty.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.quiver_plot" title="Stoner.Core.Data.quiver_plot"><code class="xref py py-obj docutils literal"><span class="pre">quiver_plot</span></code></a>([xcol,&nbsp;ycol,&nbsp;ucol,&nbsp;vcol])</td>
<td>Make a 2D Quiver plot from the data.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.rename" title="Stoner.Core.Data.rename"><code class="xref py py-obj docutils literal"><span class="pre">rename</span></code></a>(old_col,&nbsp;new_col)</td>
<td>Renames columns without changing the underlying data.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.reorder_columns" title="Stoner.Core.Data.reorder_columns"><code class="xref py py-obj docutils literal"><span class="pre">reorder_columns</span></code></a>(cols[,&nbsp;headers_too,&nbsp;setas_too])</td>
<td>Construct a new data array from the original data by assembling the columns in the order given.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.rolling_window" title="Stoner.Core.Data.rolling_window"><code class="xref py py-obj docutils literal"><span class="pre">rolling_window</span></code></a>([window,&nbsp;wrap,&nbsp;exclude_centre])</td>
<td>Iterator that return a rolling window section of the data.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.rows" title="Stoner.Core.Data.rows"><code class="xref py py-obj docutils literal"><span class="pre">rows</span></code></a>([not_masked])</td>
<td>Generator method that will iterate over rows of data</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.save" title="Stoner.Core.Data.save"><code class="xref py py-obj docutils literal"><span class="pre">save</span></code></a>([filename])</td>
<td>Saves a string representation of the current DataFile object into the file ‘filename’.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.scale" title="Stoner.Core.Data.scale"><code class="xref py py-obj docutils literal"><span class="pre">scale</span></code></a>(other[,&nbsp;xcol,&nbsp;ycol])</td>
<td>Scale the x and y data in this DataFile to match the x and y data in another DataFile.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.search" title="Stoner.Core.Data.search"><code class="xref py py-obj docutils literal"><span class="pre">search</span></code></a>(xcol,&nbsp;value[,&nbsp;columns,&nbsp;accuracy])</td>
<td>Searches in the numerica data part of the file for lines that match and returns  the corresponding rows.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.section" title="Stoner.Core.Data.section"><code class="xref py py-obj docutils literal"><span class="pre">section</span></code></a>(**kargs)</td>
<td>Assuming data has x,y or x,y,z co-ordinates, return data from a section of the parameter space.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.select" title="Stoner.Core.Data.select"><code class="xref py py-obj docutils literal"><span class="pre">select</span></code></a>(*args,&nbsp;**kargs)</td>
<td>Produce a copy of the DataFile with only data rows that match a criteria.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.setdefault" title="Stoner.Core.Data.setdefault"><code class="xref py py-obj docutils literal"><span class="pre">setdefault</span></code></a>((k[,d])&nbsp;-&gt;&nbsp;D.get(k,d),&nbsp;…)</td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.smooth" title="Stoner.Core.Data.smooth"><code class="xref py py-obj docutils literal"><span class="pre">smooth</span></code></a>([window,&nbsp;xcol,&nbsp;ycol,&nbsp;size])</td>
<td>Smooth data by convoluting with a window.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.sort" title="Stoner.Core.Data.sort"><code class="xref py py-obj docutils literal"><span class="pre">sort</span></code></a>(*order,&nbsp;**kargs)</td>
<td>Sorts the data by column name.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.span" title="Stoner.Core.Data.span"><code class="xref py py-obj docutils literal"><span class="pre">span</span></code></a>([column,&nbsp;bounds])</td>
<td>Returns a tuple of the maximum and minumum values within the given column and bounds by calling into <code class="xref py py-meth docutils literal"><span class="pre">AnalysisMixin.max()</span></code> and <code class="xref py py-meth docutils literal"><span class="pre">AnalysisMixin.min()</span></code>.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.spline" title="Stoner.Core.Data.spline"><code class="xref py py-obj docutils literal"><span class="pre">spline</span></code></a>([xcol,&nbsp;ycol,&nbsp;sigma])</td>
<td>Construct a spline through x and y data and replace, add new data or return spline function.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.split" title="Stoner.Core.Data.split"><code class="xref py py-obj docutils literal"><span class="pre">split</span></code></a>(*args)</td>
<td>Recursively splits the current <a class="reference internal" href="Stoner.Core.DataFile.html#Stoner.Core.DataFile" title="Stoner.Core.DataFile"><code class="xref py py-class docutils literal"><span class="pre">DataFile</span></code></a> object into a <code class="xref py py-class docutils literal"><span class="pre">Stoner.Forlders.DataFolder</span></code> objects where each one contains the rows from the original object which had the same value of a given column(s) or function.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.stitch" title="Stoner.Core.Data.stitch"><code class="xref py py-obj docutils literal"><span class="pre">stitch</span></code></a>(other[,&nbsp;xcol,&nbsp;ycol,&nbsp;overlap,&nbsp;…])</td>
<td>Apply a scaling to this data set to make it stich to another dataset.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.subplot" title="Stoner.Core.Data.subplot"><code class="xref py py-obj docutils literal"><span class="pre">subplot</span></code></a>(*args,&nbsp;**kargs)</td>
<td>Pass throuygh for plt.subplot().</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.subtract" title="Stoner.Core.Data.subtract"><code class="xref py py-obj docutils literal"><span class="pre">subtract</span></code></a>(a,&nbsp;b[,&nbsp;replace,&nbsp;header])</td>
<td>Subtract one column, number or array (b) from another column (a).</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.swap_column" title="Stoner.Core.Data.swap_column"><code class="xref py py-obj docutils literal"><span class="pre">swap_column</span></code></a>(*swp,&nbsp;**kargs)</td>
<td>Swaps pairs of columns in the data.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.threshold" title="Stoner.Core.Data.threshold"><code class="xref py py-obj docutils literal"><span class="pre">threshold</span></code></a>(threshold,&nbsp;**kargs)</td>
<td>Finds partial indices where the data in column passes the threshold, rising or falling.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.unique" title="Stoner.Core.Data.unique"><code class="xref py py-obj docutils literal"><span class="pre">unique</span></code></a>(col[,&nbsp;return_index,&nbsp;return_inverse])</td>
<td>Return the unique values from the specified column - pass through for numpy.unique.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.update" title="Stoner.Core.Data.update"><code class="xref py py-obj docutils literal"><span class="pre">update</span></code></a>(([E,&nbsp;…)</td>
<td>If E present and has a .keys() method, does:     for k in E: D[k] = E[k]</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.values" title="Stoner.Core.Data.values"><code class="xref py py-obj docutils literal"><span class="pre">values</span></code></a>(…)</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#Stoner.Core.Data.x2" title="Stoner.Core.Data.x2"><code class="xref py py-obj docutils literal"><span class="pre">x2</span></code></a>()</td>
<td>Generate a new set of axes with a second x-scale.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#Stoner.Core.Data.y2" title="Stoner.Core.Data.y2"><code class="xref py py-obj docutils literal"><span class="pre">y2</span></code></a>()</td>
<td>Generate a new set of axes with a second y-scale.</td>
</tr>
</tbody>
</table>
<p class="rubric">Attributes Documentation</p>
<dl class="attribute">
<dt id="Stoner.Core.Data.T">
<code class="descname">T</code><a class="headerlink" href="#Stoner.Core.Data.T" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the current data transposed.</p>
</dd></dl>

<dl class="attribute">
<dt id="Stoner.Core.Data.ax">
<code class="descname">ax</code><a class="headerlink" href="#Stoner.Core.Data.ax" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the current axis number.</p>
</dd></dl>

<dl class="attribute">
<dt id="Stoner.Core.Data.axes">
<code class="descname">axes</code><a class="headerlink" href="#Stoner.Core.Data.axes" title="Permalink to this definition">¶</a></dt>
<dd><p>Return  the current axes object.</p>
</dd></dl>

<dl class="attribute">
<dt id="Stoner.Core.Data.basename">
<code class="descname">basename</code><a class="headerlink" href="#Stoner.Core.Data.basename" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the basename of the current filename.</p>
</dd></dl>

<dl class="attribute">
<dt id="Stoner.Core.Data.clone">
<code class="descname">clone</code><a class="headerlink" href="#Stoner.Core.Data.clone" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets a deep copy of the current DataFile.</p>
</dd></dl>

<dl class="attribute">
<dt id="Stoner.Core.Data.column_headers">
<code class="descname">column_headers</code><a class="headerlink" href="#Stoner.Core.Data.column_headers" title="Permalink to this definition">¶</a></dt>
<dd><p>Pass through to the setas attribute.</p>
</dd></dl>

<dl class="attribute">
<dt id="Stoner.Core.Data.data">
<code class="descname">data</code><a class="headerlink" href="#Stoner.Core.Data.data" title="Permalink to this definition">¶</a></dt>
<dd><p>Property Accessors for the main numerical data.</p>
</dd></dl>

<dl class="attribute">
<dt id="Stoner.Core.Data.dict_records">
<code class="descname">dict_records</code><a class="headerlink" href="#Stoner.Core.Data.dict_records" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the data as a dictionary of single columns with column headers for the keys.</p>
</dd></dl>

<dl class="attribute">
<dt id="Stoner.Core.Data.dims">
<code class="descname">dims</code><a class="headerlink" href="#Stoner.Core.Data.dims" title="Permalink to this definition">¶</a></dt>
<dd><p>An alias for self.data.axes</p>
</dd></dl>

<dl class="attribute">
<dt id="Stoner.Core.Data.dtype">
<code class="descname">dtype</code><a class="headerlink" href="#Stoner.Core.Data.dtype" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the _np_ dtype attribute of the data</p>
</dd></dl>

<dl class="attribute">
<dt id="Stoner.Core.Data.fig">
<code class="descname">fig</code><a class="headerlink" href="#Stoner.Core.Data.fig" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the current figure.</p>
</dd></dl>

<dl class="attribute">
<dt id="Stoner.Core.Data.fignum">
<code class="descname">fignum</code><a class="headerlink" href="#Stoner.Core.Data.fignum" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the current figure number.</p>
</dd></dl>

<dl class="attribute">
<dt id="Stoner.Core.Data.filename">
<code class="descname">filename</code><a class="headerlink" href="#Stoner.Core.Data.filename" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="Stoner.Core.Data.labels">
<code class="descname">labels</code><a class="headerlink" href="#Stoner.Core.Data.labels" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the labels for the plot columns</p>
</dd></dl>

<dl class="attribute">
<dt id="Stoner.Core.Data.legend">
<code class="descname">legend</code><em class="property"> = True</em><a class="headerlink" href="#Stoner.Core.Data.legend" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="Stoner.Core.Data.mask">
<code class="descname">mask</code><a class="headerlink" href="#Stoner.Core.Data.mask" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the mask of the data array.</p>
</dd></dl>

<dl class="attribute">
<dt id="Stoner.Core.Data.metadata">
<code class="descname">metadata</code><a class="headerlink" href="#Stoner.Core.Data.metadata" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="Stoner.Core.Data.mime_type">
<code class="descname">mime_type</code><em class="property"> = ['text/plain']</em><a class="headerlink" href="#Stoner.Core.Data.mime_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="Stoner.Core.Data.multiple">
<code class="descname">multiple</code><em class="property"> = 'common'</em><a class="headerlink" href="#Stoner.Core.Data.multiple" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="Stoner.Core.Data.no_fmt">
<code class="descname">no_fmt</code><em class="property"> = [&lt;function errorfill&gt;]</em><a class="headerlink" href="#Stoner.Core.Data.no_fmt" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="Stoner.Core.Data.patterns">
<code class="descname">patterns</code><em class="property"> = ['*.txt', '*.tdi', '*.dat', '*.png', '*.340', '*.ovf', '*.ras', '*.spc', '*.tdms', '*.fld', '*.dql', '*.iv', '*.rvt', '*.csv', '*.hdf', '*.hf5', '*.zip']</em><a class="headerlink" href="#Stoner.Core.Data.patterns" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="Stoner.Core.Data.positional_fmt">
<code class="descname">positional_fmt</code><em class="property"> = [&lt;function plot&gt;, &lt;function semilogx&gt;, &lt;function semilogy&gt;, &lt;function loglog&gt;]</em><a class="headerlink" href="#Stoner.Core.Data.positional_fmt" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="Stoner.Core.Data.priority">
<code class="descname">priority</code><em class="property"> = 32</em><a class="headerlink" href="#Stoner.Core.Data.priority" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="Stoner.Core.Data.records">
<code class="descname">records</code><a class="headerlink" href="#Stoner.Core.Data.records" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the data as a _np_ structured data array. If columns names are duplicated then they
are made unique.</p>
</dd></dl>

<dl class="attribute">
<dt id="Stoner.Core.Data.setas">
<code class="descname">setas</code><a class="headerlink" href="#Stoner.Core.Data.setas" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the list of column assignments.</p>
</dd></dl>

<dl class="attribute">
<dt id="Stoner.Core.Data.shape">
<code class="descname">shape</code><a class="headerlink" href="#Stoner.Core.Data.shape" title="Permalink to this definition">¶</a></dt>
<dd><p>Pass through the numpy shape attribute of the data.</p>
</dd></dl>

<dl class="attribute">
<dt id="Stoner.Core.Data.showfig">
<code class="descname">showfig</code><a class="headerlink" href="#Stoner.Core.Data.showfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns either the current figure or self or None, depeding on whether the attribute is True or False or None.</p>
</dd></dl>

<dl class="attribute">
<dt id="Stoner.Core.Data.subclasses">
<code class="descname">subclasses</code><em class="property"> = OrderedDict([('DataFile', &lt;class 'Stoner.Core.DataFile'&gt;), ('QDFile', &lt;class 'Stoner.FileFormats.QDFile'&gt;), ('FmokeFile', &lt;class 'Stoner.FileFormats.FmokeFile'&gt;), ('HDF5File', &lt;class 'Stoner.HDF5.HDF5File'&gt;), ('HGXFile', &lt;class 'Stoner.HDF5.HGXFile'&gt;), ('KermitPNGFile', &lt;class 'Stoner.FileFormats.KermitPNGFile'&gt;), ('LSTemperatureFile', &lt;class 'Stoner.FileFormats.LSTemperatureFile'&gt;), ('MDAASCIIFile', &lt;class 'Stoner.FileFormats.MDAASCIIFile'&gt;), ('OVFFile', &lt;class 'Stoner.FileFormats.OVFFile'&gt;), ('OpenGDAFile', &lt;class 'Stoner.FileFormats.OpenGDAFile'&gt;), ('RasorFile', &lt;class 'Stoner.FileFormats.RasorFile'&gt;), ('RigakuFile', &lt;class 'Stoner.FileFormats.RigakuFile'&gt;), ('SLS_STXMFile', &lt;class 'Stoner.HDF5.SLS_STXMFile'&gt;), ('SNSFile', &lt;class 'Stoner.FileFormats.SNSFile'&gt;), ('SPCFile', &lt;class 'Stoner.FileFormats.SPCFile'&gt;), ('TDMSFile', &lt;class 'Stoner.FileFormats.TDMSFile'&gt;), ('VSMFile', &lt;class 'Stoner.FileFormats.VSMFile'&gt;), ('XRDFile', &lt;class 'Stoner.FileFormats.XRDFile'&gt;), ('Data', &lt;class 'Stoner.Core.Data'&gt;), ('EasyPlotFile', &lt;class 'Stoner.FileFormats.EasyPlotFile'&gt;), ('MokeFile', &lt;class 'Stoner.FileFormats.MokeFile'&gt;), ('PinkLibFile', &lt;class 'Stoner.FileFormats.PinkLibFile'&gt;), ('ZipFile', &lt;class 'Stoner.Zip.ZipFile'&gt;), ('BNLFile', &lt;class 'Stoner.FileFormats.BNLFile'&gt;), ('BigBlueFile', &lt;class 'Stoner.FileFormats.BigBlueFile'&gt;), ('GenXFile', &lt;class 'Stoner.FileFormats.GenXFile'&gt;), ('CSVFile', &lt;class 'Stoner.FileFormats.CSVFile'&gt;)])</em><a class="headerlink" href="#Stoner.Core.Data.subclasses" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="Stoner.Core.Data.subplots">
<code class="descname">subplots</code><a class="headerlink" href="#Stoner.Core.Data.subplots" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the subplot instances.</p>
</dd></dl>

<dl class="attribute">
<dt id="Stoner.Core.Data.template">
<code class="descname">template</code><a class="headerlink" href="#Stoner.Core.Data.template" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the current plot template.</p>
</dd></dl>

<p class="rubric">Methods Documentation</p>
<dl class="method">
<dt id="Stoner.Core.Data.SG_Filter">
<code class="descname">SG_Filter</code><span class="sig-paren">(</span><em>col=None</em>, <em>points=15</em>, <em>poly=1</em>, <em>order=0</em>, <em>result=None</em>, <em>replace=False</em>, <em>header=None</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.SG_Filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements Savitsky-Golay filtering of data for smoothing and differentiating data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>col</strong> (<em>index</em>) – Column of Data to be filtered. if None, first y-column in setas is filtered.</li>
<li><strong>prints</strong> (<em>int</em>) – Number of data points to use in the filtering window. Should be an odd number &gt; poly+1 (default 15)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><ul class="first simple">
<li><strong>poly</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – Order of polynomial to fit to the data. Must be equal or greater than order (default 1)</li>
<li><strong>order</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – Order of differentiation to carry out. Default=0 meaning smooth the data only.</li>
<li><strong>result</strong> (<a class="reference external" href="https://docs.python.org/2/library/constants.html#None" title="(in Python v2.7)"><em>None</em></a><em>,</em><a class="reference external" href="https://docs.python.org/2/library/constants.html#True" title="(in Python v2.7)"><em>True</em></a><em>, or </em><em>column_index</em>) – If not None, column index to insert new data, or True to append as last column</li>
<li><strong>header</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a><em> or </em><a class="reference external" href="https://docs.python.org/2/library/constants.html#None" title="(in Python v2.7)"><em>None</em></a>) – Header for new column if result is not None. If header is Nne, a suitable column header is generated.</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><em>(numpoy array or self)</em> – If result is None, a numpy array representing the smoothed or differentiated data is returned.
Otherwise, a copy of the modified AnalysisMixin object is returned.</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>If col is not specified or is None then the <a class="reference internal" href="Stoner.Core.DataFile.html#Stoner.Core.DataFile.setas" title="Stoner.Core.DataFile.setas"><code class="xref py py-attr docutils literal"><span class="pre">DataFile.setas</span></code></a> column assignments are used
to set an x and y column. If col is a tuple, then it is assumed to secify and x-column and y-column
for differentiating data. This is now a pass through to <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.signal.savgol_filter.html#scipy.signal.savgol_filter" title="(in SciPy v1.0.0)"><code class="xref py py-func docutils literal"><span class="pre">scipy.signal.savgol_filter()</span></code></a></p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">User guide section <a class="reference internal" href="../UserGuide/analysisfile.html#smoothing-guide"><span class="std std-ref">Smoothing and Filtering Data</span></a></p>
</div>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.__call__">
<code class="descname">__call__</code><span class="sig-paren">(</span><em>*args</em>, <em>**kargs</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Clone the DataFile, but allowing additional arguments to modify the new clone.</p>
<p>Creates a new clone of self and then passes all the arguments to the clones’ __init__ method.</p>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.add">
<code class="descname">add</code><span class="sig-paren">(</span><em>a</em>, <em>b</em>, <em>replace=False</em>, <em>header=None</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Add one column, number or array (b) to another column (a).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>a</strong> (<em>index</em>) – First column to work with</li>
<li><strong>b</strong> (<em>index, float or 1D array</em>) – Second column to work with.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><ul class="first simple">
<li><strong>header</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a><em> or </em><a class="reference external" href="https://docs.python.org/2/library/constants.html#None" title="(in Python v2.7)"><em>None</em></a>) – new column header  (defaults to a-b</li>
<li><strong>replace</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – Replace the a column with the new data</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><em>self</em> – The newly modified <code class="xref py py-class docutils literal"><span class="pre">AnalysisMixin</span></code>.</p>
</td>
</tr>
</tbody>
</table>
<p>If a and b are tuples of length two, then the firstelement is assumed to be the value and
the second element an uncertainty in the value. The uncertainties will then be propagated and an
additional column with the uncertainites will be added to the data.</p>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.add_column">
<code class="descname">add_column</code><span class="sig-paren">(</span><em>column_data</em>, <em>header=None</em>, <em>index=None</em>, <em>**kargs</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.add_column" title="Permalink to this definition">¶</a></dt>
<dd><p>Appends a column of data or inserts a column to a datafile instance.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>column_data</strong> (<code class="xref py py-class docutils literal"><span class="pre">numpy.array</span></code> or list or callable) – Data to append or insert or a callable function that will generate new data</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><ul class="first simple">
<li><strong>column_header</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) – The text to set the column header to,
if not supplied then defaults to ‘col#’</li>
<li><strong>index</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a><em> or </em><a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) – The  index (numeric or string) to insert (or replace) the data</li>
<li><strong>func_args</strong> (<a class="reference external" href="https://docs.python.org/2/library/stdtypes.html#dict" title="(in Python v2.7)"><em>dict</em></a>) – If column_data is a callable object, then this argument
can be used to supply a dictionary of function arguments to the callable object.</li>
<li><strong>replace</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – Replace the data or insert the data (default)</li>
<li><strong>setas</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – Set the type of column (x,y,z data etc - see <a class="reference internal" href="Stoner.Core.DataFile.html#Stoner.Core.DataFile.setas" title="Stoner.Core.DataFile.setas"><code class="xref py py-attr docutils literal"><span class="pre">Stoner.Core.DataFile.setas</span></code></a>)</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A <a class="reference internal" href="Stoner.Core.DataFile.html#Stoner.Core.DataFile" title="Stoner.Core.DataFile"><code class="xref py py-class docutils literal"><span class="pre">DataFile</span></code></a> instance with the additonal column inserted.</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Like most <a class="reference internal" href="Stoner.Core.DataFile.html#Stoner.Core.DataFile" title="Stoner.Core.DataFile"><code class="xref py py-class docutils literal"><span class="pre">DataFile</span></code></a> methods, this method operates in-place in that it also modifies
the original DataFile Instance as well as returning it.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.annotate_fit">
<code class="descname">annotate_fit</code><span class="sig-paren">(</span><em>model</em>, <em>x=None</em>, <em>y=None</em>, <em>z=None</em>, <em>text_only=False</em>, <em>**kargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Stoner/Core.html#Data.annotate_fit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Stoner.Core.Data.annotate_fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Annotate a plot with some information about a fit.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>mode</strong> (<em>callable or lmfit.Model</em>) – The function/model used to describe the fit to be annotated.</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>Keyword Parameters:</dt>
<dd><p class="first">x (float): x co-ordinate of the label
y (float): y co-ordinate of the label
z (float): z co-ordinbate of the label if the current axes are 3D
prefix (str): The prefix placed ahead of the model parameters in the metadata.
text_only (bool): If False (default), add the text to the plot and return the current object, otherwise,</p>
<blockquote>
<div>return just the text and don’t add to a plot.</div></blockquote>
<p class="last">prefix(str): If given  overridges the prefix from the model to determine a prefix to the parameter names in the metadata
display_prefix (str,None): if given, overrides the prefix when  labelling the parameter values in the text.</p>
</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><em>(Datam, str)</em> – A copy of the current Data instance if text_only is False, otherwise returns the text.</td>
</tr>
</tbody>
</table>
<p>If <em>prefix</em> is not given, then the first prefix in the metadata lmfit.prefix is used if present,
otherwise a prefix is generated from the model.prefix attribute. If <em>x</em> and <em>y</em> are not specified then they
are set to be 0.75 * maximum x and y limit of the plot.</p>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.apply">
<code class="descname">apply</code><span class="sig-paren">(</span><em>func</em>, <em>col=None</em>, <em>replace=True</em>, <em>header=None</em>, <em>**kargs</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.apply" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies the given function to each row in the data set and adds to the data set.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>func</strong> (<em>callable</em>) – A function that takes a numpy 1D array representing each row of data</li>
<li><strong>col</strong> (<em>index</em>) – The column in which to place the result of the function</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><ul class="first simple">
<li><strong>replace</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – Isnert a new data column (False) or replace the data column (True, default)</li>
<li><strong>header</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a><em> or </em><a class="reference external" href="https://docs.python.org/2/library/constants.html#None" title="(in Python v2.7)"><em>None</em></a>) – The new column header (defaults to the name of the function func</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><em>self</em> – The newly modified <code class="xref py py-class docutils literal"><span class="pre">AnalysisMixin</span></code>.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.bin">
<code class="descname">bin</code><span class="sig-paren">(</span><em>xcol=None</em>, <em>ycol=None</em>, <em>bins=0.03</em>, <em>mode='log'</em>, <em>clone=True</em>, <em>**kargs</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.bin" title="Permalink to this definition">¶</a></dt>
<dd><p>Bin x-y data into new values of x with an error bar.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>xcol</strong> (<em>index</em>) – Index of column of data with X values</li>
<li><strong>ycol</strong> (<em>index</em>) – Index of column of data with Y values</li>
<li><strong>bins</strong> (<em>int, float or 1d array</em>) – Number of bins (if integer) or size of bins (if float), or bin edges (if array)</li>
<li><strong>mode</strong> (<em>string</em>) – “log” or “lin” for logarithmic or linear binning</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><ul class="first simple">
<li><strong>yerr</strong> (<em>index</em>) – Column with y-error data if present.</li>
<li><strong>bin_start</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – Manually override the minimum bin value</li>
<li><strong>bin_stop</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – Manually override the maximum bin value</li>
<li><strong>clone</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – Return a clone of the current AnalysisMixin with binned data (True)
or just the numbers (False).</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Either a clone of the current data set with the new binned data or
tuple of (bin centres, bin values, bin errors, number points/bin),
depending on the <em>clone</em> parameter.</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Algorithm inspired by MatLab code wbin,    Copyright (c) 2012:
Michael Lindholm Nielsen</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">User Guide section <a class="reference internal" href="../UserGuide/analysisfile.html#binning-guide"><span class="std std-ref">(Re)Binning Data</span></a></p>
</div>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.clear">
<code class="descname">clear</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; None.  Remove all items from D.<a class="headerlink" href="#Stoner.Core.Data.clear" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.clip">
<code class="descname">clip</code><span class="sig-paren">(</span><em>clipper</em>, <em>column=None</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.clip" title="Permalink to this definition">¶</a></dt>
<dd><p>Clips the data based on the column and the clipper value.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>column</strong> (<em>index</em>) – Column to look for the maximum in</li>
<li><strong>clipper</strong> (<em>tuple or array</em>) – Either a tuple of (min,max) or a numpy.ndarray -
in which case the max and min values in that array will be
used as the clip limits</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><em>self</em> – The newly modified <code class="xref py py-class docutils literal"><span class="pre">AnalysisMixin</span></code>.</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If column is not defined (or is None) the <a class="reference internal" href="Stoner.Core.DataFile.html#Stoner.Core.DataFile.setas" title="Stoner.Core.DataFile.setas"><code class="xref py py-attr docutils literal"><span class="pre">DataFile.setas</span></code></a> column
assignments are used.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.closest">
<code class="descname">closest</code><span class="sig-paren">(</span><em>value</em>, <em>xcol=None</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.closest" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the row in a data file which has an x-column value closest to the given value.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>value</strong> (<em>float</em>) – Value to search for.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><strong>xcol</strong> (<em>index</em><em> or </em><a class="reference external" href="https://docs.python.org/2/library/constants.html#None" title="(in Python v2.7)"><em>None</em></a>) – Column in which to look for value, or None to use setas.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><em>ndarray</em> – A single row of data as a <a class="reference internal" href="Stoner.Core.DataArray.html#Stoner.Core.DataArray" title="Stoner.Core.DataArray"><code class="xref py py-class docutils literal"><span class="pre">Stoner.Core.DataArray</span></code></a>.</td>
</tr>
</tbody>
</table>
<p>Notes: To find which row it is that has been returned, use the <a class="reference internal" href="Stoner.Core.DataArray.html#Stoner.Core.DataArray.i" title="Stoner.Core.DataArray.i"><code class="xref py py-attr docutils literal"><span class="pre">Stoner.Core.DataArray.i</span></code></a> index attribute.</p>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.colormap_xyz">
<code class="descname">colormap_xyz</code><span class="sig-paren">(</span><em>xcol=None</em>, <em>ycol=None</em>, <em>zcol=None</em>, <em>**kargs</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.colormap_xyz" title="Permalink to this definition">¶</a></dt>
<dd><p>An xyz plot that forces the use of plt.contour.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>xcol</strong> (<em>index</em>) – Xcolumn index or label</li>
<li><strong>ycol</strong> (<em>index</em>) – Y column index or label</li>
<li><strong>zcol</strong> (<em>index</em>) – Z column index or label</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><ul class="first simple">
<li><strong>shape</strong> (<em>two-tuple</em>) – Number of points along x and y in the grid - defaults to a square of sidelength = square root of the length of the data.</li>
<li><strong>xlim</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#tuple" title="(in Python v2.7)"><em>tuple</em></a>) – The xlimits, defaults to automatically determined from data</li>
<li><strong>ylim</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#tuple" title="(in Python v2.7)"><em>tuple</em></a>) – The ylimits, defaults to automatically determined from data</li>
<li><strong>plotter</strong> (<em>function</em>) – Function to use to plot data. Defaults to plt.contour</li>
<li><strong>colorbar</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – Draw the z-scale color bar beside the plot (True by default)</li>
<li><strong>show_plot</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – Turn on interfactive plotting and show plot when drawn</li>
<li><strong>save_filename</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a><em> or </em><a class="reference external" href="https://docs.python.org/2/library/constants.html#None" title="(in Python v2.7)"><em>None</em></a>) – If set to a string, save the plot with this filename</li>
<li><strong>figure</strong> (<em>integer</em><em> or </em><a class="reference external" href="http://matplotlib.org/api/figure_api.html#module-matplotlib.figure" title="(in Matplotlib v2.1.0)"><em>matplotlib.figure</em></a><em> or </em><em>boolean</em>) – Controls which figure is used for the plot, or if a new figure is opened.</li>
<li><strong>**kargs</strong> (<a class="reference external" href="https://docs.python.org/2/library/stdtypes.html#dict" title="(in Python v2.7)"><em>dict</em></a>) – Other arguments are passed on to the plotter.</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A matplotlib figure</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.column">
<code class="descname">column</code><span class="sig-paren">(</span><em>col</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.column" title="Permalink to this definition">¶</a></dt>
<dd><p>Extracts one or more columns of data from the datafile by name, partial name, regular expression or numeric index.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>col</strong> (<em>int, string, list or re</em>) – is the column index as defined for <a class="reference internal" href="Stoner.Core.DataFile.html#Stoner.Core.DataFile.find_col" title="Stoner.Core.DataFile.find_col"><code class="xref py py-meth docutils literal"><span class="pre">DataFile.find_col()</span></code></a></td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><em>ndarray</em> – One or more columns of data as a <a class="reference external" href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.ndarray.html#numpy.ndarray" title="(in NumPy v1.13)"><code class="xref py py-class docutils literal"><span class="pre">numpy.ndarray</span></code></a>.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.columns">
<code class="descname">columns</code><span class="sig-paren">(</span><em>not_masked=False</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.columns" title="Permalink to this definition">¶</a></dt>
<dd><p>Generator method that will iterate over the columns of data int he datafile.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Yields:</th><td class="field-body"><em>1D array</em> – Returns the next column of data.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.contour_xyz">
<code class="descname">contour_xyz</code><span class="sig-paren">(</span><em>xcol=None</em>, <em>ycol=None</em>, <em>zcol=None</em>, <em>shape=None</em>, <em>xlim=None</em>, <em>ylim=None</em>, <em>plotter=None</em>, <em>**kargs</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.contour_xyz" title="Permalink to this definition">¶</a></dt>
<dd><p>An xyz plot that forces the use of plt.contour.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>xcol</strong> (<em>index</em>) – Xcolumn index or label</li>
<li><strong>ycol</strong> (<em>index</em>) – Y column index or label</li>
<li><strong>zcol</strong> (<em>index</em>) – Z column index or label</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><ul class="first simple">
<li><strong>shape</strong> (<em>two-tuple</em>) – Number of points along x and y in the grid - defaults to a square of sidelength = square root of the length of the data.</li>
<li><strong>xlim</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#tuple" title="(in Python v2.7)"><em>tuple</em></a>) – The xlimits, defaults to automatically determined from data</li>
<li><strong>ylim</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#tuple" title="(in Python v2.7)"><em>tuple</em></a>) – The ylimits, defaults to automatically determined from data</li>
<li><strong>plotter</strong> (<em>function</em>) – Function to use to plot data. Defaults to plt.contour</li>
<li><strong>show_plot</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – Turn on interfactive plotting and show plot when drawn</li>
<li><strong>save_filename</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a><em> or </em><a class="reference external" href="https://docs.python.org/2/library/constants.html#None" title="(in Python v2.7)"><em>None</em></a>) – If set to a string, save the plot with this filename</li>
<li><strong>figure</strong> (<em>integer</em><em> or </em><a class="reference external" href="http://matplotlib.org/api/figure_api.html#module-matplotlib.figure" title="(in Matplotlib v2.1.0)"><em>matplotlib.figure</em></a><em> or </em><em>boolean</em>) – Controls which figure is used for the plot, or if a new figure is opened.</li>
<li><strong>**kargs</strong> (<a class="reference external" href="https://docs.python.org/2/library/stdtypes.html#dict" title="(in Python v2.7)"><em>dict</em></a>) – Other arguments are passed on to the plotter.</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A matplotlib figure</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.count">
<code class="descname">count</code><span class="sig-paren">(</span><em>axis=0</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.count" title="Permalink to this definition">¶</a></dt>
<dd><p>Count the number of un-masked elements in the <a class="reference internal" href="Stoner.Core.DataFile.html#Stoner.Core.DataFile" title="Stoner.Core.DataFile"><code class="xref py py-class docutils literal"><span class="pre">DataFile</span></code></a>.</p>
<dl class="docutils">
<dt>Keywords:</dt>
<dd>axis (int): Which axis to count the unmasked elements along.</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><em>(int)</em> – Number of unmasked elements.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.curve_fit">
<code class="descname">curve_fit</code><span class="sig-paren">(</span><em>func</em>, <em>xcol=None</em>, <em>ycol=None</em>, <em>p0=None</em>, <em>sigma=None</em>, <em>**kargs</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.curve_fit" title="Permalink to this definition">¶</a></dt>
<dd><p>General curve fitting function passed through from scipy.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>func</strong> (<em>callable</em>) – The fitting function with the form def f(x,*p) where p is a list of fitting parameters</li>
<li><strong>xcol</strong> (<em>index, Iterable</em>) – The index of the x-column data to fit. If list or other iterable sends a tuple of x columns to func for N-d fitting.</li>
<li><strong>ycol</strong> (<em>index, list of indices or array</em>) – The index of the y-column data to fit. If an array, then should be 1D and
the same length as the data. If ycol is a list of indices then the columns are iterated over in turn, fitting occuring
for each one. In this case the return value is a list of what would be returned for a single column fit.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><ul class="first simple">
<li><strong>p0</strong> (<em>list</em><em>, </em><a class="reference external" href="https://docs.python.org/2/library/functions.html#tuple" title="(in Python v2.7)"><em>tuple</em></a><em> or </em><a class="reference external" href="https://docs.python.org/2/library/array.html#module-array" title="(in Python v2.7)"><em>array</em></a>) – A vector of initial parameter values to try</li>
<li><strong>sigma</strong> (<em>index</em>) – The index of the column with the y-error bars</li>
<li><strong>bounds</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#callable" title="(in Python v2.7)"><em>callable</em></a>) – A callable object that evaluates true if a row is to be included. Should be of the form f(x,y)</li>
<li><strong>result</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – Determines whether the fitted data should be added into the DataFile object. If result is True then
the last column will be used. If result is a string or an integer then it is used as a column index.
Default to None for not adding fitted data</li>
<li><strong>replace</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – Inidcatesa whether the fitted data replaces existing data or is inserted as a new column (default False)</li>
<li><strong>header</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a><em> or </em><a class="reference external" href="https://docs.python.org/2/library/constants.html#None" title="(in Python v2.7)"><em>None</em></a>) – If this is a string then it is used as the name of the fitted data. (default None)</li>
<li><strong>absolute_sigma</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – If False, <cite>sigma</cite> denotes relative weights of the data points. The default True means that
the sigma parameter is the reciprocal of the absoluate standard deviation.</li>
<li><strong>output</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a><em>, </em><em>default &quot;fit&quot;</em>) – Specifiy what to return.</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><em>popt, pcov (array, 2D array)</em> – Optimal values of the fitting parameters p, and the variance-co-variance matrix
for the fitting parameters.</p>
</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>The return value is determined by the <em>output</em> parameter. Options are:</dt>
<dd><ul class="first last simple">
<li>“fit”    (tuple of popt,pcov)</li>
<li>“row”     just a one dimensional numpy array of the fit paraeters interleaved with their uncertainties</li>
<li>“full”    a tuple of (popt,pcov,dictionary of optional outputs, message, return code, row).</li>
<li>“data”   a copy of the <a class="reference internal" href="Stoner.Core.DataFile.html#Stoner.Core.DataFile" title="Stoner.Core.DataFile"><code class="xref py py-class docutils literal"><span class="pre">Stoner.Core.DataFile</span></code></a> object with fit recorded in the metadata and optionally as a new column.</li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If the columns are not specified (or set to None) then the X and Y data are taken using the
<a class="reference internal" href="Stoner.Core.DataFile.html#Stoner.Core.DataFile.setas" title="Stoner.Core.DataFile.setas"><code class="xref py py-attr docutils literal"><span class="pre">Stoner.Core.DataFile.setas</span></code></a> attribute.</p>
<p>The fitting function should have prototype y=f(x,p[0],p[1],p[2]…)
The x-column and y-column can be anything that <a class="reference internal" href="Stoner.Core.DataFile.html#Stoner.Core.DataFile.find_col" title="Stoner.Core.DataFile.find_col"><code class="xref py py-meth docutils literal"><span class="pre">Stoner.Core.DataFile.find_col()</span></code></a> can use as an index
but typucally either strings to be matched against column headings or integers.
The initial parameter values and weightings default to None which corresponds to all parameters starting
at 1 and all points equally weighted. The bounds function has format b(x, y-vec) and rewturns true if the
point is to be used in the fit and false if not.</p>
<p class="last">The <em>absolute_sigma</em> keyword determines whether the returned covariance matrix <cite>pcov</cite> is based on <em>estimated</em> errors in
the data, and is not affected by the overall magnitude of the values in <cite>sigma</cite>. Only the relative magnitudes of the
<em>sigma</em> values matter.
If True, <cite>sigma</cite> describes one standard deviation errors of the input data points. The estimated covariance in <cite>pcov</cite> is
based on these values.</p>
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="Stoner.Analysis.AnalysisMixin.html#Stoner.Analysis.AnalysisMixin.lmfit" title="Stoner.Analysis.AnalysisMixin.lmfit"><code class="xref py py-meth docutils literal"><span class="pre">Stoner.Analysis.AnalysisMixin.lmfit()</span></code></a>
User guide section <a class="reference internal" href="../UserGuide/analysisfile.html#curve-fit-guide"><span class="std std-ref">Curve Fitting</span></a></p>
</div>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.decompose">
<code class="descname">decompose</code><span class="sig-paren">(</span><em>xcol=None</em>, <em>ycol=None</em>, <em>sym=None</em>, <em>asym=None</em>, <em>replace=True</em>, <em>**kwords</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.decompose" title="Permalink to this definition">¶</a></dt>
<dd><p>Given (x,y) data, decomposes the y part into symmetric and antisymmetric contributions in x.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><ul class="first simple">
<li><strong>xcol</strong> (<em>index</em>) – Index of column with x data - defaults to first x column in self.setas</li>
<li><strong>ycol</strong> (<em>index</em><em> or </em><em>list of indices</em>) – indices of y column(s) data</li>
<li><strong>sym</strong> (<em>index</em>) – Index of column to place symmetric data in default, append to end of data</li>
<li><strong>asym</strong> (<em>index</em>) – Index of column for asymmetric part of ata. Defaults to appending to end of data</li>
<li><strong>replace</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – Overwrite data with output (true)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><em>self</em> – The newly modified <code class="xref py py-class docutils literal"><span class="pre">AnalysisMixin</span></code>.</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;Decompose Example&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">Stoner</span> <span class="kn">import</span> <span class="n">Data</span>
<span class="kn">from</span> <span class="nn">Stoner.tools</span> <span class="kn">import</span> <span class="n">format_val</span>
<span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">linspace</span><span class="p">,</span><span class="n">reshape</span><span class="p">,</span><span class="n">array</span>

<span class="n">x</span><span class="o">=</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">201</span><span class="p">)</span>
<span class="n">y</span><span class="o">=</span><span class="mf">0.3</span><span class="o">*</span><span class="n">x</span><span class="o">**</span><span class="mi">3</span><span class="o">-</span><span class="mi">6</span><span class="o">*</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="mi">11</span><span class="o">*</span><span class="n">x</span><span class="o">-</span><span class="mi">20</span>
<span class="n">d</span><span class="o">=</span><span class="n">Data</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">setas</span><span class="o">=</span><span class="s2">&quot;xy&quot;</span><span class="p">,</span><span class="n">column_headers</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;X&quot;</span><span class="p">,</span><span class="s2">&quot;Y&quot;</span><span class="p">])</span>
<span class="n">d</span><span class="o">.</span><span class="n">decompose</span><span class="p">()</span>
<span class="n">d</span><span class="o">.</span><span class="n">setas</span><span class="o">=</span><span class="s2">&quot;xyyy&quot;</span>
<span class="n">coeffs</span><span class="o">=</span><span class="n">d</span><span class="o">.</span><span class="n">polyfit</span><span class="p">(</span><span class="n">polynomial_order</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="n">str_coeffs</span><span class="o">=</span><span class="p">[</span><span class="n">format_val</span><span class="p">(</span><span class="n">c</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;eng&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">coeffs</span><span class="o">.</span><span class="n">ravel</span><span class="p">()]</span>
<span class="n">str_coeffs</span><span class="o">=</span><span class="n">reshape</span><span class="p">(</span><span class="n">array</span><span class="p">(</span><span class="n">str_coeffs</span><span class="p">),</span><span class="n">coeffs</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="n">d</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">d</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="o">-</span><span class="mi">6</span><span class="p">,</span><span class="o">-</span><span class="mi">800</span><span class="p">,</span><span class="s2">&quot;Coefficients</span><span class="se">\n</span><span class="s2">{}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">str_coeffs</span><span class="p">),</span><span class="n">fontdict</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;size&quot;</span><span class="p">:</span><span class="s2">&quot;x-small&quot;</span><span class="p">})</span>
<span class="n">d</span><span class="o">.</span><span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;Data&quot;</span>
<span class="n">d</span><span class="o">.</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Decompose Example&quot;</span>
<span class="n">d</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../samples/decompose.png">png</a>, <a class="reference external" href="../samples/decompose.hires.png">hires.png</a>, <a class="reference external" href="../samples/decompose.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/decompose.png" src="../_images/decompose.png" />
</div>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.del_column">
<code class="descname">del_column</code><span class="sig-paren">(</span><em>col=None</em>, <em>duplicates=False</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.del_column" title="Permalink to this definition">¶</a></dt>
<dd><p>Deletes a column from the current <a class="reference internal" href="Stoner.Core.DataFile.html#Stoner.Core.DataFile" title="Stoner.Core.DataFile"><code class="xref py py-class docutils literal"><span class="pre">DataFile</span></code></a> object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>col</strong> (<em>int, string, list or re</em>) – is the column index as defined for <a class="reference internal" href="Stoner.Core.DataFile.html#Stoner.Core.DataFile.find_col" title="Stoner.Core.DataFile.find_col"><code class="xref py py-meth docutils literal"><span class="pre">DataFile.find_col()</span></code></a> to the column to be deleted</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><strong>duplicates</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – (default False) look for duplicated columns</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><em>self</em> – The <a class="reference internal" href="Stoner.Core.DataFile.html#Stoner.Core.DataFile" title="Stoner.Core.DataFile"><code class="xref py py-class docutils literal"><span class="pre">DataFile</span></code></a> object with the column deleted.</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>If duplicates is True and col is None then all duplicate columns are removed,</li>
<li>if col is not None and duplicates is True then all duplicates of the specified column are removed.</li>
<li>If duplicates is False then <em>col</em> must not be None otherwise a RuntimeError is raised.</li>
<li>If col is a list (duplicates should not be None) then the all the matching columns are found.</li>
<li><dl class="first docutils">
<dt>If col is None and duplicates is None, then all columns with at least one elelemtn masked</dt>
<dd>will be deleted</dd>
</dl>
</li>
</ul>
</div>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.del_rows">
<code class="descname">del_rows</code><span class="sig-paren">(</span><em>col=None</em>, <em>val=None</em>, <em>invert=False</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.del_rows" title="Permalink to this definition">¶</a></dt>
<dd><p>Searchs in the numerica data for the lines that match and deletes the corresponding rows.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>col</strong> (<em>list,slice,int,string, re, callable or None</em>) – Column containg values to search for.</li>
<li><strong>val</strong> (<em>float or callable</em>) – Specifies rows to delete. Maybe:<ul>
<li>None - in which case the <em>col</em> argument is used to identify rows to be deleted,</li>
<li>a float in which case rows whose columncol = val are deleted</li>
<li>or a function - in which case rows where the function evaluates to be true are deleted.</li>
<li>a tuple, in which case rows where column col takes value between the minium and maximum of the tuple
are deleted.</li>
</ul>
</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first"><strong>invert</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – Specifies whether to invert the logic of the test to delete a row. If True, keep the rows
that would have been deleted otherwise.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><em>self</em> – The current <a class="reference internal" href="Stoner.Core.DataFile.html#Stoner.Core.DataFile" title="Stoner.Core.DataFile"><code class="xref py py-class docutils literal"><span class="pre">DataFile</span></code></a> object</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If col is None, then all rows with masked data are deleted</p>
<p>if <em>col</em> is callable then it is passed each row as a <a class="reference internal" href="Stoner.Core.DataArray.html#Stoner.Core.DataArray" title="Stoner.Core.DataArray"><code class="xref py py-class docutils literal"><span class="pre">DataArray</span></code></a> and if it returns
True, then the row will be deleted or kept depending on the value of <em>invert</em>.</p>
<p class="last">If <em>val</em> is a callable it should take two arguments - a float and a
list. The float is the value of the current row that corresponds to column col abd the second
argument is the current row.</p>
</div>
<div class="admonition-todo admonition" id="index-0">
<p class="first admonition-title">Todo</p>
<p class="last">Implement val is a tuple for deletinging in a range of values.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.diffsum">
<code class="descname">diffsum</code><span class="sig-paren">(</span><em>a</em>, <em>b</em>, <em>replace=False</em>, <em>header=None</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.diffsum" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate <span class="math">\(\frac{a-b}{a+b}\)</span> for the two columns <em>a</em> and <em>b</em>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>a</strong> (<em>index</em>) – First column to work with</li>
<li><strong>b</strong> (<em>index, float or 1D array</em>) – Second column to work with.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><ul class="first simple">
<li><strong>header</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a><em> or </em><a class="reference external" href="https://docs.python.org/2/library/constants.html#None" title="(in Python v2.7)"><em>None</em></a>) – new column header  (defaults to a-b</li>
<li><strong>replace</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – Replace the a column with the new data</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><em>self</em> – The newly modified <code class="xref py py-class docutils literal"><span class="pre">AnalysisMixin</span></code>.</p>
</td>
</tr>
</tbody>
</table>
<p>If a and b are tuples of length two, then the firstelement is assumed to be the value and
the second element an uncertainty in the value. The uncertainties will then be propagated and an
additional column with the uncertainites will be added to the data.</p>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.dir">
<code class="descname">dir</code><span class="sig-paren">(</span><em>pattern=None</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of keys in the metadata, filtering wiht a regular expression if necessary.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><strong>pattern</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a><em> or </em><a class="reference external" href="https://docs.python.org/2/library/re.html#module-re" title="(in Python v2.7)"><em>re</em></a>) – is a regular expression or None to list all keys</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><em>list</em> – A list of metadata keys.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.divide">
<code class="descname">divide</code><span class="sig-paren">(</span><em>a</em>, <em>b</em>, <em>replace=False</em>, <em>header=None</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.divide" title="Permalink to this definition">¶</a></dt>
<dd><p>Divide one column (a) by  another column, number or array (b).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>a</strong> (<em>index</em>) – First column to work with</li>
<li><strong>b</strong> (<em>index, float or 1D array</em>) – Second column to work with.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><ul class="first simple">
<li><strong>header</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a><em> or </em><a class="reference external" href="https://docs.python.org/2/library/constants.html#None" title="(in Python v2.7)"><em>None</em></a>) – new column header  (defaults to a-b</li>
<li><strong>replace</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – Replace the a column with the new data</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><em>self</em> – The newly modified <code class="xref py py-class docutils literal"><span class="pre">AnalysisMixin</span></code>.</p>
</td>
</tr>
</tbody>
</table>
<p>If a and b are tuples of length two, then the firstelement is assumed to be the value and
the second element an uncertainty in the value. The uncertainties will then be propagated and an
additional column with the uncertainites will be added to the data.</p>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.extrapolate">
<code class="descname">extrapolate</code><span class="sig-paren">(</span><em>new_x</em>, <em>xcol=None</em>, <em>ycol=None</em>, <em>yerr=None</em>, <em>overlap=20</em>, <em>kind='linear'</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.extrapolate" title="Permalink to this definition">¶</a></dt>
<dd><p>Extrapolate data based on local fit to x,y data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>new_x</strong> (<em>float or array</em>) – New values of x data.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><ul class="first simple">
<li><strong>xcol</strong> (<em>column index</em><em>, </em><a class="reference external" href="https://docs.python.org/2/library/constants.html#None" title="(in Python v2.7)"><em>None</em></a>) – column containing x-data or None to use setas attribute</li>
<li><strong>ycol</strong> (<em>column index</em><em>(</em><em>es</em><em>) or </em><a class="reference external" href="https://docs.python.org/2/library/constants.html#None" title="(in Python v2.7)"><em>None</em></a>) – column(s) containing the y-data or None to use setas attribute.</li>
<li><strong>yerr</strong> (<em>column index</em><em>(</em><em>es</em><em>) or </em><a class="reference external" href="https://docs.python.org/2/library/constants.html#None" title="(in Python v2.7)"><em>None</em></a>) – y error data column or None to use setas attribute</li>
<li><strong>overlap</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a><em> or </em><a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – range of x-data used for the local fit for extrapolating. If int then overlap number of
points is used, if float then that range x-axis space is used.</li>
<li><strong>kind</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/2/library/functions.html#callable" title="(in Python v2.7)"><em>callable</em></a>) – Determines local fitting function. If string should be “linear”, “quadratic” or “cubic” if
callable, then represents a function to be fitted to the data.</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Array of extrapolated values.</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If the new_x values lie outside the span of the x-data, then the nearest <em>overlap</em> portion of the data is used
to estimate the values. If the new_x values are within the span of the x-data then the portion of the data
centred about the point and overlap points long will be used to interpolate a value.</p>
<p class="last">If <em>kind</em> is callable, it should take x values in the first parameter and free fitting parameters as the other
parameters (i.e. as with <code class="xref py py-meth docutils literal"><span class="pre">AnalysisMixin.curve_fit()</span></code>).</p>
</div>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.figure">
<code class="descname">figure</code><span class="sig-paren">(</span><em>figure=None</em>, <em>projection='rectilinear'</em>, <em>**kargs</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.figure" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the figure used by <a class="reference internal" href="Stoner.plot.PlotMixin.html#Stoner.plot.PlotMixin" title="Stoner.plot.PlotMixin"><code class="xref py py-class docutils literal"><span class="pre">Stoner.plot.PlotMixin</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>figure A matplotlib figure or figure number</strong></td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The current  Stoner.plot.PlotMixin instance</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.filter">
<code class="descname">filter</code><span class="sig-paren">(</span><em>func=None</em>, <em>cols=None</em>, <em>reset=True</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the mask on rows of data by evaluating a function for each row.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>func</strong> (<em>callable</em>) – is a callable object that should take a single list as a p[arameter representing one row.</li>
<li><strong>cols</strong> (<em>list</em>) – a list of column indices that are used to form the list of values passed to func.</li>
<li><strong>reset</strong> (<em>bool</em>) – determines whether the mask is reset before doing the filter (otherwise rows already masked out will be ignored
in the filter (so the filter is logically or’d)) The default value of None results in a complete row being passed into func.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><em>self</em> – The current <a class="reference internal" href="Stoner.Core.DataFile.html#Stoner.Core.DataFile" title="Stoner.Core.DataFile"><code class="xref py py-class docutils literal"><span class="pre">DataFile</span></code></a> object with the mask set</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.find_col">
<code class="descname">find_col</code><span class="sig-paren">(</span><em>col</em>, <em>force_list=False</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.find_col" title="Permalink to this definition">¶</a></dt>
<dd><p>Indexes the column headers in order to locate a column of data.shape.</p>
<p>Indexing can be by supplying an integer, a string, a regular experssion, a slice or a list of any of the above.</p>
<ul class="simple">
<li>Integer indices are simply checked to ensure that they are in range</li>
<li>String indices are first checked for an exact match against a column header
if that fails they are then compiled to a regular expression and the first
match to a column header is taken.</li>
<li>A regular expression index is simply matched against the column headers and the
first match found is taken. This allows additional regular expression options
such as case insensitivity.</li>
<li>A slice index is converted to a list of integers and processed as below</li>
<li>A list index returns the results of feading each item in the list at <a class="reference internal" href="#Stoner.Core.Data.find_col" title="Stoner.Core.Data.find_col"><code class="xref py py-meth docutils literal"><span class="pre">find_col()</span></code></a>
in turn.</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>col</strong> (<em>int, a string, a re, a slice or a list</em>) – Which column(s) to retuirn indices for.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><strong>force_list</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – Force the output always to be a list. Mainly for internal use only</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><em>int, list of ints</em> – The matching column index as an integer or a KeyError</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.format">
<code class="descname">format</code><span class="sig-paren">(</span><em>key</em>, <em>**kargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/Stoner/Core.html#Data.format"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#Stoner.Core.Data.format" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the contents of key pretty formatted using <code class="xref py py-func docutils literal"><span class="pre">format_error()</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>fmt</strong> (<em>str</em>) – Specify the output format, opyions are:<ul>
<li>“text” - plain text output</li>
<li>“latex” - latex output</li>
<li>“html” - html entities</li>
</ul>
</li>
<li><strong>escape</strong> (<em>bool</em>) – Specifies whether to escape the prefix and units for unprintable characters in non text formats )default False)</li>
<li><strong>mode</strong> (<em>string</em>) – If “float” (default) the number is formatted as is, if “eng” the value and error is converted
to the next samllest power of 1000 and the appropriate SI index appended. If mode is “sci” then a scientifc,
i.e. mantissa and exponent format is used.</li>
<li><strong>units</strong> (<em>string</em>) – A suffix providing the units of the value. If si mode is used, then appropriate si prefixes are
prepended to the units string. In LaTeX mode, the units string is embedded in mathrm</li>
<li><strong>prefix</strong> (<em>string</em>) – A prefix string that should be included before the value and error string. in LaTeX mode this is
inside the math-mode markers, but not embedded in mathrm.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A pretty string representation.</p>
</td>
</tr>
</tbody>
</table>
<p>The if key=”key”, then the value is self[“key”], the error is self[“key err”], the default prefix is self[“key label”]+”=” or “key=”,
the units are self[“key units”] or “”.</p>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>item</em>, <em>default=None</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.get" title="Permalink to this definition">¶</a></dt>
<dd><p>A wrapper around __get_item__ that handles missing keys by returning None.</p>
<p>This is useful for the <code class="xref py py-class docutils literal"><span class="pre">Stoner.Folder.DataFolder</span></code> class.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>item</strong> (<em>string</em>) – A string representing the metadata keyname</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><strong>default</strong> (<a class="reference internal" href="Stoner.Core.DataArray.html#Stoner.Core.DataArray.any" title="Stoner.Core.DataArray.any"><em>any</em></a>) – Default value to return if key not found</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><em>mixed</em> – self.metadata[item] or None if item not in self.metadata</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.get_filename">
<code class="descname">get_filename</code><span class="sig-paren">(</span><em>mode</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.get_filename" title="Permalink to this definition">¶</a></dt>
<dd><p>Forces the user to choose a new filename using a system dialog box.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>mode</strong> (<em>string</em>) – The mode of file operation to be used when calling the dialog box</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><em>str</em> – The new filename</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The filename attribute of the current instance is updated by this method as well.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.griddata">
<code class="descname">griddata</code><span class="sig-paren">(</span><em>xcol=None</em>, <em>ycol=None</em>, <em>zcol=None</em>, <em>shape=None</em>, <em>xlim=None</em>, <em>ylim=None</em>, <em>method='linear'</em>, <em>**kargs</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.griddata" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to convert xyz data onto a regular grid.</p>
<p>Args:
xcol (index): Column to be used for the X-Data
ycol (index): column to be used for Y-Data - default value is column to the right of the x-data column
zcol (index): column to be used for the Z-data - default value is the column to the right of the y-data column</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><ul class="first last simple">
<li><strong>shape</strong> (<em>two-tuple</em>) – Number of points along x and y in the grid - defaults to a square of sidelength = square root of the length of the data.</li>
<li><strong>xlim</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#tuple" title="(in Python v2.7)"><em>tuple</em></a>) – The xlimits</li>
<li><strong>ylim</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#tuple" title="(in Python v2.7)"><em>tuple</em></a>) – </li>
<li><strong>method</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) – Type of interploation to use, default is linear</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>ReturnsL</dt>
<dd>X,Y,Z three two dimensional arrays of the co-ordinates of the interpolated data</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.image_plot">
<code class="descname">image_plot</code><span class="sig-paren">(</span><em>xcol=None</em>, <em>ycol=None</em>, <em>zcol=None</em>, <em>shape=None</em>, <em>xlim=None</em>, <em>ylim=None</em>, <em>**kargs</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.image_plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Grid up the three columns of data and plot.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>xcol</strong> (<em>index</em>) – Column to be used for the X-Data</li>
<li><strong>ycol</strong> (<em>index</em>) – column to be used for Y-Data - default value is column to the right of the x-data column</li>
<li><strong>zcol</strong> (<em>index</em>) – column to be used for the Z-data - default value is the column to the right of the y-data column</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><ul class="first simple">
<li><strong>shape</strong> (<em>two-tuple</em>) – Number of points along x and y in the grid - defaults to a square of sidelength = square root of the length of the data.</li>
<li><strong>xlim</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#tuple" title="(in Python v2.7)"><em>tuple</em></a>) – The xlimits, defaults to automatically determined from data</li>
<li><strong>ylim</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#tuple" title="(in Python v2.7)"><em>tuple</em></a>) – The ylimits, defaults to automatically determined from data</li>
<li><strong>xlabel</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) – </li>
<li><strong>ylabel</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) – Y axes label, Default is None - guess from metadata</li>
<li><strong>zlabel</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) – Z axis label, Default is None - guess from metadata</li>
<li><strong>plotter</strong> (<em>function</em>) – Function to use to plot data. Defaults to plt.contour</li>
<li><strong>show_plot</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – Turn on interfactive plotting and show plot when drawn</li>
<li><strong>save_filename</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a><em> or </em><a class="reference external" href="https://docs.python.org/2/library/constants.html#None" title="(in Python v2.7)"><em>None</em></a>) – If set to a string, save the plot with this filename</li>
<li><strong>figure</strong> (<em>integer</em><em> or </em><a class="reference external" href="http://matplotlib.org/api/figure_api.html#module-matplotlib.figure" title="(in Matplotlib v2.1.0)"><em>matplotlib.figure</em></a><em> or </em><em>boolean</em>) – Controls which figure is used for the plot, or if a new figure is opened.</li>
<li><strong>**kargs</strong> (<a class="reference external" href="https://docs.python.org/2/library/stdtypes.html#dict" title="(in Python v2.7)"><em>dict</em></a>) – Other arguments are passed on to the plotter.</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A matplotlib figure</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.insert_rows">
<code class="descname">insert_rows</code><span class="sig-paren">(</span><em>row</em>, <em>new_data</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.insert_rows" title="Permalink to this definition">¶</a></dt>
<dd><p>Insert new_data into the data array at position row. This is a wrapper for numpy.insert.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>row</strong> (<em>int</em>) – Data row to insert into</li>
<li><strong>new_data</strong> (<em>numpy array</em>) – An array with an equal number of columns as the main data array containing the new row(s) of data to insert</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><em>self</em> – A copy of the modified <a class="reference internal" href="Stoner.Core.DataFile.html#Stoner.Core.DataFile" title="Stoner.Core.DataFile"><code class="xref py py-class docutils literal"><span class="pre">DataFile</span></code></a> object</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.inset">
<code class="descname">inset</code><span class="sig-paren">(</span><em>parent=None</em>, <em>loc=None</em>, <em>width=0.35</em>, <em>height=0.3</em>, <em>**kargs</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.inset" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a new set of axes as an inset to the current plot.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><ul class="first simple">
<li><strong>parent</strong> (<em>matplotlib axes</em>) – Which set of axes to add inset to, defaults to the current set</li>
<li><strong>loc</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a><em> or </em><a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) – Inset location - can be a string like <em>top right</em> or <em>upper right</em> or a number.</li>
<li><strong>width</strong><strong>,</strong><strong>height</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a><em>,</em><a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a><em> or </em><a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) – </li>
<li><strong>kargs</strong> (<em>dictionary</em>) – all other keywords are passed through to inset_locator.inset_axes</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A new set of axes</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.integrate">
<code class="descname">integrate</code><span class="sig-paren">(</span><em>xcol=None</em>, <em>ycol=None</em>, <em>result=None</em>, <em>result_name=None</em>, <em>bounds=&lt;function AnalysisMixin.&lt;lambda&gt;&gt;</em>, <em>**kargs</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.integrate" title="Permalink to this definition">¶</a></dt>
<dd><p>Inegrate a column of data, optionally returning the cumulative integral.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>xcol</strong> (<em>index</em>) – The X data column index (or header)</li>
<li><strong>ycol</strong> (<em>index) The Y data column index (or header</em>)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><ul class="first simple">
<li><strong>result</strong> (<em>index</em><em> or </em><a class="reference external" href="https://docs.python.org/2/library/constants.html#None" title="(in Python v2.7)"><em>None</em></a>) – Either a column index (or header) to overwrite with the cumulative data,
or True to add a new column or None to not store the cumulative result.</li>
<li><strong>result_name</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) – The new column header for the results column (if specified)</li>
<li><strong>bounds</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#callable" title="(in Python v2.7)"><em>callable</em></a>) – A function that evaluates for each row to determine if the data should be integrated over.</li>
<li><strong>kargs</strong> – Other keyword arguements are fed direct to the scipy.integrate.cumtrapz method</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The final integration result</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This is a pass through to the scipy.integrate.cumtrapz routine which just uses trapezoidal integration. A better alternative would be
to offer a variety of methods including simpson’s rule and interpolation of data. If xcol or ycol are not specified then
the current values from the <a class="reference internal" href="Stoner.Core.DataFile.html#Stoner.Core.DataFile.setas" title="Stoner.Core.DataFile.setas"><code class="xref py py-attr docutils literal"><span class="pre">Stoner.Core.DataFile.setas</span></code></a> attribute are used.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.interpolate">
<code class="descname">interpolate</code><span class="sig-paren">(</span><em>newX</em>, <em>kind='linear'</em>, <em>xcol=None</em>, <em>replace=False</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.interpolate" title="Permalink to this definition">¶</a></dt>
<dd><p>Interpolate a dataset to get a new set of values for a given set of x data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>ewX</strong> (<em>1D array or None</em>) – Row indices or X column values to interpolate with. If None, then the</li>
<li><strong>:py:meth:`AnalysisMixin.interpolate` returns an interpolation function. Unlike the raw interpolation</strong></li>
<li><strong>function from scipy, this interpolation function will work with MaskedArrays by compressing them</strong></li>
<li><strong>first.</strong></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><ul class="first simple">
<li><strong>kind</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) – Type of interpolation function to use - does a pass through from numpy. Default is linear.</li>
<li><strong>xcol</strong> (<em>index</em><em> or </em><a class="reference external" href="https://docs.python.org/2/library/constants.html#None" title="(in Python v2.7)"><em>None</em></a>) – Column index or label that contains the data to use with newX to determine which rows to return. Defaults to None.</li>
<li><strong>replace</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – If true, then the current AnalysisMixin’s data is replaced with the  newly interpolated data and the current AnalysisMixin is
returned.</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><em>2D numpy array</em> – representing a section of the current object’s data if replace is False(default) or the modofied AnalysisMixin if replace is true.</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Returns complete rows of data corresponding to the indices given in newX. if xcol is None, then newX is interpreted as (fractional) row indices.
Otherwise, the column specified in xcol is thresholded with the values given in newX and the resultant row indices used to return the data.</p>
<p class="last">If the positional argument, newX is None, then the return value is an interpolation function. This interpolation function takes one argument
- if <em>xcol</em> was None, this argument is interpreted as array indices, but if <em>xcol</em> was specified, then this argument is interpreted as
an array of xvalues.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.items">
<code class="descname">items</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; a set-like object providing a view on D's items<a class="headerlink" href="#Stoner.Core.Data.items" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.keys">
<code class="descname">keys</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.keys" title="Permalink to this definition">¶</a></dt>
<dd><p>An alias for <code class="xref py py-meth docutils literal"><span class="pre">DataFile.dir(None)()</span></code> .</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a list of all the keys in the metadata dictionary</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.lmfit">
<code class="descname">lmfit</code><span class="sig-paren">(</span><em>model</em>, <em>xcol=None</em>, <em>ycol=None</em>, <em>p0=None</em>, <em>sigma=None</em>, <em>**kargs</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.lmfit" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper around lmfit module fitting.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>model</strong> (<em>lmfit.Model</em>) – An instance of an lmfit.Model that represents the model to be fitted to the data</li>
<li><strong>xcol</strong> (<em>index or None</em>) – Columns to be used for the x  data for the fitting. If not givem defaults to the <a class="reference internal" href="Stoner.Core.DataFile.html#Stoner.Core.DataFile.setas" title="Stoner.Core.DataFile.setas"><code class="xref py py-attr docutils literal"><span class="pre">Stoner.Core.DataFile.setas</span></code></a> x column</li>
<li><strong>ycol</strong> (<em>index or None</em>) – Columns to be used for the  y data for the fitting. If not givem defaults to the <a class="reference internal" href="Stoner.Core.DataFile.html#Stoner.Core.DataFile.setas" title="Stoner.Core.DataFile.setas"><code class="xref py py-attr docutils literal"><span class="pre">Stoner.Core.DataFile.setas</span></code></a> y column</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><ul class="first simple">
<li><strong>p0</strong> (<em>list</em><em>, </em><a class="reference external" href="https://docs.python.org/2/library/functions.html#tuple" title="(in Python v2.7)"><em>tuple</em></a><em> or </em><a class="reference external" href="https://docs.python.org/2/library/array.html#module-array" title="(in Python v2.7)"><em>array</em></a>) – A vector of initial parameter values to try.</li>
<li><strong>sigma</strong> (<em>index</em>) – The index of the column with the y-error bars</li>
<li><strong>bounds</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#callable" title="(in Python v2.7)"><em>callable</em></a>) – A callable object that evaluates true if a row is to be included. Should be of the form f(x,y)</li>
<li><strong>result</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – Determines whether the fitted data should be added into the DataFile object. If result is True then
the last column will be used. If result is a string or an integer then it is used as a column index.
Default to None for not adding fitted data</li>
<li><strong>replace</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – Inidcatesa whether the fitted data replaces existing data or is inserted as a new column (default False)</li>
<li><strong>header</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a><em> or </em><a class="reference external" href="https://docs.python.org/2/library/constants.html#None" title="(in Python v2.7)"><em>None</em></a>) – If this is a string then it is used as the name of the fitted data. (default None)</li>
<li><strong>scale_covar</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – whether to automatically scale covariance matrix (leastsq only)</li>
<li><strong>output</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a><em>, </em><em>default &quot;fit&quot;</em>) – Specifiy what to return.</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The lmfit module will refurn an instance of the <code class="xref py py-class docutils literal"><span class="pre">lmfit.models.ModelFit</span></code> class that contains all
relevant information about the fit.</p>
</td>
</tr>
</tbody>
</table>
<dl class="docutils">
<dt>The return value is determined by the <em>output</em> parameter. Options are</dt>
<dd><ul class="first last simple">
<li>“ffit”    just the <code class="xref py py-class docutils literal"><span class="pre">lmfit.model.ModelFit</span></code> instance</li>
<li>“row”     just a one dimensional numpy array of the fit paraeters interleaved with their uncertainties</li>
<li>“full”    a tuple of the fit instance and the row.</li>
<li>“data”    a copy of the <a class="reference internal" href="Stoner.Core.DataFile.html#Stoner.Core.DataFile" title="Stoner.Core.DataFile"><code class="xref py py-class docutils literal"><span class="pre">Stoner.Core.DataFile</span></code></a> object with the fit recorded in the emtadata and optinally as a column of data.</li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-meth docutils literal"><span class="pre">AnalysisMixin.curve_fit()</span></code>
User guide section <a class="reference internal" href="../UserGuide/analysisfile.html#fitting-with-limits"><span class="std std-ref">Fitting with limits</span></a></p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If <em>p0</em> is fed a 2D array, then it assumed that you want to calculate <span class="math">\(\chi^2\)</span> for different starting parameters
with some variables fixed. In this mode, fitting is carried out repeatedly with each row representing one attempt with different
values of the parameters. In this mode the return value is a 2D array whose rows correspond to the inputs to the rows of p0, the
columns are the fitted values of the parameters with an additional column for <span class="math">\(\chi^2\)</span>.</p>
</div>
<p class="rubric">Example</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;Simple use of lmfit to fit data.&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">Stoner</span> <span class="kn">import</span> <span class="n">Data</span>
<span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">linspace</span><span class="p">,</span><span class="n">exp</span><span class="p">,</span><span class="n">random</span>

<span class="c1">#Make some data</span>
<span class="n">x</span><span class="o">=</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mf">10.0</span><span class="p">,</span><span class="mi">101</span><span class="p">)</span>
<span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="o">+</span><span class="mi">4</span><span class="o">*</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">x</span><span class="o">/</span><span class="mf">1.7</span><span class="p">)</span><span class="o">+</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">scale</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span><span class="n">size</span><span class="o">=</span><span class="mi">101</span><span class="p">)</span>

<span class="n">d</span><span class="o">=</span><span class="n">Data</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">column_headers</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Time&quot;</span><span class="p">,</span><span class="s2">&quot;Signal&quot;</span><span class="p">],</span><span class="n">setas</span><span class="o">=</span><span class="s2">&quot;xy&quot;</span><span class="p">)</span>

<span class="n">d</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fmt</span><span class="o">=</span><span class="s2">&quot;ro&quot;</span><span class="p">)</span> <span class="c1"># plot our data</span>

<span class="c1">#Do the fitting and plot the result</span>
<span class="n">fit</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">lmfit</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="p">,</span><span class="n">C</span><span class="p">:</span><span class="n">A</span><span class="o">+</span><span class="n">B</span><span class="o">*</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">x</span><span class="o">/</span><span class="n">C</span><span class="p">),</span><span class="n">result</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">header</span><span class="o">=</span><span class="s2">&quot;Fit&quot;</span><span class="p">,</span><span class="n">A</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">B</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">C</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">d</span><span class="o">.</span><span class="n">setas</span><span class="o">=</span><span class="s2">&quot;x.y&quot;</span>
<span class="n">d</span><span class="o">.</span><span class="n">labels</span><span class="o">=</span><span class="p">[]</span>
<span class="n">d</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fmt</span><span class="o">=</span><span class="s2">&quot;b-&quot;</span><span class="p">)</span>

<span class="c1"># Make nice label of the parameters</span>
<span class="n">text</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;$y=A+Be^{-x/C}$&quot;</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span>
<span class="n">text</span><span class="o">+=</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">d</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="n">latex</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Model:A&quot;</span><span class="p">,</span><span class="s2">&quot;Model:B&quot;</span><span class="p">,</span><span class="s2">&quot;Model:C&quot;</span><span class="p">]])</span>
<span class="n">d</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="n">text</span><span class="p">,</span><span class="n">fontdict</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;size&quot;</span><span class="p">:</span><span class="s2">&quot;x-small&quot;</span><span class="p">})</span>
<span class="n">d</span><span class="o">.</span><span class="n">title</span><span class="o">=</span><span class="sa">u</span><span class="s2">&quot;Levenberg-Marquardt Fit&quot;</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../samples/lmfit_simple.png">png</a>, <a class="reference external" href="../samples/lmfit_simple.hires.png">hires.png</a>, <a class="reference external" href="../samples/lmfit_simple.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/lmfit_simple.png" src="../_images/lmfit_simple.png" />
</div>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.load">
<code class="descname">load</code><span class="sig-paren">(</span><em>filename=None</em>, <em>auto_load=True</em>, <em>filetype=None</em>, <em>*args</em>, <em>**kargs</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads the <a class="reference internal" href="Stoner.Core.DataFile.html#Stoner.Core.DataFile" title="Stoner.Core.DataFile"><code class="xref py py-class docutils literal"><span class="pre">DataFile</span></code></a> in from disc guessing a better subclass if necessary.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>filename</strong> (<em>string or None</em>) – path to file to load</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><ul class="first simple">
<li><strong>auto_load</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – If True (default) then the load routine tries all the subclasses of <a class="reference internal" href="Stoner.Core.DataFile.html#Stoner.Core.DataFile" title="Stoner.Core.DataFile"><code class="xref py py-class docutils literal"><span class="pre">DataFile</span></code></a> in turn to load the file</li>
<li><strong>filetype</strong> (<a class="reference internal" href="Stoner.Core.DataFile.html#Stoner.Core.DataFile" title="Stoner.Core.DataFile"><code class="xref py py-class docutils literal"><span class="pre">DataFile</span></code></a>) – If not none then tries using filetype as the loader</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><em>DataFile</em> – A copy of the loaded <a class="reference internal" href="Stoner.Core.DataFile.html#Stoner.Core.DataFile" title="Stoner.Core.DataFile"><code class="xref py py-data docutils literal"><span class="pre">DataFile</span></code></a> instance</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Possible subclasses to try and load from are identified at run time using the speciall <a class="reference internal" href="Stoner.Core.DataFile.html#Stoner.Core.DataFile.subclasses" title="Stoner.Core.DataFile.subclasses"><code class="xref py py-attr docutils literal"><span class="pre">DataFile.subclasses</span></code></a> attribute.</p>
<p>Some subclasses can be found in the <a class="reference internal" href="../Stoner.html#module-Stoner.FileFormats" title="Stoner.FileFormats"><code class="xref py py-mod docutils literal"><span class="pre">Stoner.FileFormats</span></code></a> module.</p>
<p>Each subclass is scanned in turn for a class attribute priority which governs the order in which they are tried. Subclasses which can
make an early positive determination that a file has the correct format can have higher priority levels. Classes should return
a suitable expcetion if they fail to load the file.</p>
<p class="last">If not class can load a file successfully then a RunttimeError exception is raised.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.make_bins">
<code class="descname">make_bins</code><span class="sig-paren">(</span><em>xcol</em>, <em>bins</em>, <em>mode='lin'</em>, <em>**kargs</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.make_bins" title="Permalink to this definition">¶</a></dt>
<dd><p>Utility method to generate bin boundaries and centres along an axis.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>xcol</strong> (<em>index</em>) – Column of data with X values</li>
<li><strong>bins</strong> (<em>1d_)array or int or float</em>) – Number of bins (int) or width of bins (if float)</li>
<li><strong>mode</strong> (<em>string</em>) – “lin” for linear binning, “log” for logarithmic binning.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><ul class="first simple">
<li><strong>bin_start</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – Override minimum bin value</li>
<li><strong>bin_stop</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – Override the maximum bin value</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><em>bin_start,bin_stop,bin_centres (1D arrays)</em> – The locations of the bin
boundaries and centres for each bin.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.max">
<code class="descname">max</code><span class="sig-paren">(</span><em>column=None</em>, <em>bounds=None</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.max" title="Permalink to this definition">¶</a></dt>
<dd><p>FInd maximum value and index in a column of data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>column</strong> (<em>index</em>) – Column to look for the maximum in</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><strong>bounds</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#callable" title="(in Python v2.7)"><em>callable</em></a>) – A callable function that takes a single argument list of
numbers representing one row, and returns True for all rows to search in.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><em>(float,int)</em> – (maximum value,row index of max value)</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If column is not defined (or is None) the <a class="reference internal" href="Stoner.Core.DataFile.html#Stoner.Core.DataFile.setas" title="Stoner.Core.DataFile.setas"><code class="xref py py-attr docutils literal"><span class="pre">DataFile.setas</span></code></a> column
assignments are used.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.mean">
<code class="descname">mean</code><span class="sig-paren">(</span><em>column=None</em>, <em>sigma=None</em>, <em>bounds=None</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.mean" title="Permalink to this definition">¶</a></dt>
<dd><p>FInd mean value of a data column.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>column</strong> (<em>index</em>) – Column to look for the maximum in</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><ul class="first simple">
<li><strong>sigma</strong> (<em>column index</em><em> or </em><a class="reference external" href="https://docs.python.org/2/library/array.html#module-array" title="(in Python v2.7)"><em>array</em></a>) – The uncertainity noted for each value in the mean</li>
<li><strong>bounds</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#callable" title="(in Python v2.7)"><em>callable</em></a>) – A callable function that takes a single argument list of
numbers representing one row, and returns True for all rows to search in.</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><em>float</em> – The mean of the data.</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If column is not defined (or is None) the <a class="reference internal" href="Stoner.Core.DataFile.html#Stoner.Core.DataFile.setas" title="Stoner.Core.DataFile.setas"><code class="xref py py-attr docutils literal"><span class="pre">DataFile.setas</span></code></a> column
assignments are used.</p>
</div>
<div class="admonition-todo admonition" id="index-1">
<p class="first admonition-title">Todo</p>
<p class="last">Fix the row index when the bounds function is used - see note of  max</p>
</div>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.min">
<code class="descname">min</code><span class="sig-paren">(</span><em>column=None</em>, <em>bounds=None</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.min" title="Permalink to this definition">¶</a></dt>
<dd><p>FInd minimum value and index in a column of data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>column</strong> (<em>index</em>) – Column to look for the maximum in</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><strong>bounds</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#callable" title="(in Python v2.7)"><em>callable</em></a>) – A callable function that takes a single argument list of
numbers representing one row, and returns True for all rows to search in.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><em>(float,int)</em> – (minimum value,row index of min value)</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If column is not defined (or is None) the <a class="reference internal" href="Stoner.Core.DataFile.html#Stoner.Core.DataFile.setas" title="Stoner.Core.DataFile.setas"><code class="xref py py-attr docutils literal"><span class="pre">DataFile.setas</span></code></a> column
assignments are used.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.multiply">
<code class="descname">multiply</code><span class="sig-paren">(</span><em>a</em>, <em>b</em>, <em>replace=False</em>, <em>header=None</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.multiply" title="Permalink to this definition">¶</a></dt>
<dd><p>Multiply one column (a) by  another column, number or array (b).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>a</strong> (<em>index</em>) – First column to work with</li>
<li><strong>b</strong> (<em>index, float or 1D array</em>) – Second column to work with.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><ul class="first simple">
<li><strong>header</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a><em> or </em><a class="reference external" href="https://docs.python.org/2/library/constants.html#None" title="(in Python v2.7)"><em>None</em></a>) – new column header  (defaults to a-b</li>
<li><strong>replace</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – Replace the a column with the new data</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><em>self</em> – The newly modified <code class="xref py py-class docutils literal"><span class="pre">AnalysisMixin</span></code>.</p>
</td>
</tr>
</tbody>
</table>
<p>If a and b are tuples of length two, then the firstelement is assumed to be the value and
the second element an uncertainty in the value. The uncertainties will then be propagated and an
additional column with the uncertainites will be added to the data.</p>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.normalise">
<code class="descname">normalise</code><span class="sig-paren">(</span><em>target=None</em>, <em>base=None</em>, <em>replace=True</em>, <em>header=None</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.normalise" title="Permalink to this definition">¶</a></dt>
<dd><p>Normalise data columns by dividing through by a base column value.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>target</strong> (<em>index</em>) – One or more target columns to normalise can be a string, integer or list of strings or integers. If None then the default ‘y’ column is used.</li>
<li><strong>base</strong> (<em>index</em>) – The column to normalise to, can be an integer or string. If None then the target column is normalised to the range (-1,+1) of (0,1)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><ul class="first simple">
<li><strong>replace</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – Set True(default) to overwrite  the target data columns</li>
<li><strong>header</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a><em> or </em><a class="reference external" href="https://docs.python.org/2/library/constants.html#None" title="(in Python v2.7)"><em>None</em></a>) – The new column header - default is target name(norm)</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><em>self</em> – The newly modified <code class="xref py py-class docutils literal"><span class="pre">AnalysisMixin</span></code>.</p>
</td>
</tr>
</tbody>
</table>
<p>If a and b are tuples of length two, then the firstelement is assumed to be the value and
the second element an uncertainty in the value. The uncertainties will then be propagated and an
additional column with the uncertainites will be added to the data.</p>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.odr">
<code class="descname">odr</code><span class="sig-paren">(</span><em>model</em>, <em>xcol=None</em>, <em>ycol=None</em>, <em>sigma_x=None</em>, <em>sigma_y=None</em>, <em>**kargs</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.odr" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper around scipy.odr orthogonal distance regression fitting.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>model</strong> (<em>scipy.odr.Model, lmfit.models.Model or callable</em>) – Tje model that describes the data. See below for more details.</li>
<li><strong>xcol</strong> (<em>index or None</em>) – Columns to be used for the x  data for the fitting. If not givem defaults to the <a class="reference internal" href="Stoner.Core.DataFile.html#Stoner.Core.DataFile.setas" title="Stoner.Core.DataFile.setas"><code class="xref py py-attr docutils literal"><span class="pre">Stoner.Core.DataFile.setas</span></code></a> x column</li>
<li><strong>ycol</strong> (<em>index or None</em>) – Columns to be used for the  y data for the fitting. If not givem defaults to the <a class="reference internal" href="Stoner.Core.DataFile.html#Stoner.Core.DataFile.setas" title="Stoner.Core.DataFile.setas"><code class="xref py py-attr docutils literal"><span class="pre">Stoner.Core.DataFile.setas</span></code></a> y column</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><ul class="first simple">
<li><strong>p0</strong> (<em>list</em><em>, </em><a class="reference external" href="https://docs.python.org/2/library/functions.html#tuple" title="(in Python v2.7)"><em>tuple</em></a><em> or </em><a class="reference external" href="https://docs.python.org/2/library/array.html#module-array" title="(in Python v2.7)"><em>array</em></a>) – A vector of initial parameter values to try.</li>
<li><strong>sigma_x</strong> (<em>index</em>) – The index of the column with the x-error bars</li>
<li><strong>sigma_y</strong> (<em>index</em>) – The index of the column with the x-error bars</li>
<li><strong>bounds</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#callable" title="(in Python v2.7)"><em>callable</em></a>) – A callable object that evaluates true if a row is to be included. Should be of the form f(x,y)</li>
<li><strong>result</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – Determines whether the fitted data should be added into the DataFile object. If result is True then
the last column will be used. If result is a string or an integer then it is used as a column index.
Default to None for not adding fitted data</li>
<li><strong>replace</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – Inidcatesa whether the fitted data replaces existing data or is inserted as a new column (default False)</li>
<li><strong>header</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a><em> or </em><a class="reference external" href="https://docs.python.org/2/library/constants.html#None" title="(in Python v2.7)"><em>None</em></a>) – If this is a string then it is used as the name of the fitted data. (default None)</li>
<li><strong>output</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a><em>, </em><em>default &quot;fit&quot;</em>) – Specifiy what to return.</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><dl class="docutils">
<dt>The return value is determined by the <em>output</em> parameter. Options are</dt>
<dd><ul class="first last simple">
<li>”fit”    just the <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.odr.Output.html#scipy.odr.Output" title="(in SciPy v1.0.0)"><code class="xref py py-class docutils literal"><span class="pre">scipy.odr.Output</span></code></a> instance (default)</li>
<li>”row”     just a one dimensional numpy array of the fit paraeters interleaved with their uncertainties</li>
<li>”full”    a tuple of the fit instance and the row.</li>
<li>”data”    a copy of the <a class="reference internal" href="Stoner.Core.DataFile.html#Stoner.Core.DataFile" title="Stoner.Core.DataFile"><code class="xref py py-class docutils literal"><span class="pre">Stoner.Core.DataFile</span></code></a> object with the fit recorded in the emtadata and optinally as a column of data.</li>
</ul>
</dd>
</dl>
</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>The function tries to make use of whatever model you give it. Specifically, it accepts:</p>
<blockquote>
<div><ul class="simple">
<li>A subclass or an instance of <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.odr.Model.html#scipy.odr.Model" title="(in SciPy v1.0.0)"><code class="xref py py-class docutils literal"><span class="pre">scipy.odr.Model</span></code></a> : this is the native model type for the underlying scipy odr package.</li>
<li>A subclass or instance of an lmfit.models.Model: the <a class="reference internal" href="../Stoner.html#module-Stoner.Fit" title="Stoner.Fit"><code class="xref py py-mod docutils literal"><span class="pre">Stoner.Fit</span></code></a> module has a number of useful prebuilt lmfit models that can be used directly
by this function.</li>
<li>A callable function which should have a signature f(x,parameter1,parameter2…) and <em>not</em> the scip.odr stadnard f(beta,x)</li>
</ul>
</div></blockquote>
<p>This function ois designed to be as compatible as possible with <code class="xref py py-meth docutils literal"><span class="pre">AnalysisMixin.curve_fit()</span></code> and  <code class="xref py py-meth docutils literal"><span class="pre">AnalysisMixin.lmfit()</span></code>
to facilitate easy of switching between them.</p>
<p class="rubric">Example</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;Simple use of lmfit to fit data.&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">Stoner</span> <span class="kn">import</span> <span class="n">Data</span>
<span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">linspace</span><span class="p">,</span><span class="n">exp</span><span class="p">,</span><span class="n">random</span>

<span class="c1">#Make some data</span>
<span class="n">x</span><span class="o">=</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mf">10.0</span><span class="p">,</span><span class="mi">101</span><span class="p">)</span>
<span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="o">+</span><span class="mi">4</span><span class="o">*</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">x</span><span class="o">/</span><span class="mf">1.7</span><span class="p">)</span><span class="o">+</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">scale</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span><span class="n">size</span><span class="o">=</span><span class="mi">101</span><span class="p">)</span>

<span class="n">d</span><span class="o">=</span><span class="n">Data</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">column_headers</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Time&quot;</span><span class="p">,</span><span class="s2">&quot;Signal&quot;</span><span class="p">],</span><span class="n">setas</span><span class="o">=</span><span class="s2">&quot;xy&quot;</span><span class="p">)</span>

<span class="n">d</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fmt</span><span class="o">=</span><span class="s2">&quot;ro&quot;</span><span class="p">)</span> <span class="c1"># plot our data</span>

<span class="c1">#Do the fitting and plot the result</span>
<span class="n">fit</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">lmfit</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="p">,</span><span class="n">C</span><span class="p">:</span><span class="n">A</span><span class="o">+</span><span class="n">B</span><span class="o">*</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">x</span><span class="o">/</span><span class="n">C</span><span class="p">),</span><span class="n">result</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">header</span><span class="o">=</span><span class="s2">&quot;Fit&quot;</span><span class="p">,</span><span class="n">A</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">B</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">C</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">d</span><span class="o">.</span><span class="n">setas</span><span class="o">=</span><span class="s2">&quot;x.y&quot;</span>
<span class="n">d</span><span class="o">.</span><span class="n">labels</span><span class="o">=</span><span class="p">[]</span>
<span class="n">d</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fmt</span><span class="o">=</span><span class="s2">&quot;b-&quot;</span><span class="p">)</span>

<span class="c1"># Make nice label of the parameters</span>
<span class="n">text</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;$y=A+Be^{-x/C}$&quot;</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span>
<span class="n">text</span><span class="o">+=</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">d</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="n">latex</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;Model:A&quot;</span><span class="p">,</span><span class="s2">&quot;Model:B&quot;</span><span class="p">,</span><span class="s2">&quot;Model:C&quot;</span><span class="p">]])</span>
<span class="n">d</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="n">text</span><span class="p">,</span><span class="n">fontdict</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;size&quot;</span><span class="p">:</span><span class="s2">&quot;x-small&quot;</span><span class="p">})</span>
<span class="n">d</span><span class="o">.</span><span class="n">title</span><span class="o">=</span><span class="sa">u</span><span class="s2">&quot;Levenberg-Marquardt Fit&quot;</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../samples/lmfit_simple.png">png</a>, <a class="reference external" href="../samples/lmfit_simple.hires.png">hires.png</a>, <a class="reference external" href="../samples/lmfit_simple.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/lmfit_simple.png" src="../_images/lmfit_simple.png" />
</div>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><code class="xref py py-meth docutils literal"><span class="pre">AnalysisMixin.curve_fit()</span></code>
<code class="xref py py-meth docutils literal"><span class="pre">AnalysisMixin.lmfit()</span></code>
User guide section <a class="reference internal" href="../UserGuide/analysisfile.html#fitting-with-limits"><span class="std std-ref">Fitting with limits</span></a></p>
</div>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.outlier_detection">
<code class="descname">outlier_detection</code><span class="sig-paren">(</span><em>column=None</em>, <em>window=7</em>, <em>certainty=3.0</em>, <em>action='mask'</em>, <em>width=1</em>, <em>func=None</em>, <em>**kargs</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.outlier_detection" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to detect outliers in a column of data.</p>
<blockquote>
<div><dl class="docutils">
<dt>Args:</dt>
<dd><dl class="first last docutils">
<dt>column(column index), specifing column for outlier detection. If not set,</dt>
<dd>defaults to the current y set column.</dd>
</dl>
</dd>
<dt>Keyword Arguments:</dt>
<dd><p class="first">window(int): data window for anomoly detection
certainty(float): eg 3 detects data 3 standard deviations from average
action(str or callable): what to do with outlying points, options are</p>
<blockquote>
<div><ul class="simple">
<li>‘mask’ outlier points are masked (default)</li>
<li>‘mask row’ outlier rows are masked</li>
<li>‘delete’  outlier rows are deleted</li>
<li>callable  the value of the action keyword is called with the outlier row</li>
<li>anything else defaults to do nothing.</li>
</ul>
</div></blockquote>
<p class="last">width(odd integer): Number of rows that an outliing spike could occupy. Defaults to 1.
func (callable): A function that determines if the current row is an outlier.</p>
</dd>
<dt>Returns:</dt>
<dd>self: The newly modified <code class="xref py py-class docutils literal"><span class="pre">AnalysisMixin</span></code>.</dd>
</dl>
<p>outlier_detection will add row numbers of detected outliers to the metadata
of d, also will perform action depending on request eg ‘mask’, ‘delete’
(any other action defaults to doing nothing).</p>
<p>The detection looks at a window of the data, takes the average and looks
to see if the current data point falls certainty * std deviations away from
data average.</p>
<p>The outlier detection function has the signatrure:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">outlier</span><span class="p">(</span><span class="n">row</span><span class="p">,</span><span class="n">column</span><span class="p">,</span><span class="n">window</span><span class="p">,</span><span class="n">certainity</span><span class="p">,</span><span class="o">**</span><span class="n">kargs</span><span class="p">)</span>
    <span class="c1">#code</span>
    <span class="k">return</span> <span class="kc">True</span> <span class="c1"># or False</span>
</pre></div>
</div>
<p>All extra keyword arguments are passed to the outlier detector.</p>
<p>IF <em>action</em> is a callable function then it should take the form of:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">action</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">column</span><span class="p">,</span><span class="n">row</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>where <em>i</em> is the number of the outlier row, <em>column</em> the same value as above
and <em>row</em> is the data for the row.</p>
<p>In all cases the indices of the outlier rows are added to the ;outlier’ metadata.</p>
</div></blockquote>
<dl class="docutils">
<dt>Example</dt>
<dd><div class="first highlight-python"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;Detect outlying points from a lione.&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">Stoner</span> <span class="kn">import</span> <span class="n">Data</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="n">x</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">201</span><span class="p">)</span>
<span class="n">y</span><span class="o">=</span><span class="mf">0.01</span><span class="o">*</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="mi">5</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="o">/</span><span class="mf">10.0</span><span class="p">)</span>

<span class="n">i</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">-</span><span class="mi">20</span><span class="p">,</span><span class="n">size</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span><span class="o">+</span><span class="mi">10</span>
<span class="n">y</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">+=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">i</span><span class="p">),</span><span class="n">scale</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>

<span class="n">d</span><span class="o">=</span><span class="n">Data</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">column_stack</span><span class="p">((</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)),</span><span class="n">column_headers</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span><span class="s2">&quot;y&quot;</span><span class="p">],</span><span class="n">setas</span><span class="o">=</span><span class="s2">&quot;xy&quot;</span><span class="p">)</span>
<span class="n">d</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fmt</span><span class="o">=</span><span class="s2">&quot;b.&quot;</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;raw data&quot;</span><span class="p">)</span>
<span class="n">e</span><span class="o">=</span><span class="n">d</span><span class="o">.</span><span class="n">clone</span>
<span class="n">e</span><span class="o">.</span><span class="n">outlier_detection</span><span class="p">(</span><span class="n">window</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span><span class="n">action</span><span class="o">=</span><span class="s2">&quot;delete&quot;</span><span class="p">)</span>
<span class="n">e</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fmt</span><span class="o">=</span><span class="s2">&quot;r-&quot;</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;Default Outliers removed&quot;</span><span class="p">)</span>
<span class="n">f</span><span class="o">=</span><span class="n">d</span><span class="o">.</span><span class="n">clone</span>
<span class="n">f</span><span class="o">.</span><span class="n">outlier_detection</span><span class="p">(</span><span class="n">window</span><span class="o">=</span><span class="mi">21</span><span class="p">,</span><span class="n">order</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">certainty</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">width</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="n">action</span><span class="o">=</span><span class="s2">&quot;delete&quot;</span><span class="p">,</span><span class="n">func</span><span class="o">=</span><span class="n">f</span><span class="o">.</span><span class="n">_poly_outlier</span><span class="p">)</span>
<span class="n">f</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fmt</span><span class="o">=</span><span class="s2">&quot;g-&quot;</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;Poly Outliers removed&quot;</span><span class="p">)</span>
<span class="n">e</span><span class="o">.</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Outlier detection test&quot;</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../samples/outlier.png">png</a>, <a class="reference external" href="../samples/outlier.hires.png">hires.png</a>, <a class="reference external" href="../samples/outlier.pdf">pdf</a>)</p>
<div class="last figure">
<img alt="../_images/outlier.png" src="../_images/outlier.png" />
</div>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.peaks">
<code class="descname">peaks</code><span class="sig-paren">(</span><em>ycol=None</em>, <em>width=None</em>, <em>significance=None</em>, <em>xcol=None</em>, <em>peaks=True</em>, <em>troughs=False</em>, <em>poly=2</em>, <em>sort=False</em>, <em>modify=False</em>, <em>full_data=True</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.peaks" title="Permalink to this definition">¶</a></dt>
<dd><p>Locates peaks and/or troughs in a column of data by using SG-differentiation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>ycol</strong> (<em>index</em>) – is the column name or index of the data in which to search for peaks</li>
<li><strong>width</strong> (<em>float</em>) – is the expected minium halalf-width of a peak in terms of the number of data points.
This is used in the differnetiation code to find local maxima. Bigger equals less sensitive
to experimental noise, smaller means better eable to see sharp peaks</li>
<li><strong>poly</strong> (<em>int</em>) – This is the order of polynomial to use when differentiating the data to locate a peak. Must &gt;=2, higher numbers
will find sharper peaks more accurately but at the risk of finding more false positives.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><ul class="first simple">
<li><strong>significance</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – is used to decide whether a local maxmima is a significant peak. Essentially just the curvature
of the data. Bigger means less sensistive, smaller means more likely to detect noise.</li>
<li><strong>xcol</strong> (<em>index</em><em> or </em><a class="reference external" href="https://docs.python.org/2/library/constants.html#None" title="(in Python v2.7)"><em>None</em></a>) – name or index of data column that p[rovides the x-coordinate (default None)</li>
<li><strong>peaks</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – select whether to measure peaks in data (default True)</li>
<li><strong>troughs</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – select whether to measure troughs in data (default False)</li>
<li><strong>sort</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – Sor the results by significance of peak</li>
<li><strong>modify</strong> (<em>book</em>) – If true, then the returned object is a copy of self with only the peaks/troughs left in the data.</li>
<li><strong>full_data</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – If True (default) then all columns of the data at which peaks in the <em>ycol</em> column are found. <em>modify</em> true implies
<em>full_data</em> is also true. If <em>full_data</em> is False, then only the x-column values of the peaks are returned.</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">If <em>modify</em> is true, then returns a the AnalysisMixin with the data set to just the peaks/troughs. If <em>modify</em> is false (default),
then the return value depends on <em>ycol</em> and <em>xcol</em>. If <em>ycol</em> is not None and <em>xcol</em> is None, then returns conplete rows of
data corresponding to the found peaks/troughs. If <em>xcol</em> is not None, or <em>ycol</em> is None and <em>xcol</em> is None, then
returns a 1D array of the x positions of the peaks/troughs.</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">User guide section <a class="reference internal" href="../UserGuide/analysisfile.html#peak-finding"><span class="std std-ref">Peak Finding</span></a></p>
</div>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.plot">
<code class="descname">plot</code><span class="sig-paren">(</span><em>*args</em>, <em>**kargs</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Try to make an appropriate plot based on the defined column assignments.</p>
<p>The column assignments are examined to determine whether to plot and x,y plot or an x,y,z plot
and whether to plot error bars (for an x,y plot). All keyword argume nts are passed through to
the selected plotting routine.</p>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.plot_matrix">
<code class="descname">plot_matrix</code><span class="sig-paren">(</span><em>xvals=None</em>, <em>yvals=None</em>, <em>rectang=None</em>, <em>cmap=&lt;matplotlib.colors.ListedColormap object&gt;</em>, <em>show_plot=True</em>, <em>title=''</em>, <em>xlabel=None</em>, <em>ylabel=None</em>, <em>zlabel=None</em>, <em>figure=None</em>, <em>plotter=None</em>, <em>**kwords</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.plot_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Plots a surface plot by assuming that the current dataset represents a regular matrix of points.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>xvals</strong> (<em>index, list or numpy.array</em>) – Either a column index or name or a list or numpytarray of column values. The default (None) uses the first column of data</li>
<li><strong>yvals</strong> (<em>int or list</em>) – Either a row index or a list or numpy array of row values. The default (None) uses the column_headings interpreted as floats</li>
<li><strong>rectang</strong> (<em>tuple</em>) – a tuple of either 2 or 4 elements representing either the origin (row,column) or size (origin, number of rows, number of
columns) of data to be used for the z0data matrix</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><ul class="first simple">
<li><strong>cmap</strong> (<em>matplotlib colour map</em>) – Surface colour map - defaults to the jet colour map</li>
<li><strong>show_plot</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – True Turns on interactive plot control</li>
<li><strong>title</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) – Optional parameter that specfies the plot title - otherwise the current DataFile filename is used</li>
<li><strong>xlabel</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) – </li>
<li><strong>ylabel</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) – Y axes label, Default is None - guess from metadata</li>
<li><strong>zlabel</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) – Z axis label, Default is None - guess from metadata</li>
<li><strong>figure</strong> (<em>matplotlib figure</em>) – Controls what matplotlib figure to use. Can be an integer, or a matplotlib.figure or False. If False then a new figure is
always used, otherwise it will default to using the last figure used by this DataFile object.</li>
<li><strong>plotter</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#callable" title="(in Python v2.7)"><em>callable</em></a>) – Optional arguement that passes a plotting function into the routine. Sensible choices might be plt.plot (default), py.semilogy, plt.semilogx</li>
<li><strong>kwords</strong> (<a class="reference external" href="https://docs.python.org/2/library/stdtypes.html#dict" title="(in Python v2.7)"><em>dict</em></a>) – A dictionary of other keyword arguments to pass into the plot function.</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The matplotib figure with the data plotted</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.plot_xy">
<code class="descname">plot_xy</code><span class="sig-paren">(</span><em>xcol=None</em>, <em>ycol=None</em>, <em>fmt=None</em>, <em>xerr=None</em>, <em>yerr=None</em>, <em>**kargs</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.plot_xy" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes a simple X-Y plot of the specified data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>xcol</strong> (<em>index</em>) – Column to be used for the X-Data</li>
<li><strong>ycol</strong> (<em>index</em>) – column to be used for Y-Data - default value is column to the right of the x-data column</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><ul class="first simple">
<li><strong>fmt</strong> (<em>strong</em><em> or </em><em>sequence of strings</em>) – Specifies the format for the plot - see matplotlib documentation for details</li>
<li><strong>xerr</strong><strong>,</strong><strong>yerr</strong> (<em>index</em>) – Columns of data to get x and y errorbars from. Setting these turns the default plotter to plt.errorbar</li>
<li><strong>xlabel</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) – </li>
<li><strong>ylabel</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) – Y axes label, Default is None - guess from metadata</li>
<li><strong>zlabel</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) – Z axis label, Default is None - guess from metadata</li>
<li><strong>title</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) – Optional parameter that specfies the plot title - otherwise the current DataFile filename is used</li>
<li><strong>plotter</strong> (<em>function</em>) – Function to use to plot data. Defaults to plt.plot unless error bars are set</li>
<li><strong>show_plot</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – Turn on interfactive plotting and show plot when drawn</li>
<li><strong>save_filename</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a><em> or </em><a class="reference external" href="https://docs.python.org/2/library/constants.html#None" title="(in Python v2.7)"><em>None</em></a>) – If set to a string, save the plot with this filename</li>
<li><strong>figure</strong> (<em>integer</em><em> or </em><a class="reference external" href="http://matplotlib.org/api/figure_api.html#module-matplotlib.figure" title="(in Matplotlib v2.1.0)"><em>matplotlib.figure</em></a><em> or </em><em>boolean</em>) – Controls which figure is used for the plot, or if a new figure is opened.</li>
<li><strong>multiple</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) – <p>how to handle multiple y-axes with a common x axis. Options are:</p>
<ul>
<li><em>common</em> single y-axis (default)</li>
<li><em>panels</em> panels sharing common x axis</li>
<li><em>sub plots</em> sub plots</li>
<li><em>y2</em> single axes with 2 y scales</li>
</ul>
</li>
<li><strong>**kargs</strong> (<a class="reference external" href="https://docs.python.org/2/library/stdtypes.html#dict" title="(in Python v2.7)"><em>dict</em></a>) – Other arguments are passed on to the plotter.</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A matplotlib.figure isntance</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.plot_xyuv">
<code class="descname">plot_xyuv</code><span class="sig-paren">(</span><em>xcol=None</em>, <em>ycol=None</em>, <em>ucol=None</em>, <em>vcol=None</em>, <em>wcol=None</em>, <em>**kargs</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.plot_xyuv" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes an overlaid image and quiver plot.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>xcol</strong> (<em>index</em>) – Xcolumn index or label</li>
<li><strong>ycol</strong> (<em>index</em>) – Y column index or label</li>
<li><strong>zcol</strong> (<em>index</em>) – Z column index or label</li>
<li><strong>ucol</strong> (<em>index</em>) – U column index or label</li>
<li><strong>vcol</strong> (<em>index</em>) – V column index or label</li>
<li><strong>wcol</strong> (<em>index</em>) – W column index or label</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><ul class="first last simple">
<li><strong>show_plot</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – True Turns on interactive plot control</li>
<li><strong>title</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) – Optional parameter that specfies the plot title - otherwise the current DataFile filename is used</li>
<li><strong>save_filename</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) – Filename used to save the plot</li>
<li><strong>figure</strong> (<em>matplotlib figure</em>) – Controls what matplotlib figure to use. Can be an integer, or a matplotlib.figure or False. If False then a new figure is
always used, otherwise it will default to using the last figure used by this DataFile object.</li>
<li><strong>plotter</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#callable" title="(in Python v2.7)"><em>callable</em></a>) – Optional arguement that passes a plotting function into the routine. Default is a 3d surface plotter, but contour plot and pcolormesh also work.</li>
<li><strong>**kargs</strong> (<a class="reference external" href="https://docs.python.org/2/library/stdtypes.html#dict" title="(in Python v2.7)"><em>dict</em></a>) – A dictionary of other keyword arguments to pass into the plot function.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.plot_xyz">
<code class="descname">plot_xyz</code><span class="sig-paren">(</span><em>xcol=None</em>, <em>ycol=None</em>, <em>zcol=None</em>, <em>shape=None</em>, <em>xlim=None</em>, <em>ylim=None</em>, <em>projection='3d'</em>, <em>**kargs</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.plot_xyz" title="Permalink to this definition">¶</a></dt>
<dd><p>Plots a surface plot based on rows of X,Y,Z data using matplotlib.pcolor().</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>xcol</strong> (<em>index</em>) – Xcolumn index or label</li>
<li><strong>ycol</strong> (<em>index</em>) – Y column index or label</li>
<li><strong>zcol</strong> (<em>index</em>) – Z column index or label</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><ul class="first simple">
<li><strong>shape</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#tuple" title="(in Python v2.7)"><em>tuple</em></a>) – Defines the shape of the surface (i.e. the number of X and Y value. If not procided or None, then the routine will attempt to calculate
these from the data provided</li>
<li><strong>xlim</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#tuple" title="(in Python v2.7)"><em>tuple</em></a>) – Defines the x-axis limits and grid of the data to be plotted</li>
<li><strong>ylim</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#tuple" title="(in Python v2.7)"><em>tuple</em></a>) – </li>
<li><strong>cmap</strong> (<em>matplotlib colour map</em>) – Surface colour map - defaults to the jet colour map</li>
<li><strong>show_plot</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – True Turns on interactive plot control</li>
<li><strong>title</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) – Optional parameter that specfies the plot title - otherwise the current DataFile filename is used</li>
<li><strong>save_filename</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) – Filename used to save the plot</li>
<li><strong>figure</strong> (<em>matplotlib figure</em>) – Controls what matplotlib figure to use. Can be an integer, or a matplotlib.figure or False. If False then a new figure is
always used, otherwise it will default to using the last figure used by this DataFile object.</li>
<li><strong>plotter</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#callable" title="(in Python v2.7)"><em>callable</em></a>) – Optional arguement that passes a plotting function into the routine. Default is a 3d surface plotter, but contour plot and pcolormesh also work.</li>
<li><strong>projection</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a><em> or </em><a class="reference external" href="https://docs.python.org/2/library/constants.html#None" title="(in Python v2.7)"><em>None</em></a>) – Whether to use a 3D projection or regular 2D axes (deault is 3D)</li>
<li><strong>**kargs</strong> (<a class="reference external" href="https://docs.python.org/2/library/stdtypes.html#dict" title="(in Python v2.7)"><em>dict</em></a>) – A dictionary of other keyword arguments to pass into the plot function.</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A matplotlib.figure isntance</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.plot_xyzuvw">
<code class="descname">plot_xyzuvw</code><span class="sig-paren">(</span><em>xcol=None</em>, <em>ycol=None</em>, <em>zcol=None</em>, <em>ucol=None</em>, <em>vcol=None</em>, <em>wcol=None</em>, <em>**kargs</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.plot_xyzuvw" title="Permalink to this definition">¶</a></dt>
<dd><p>Plots a vector field plot based on rows of X,Y,Z (U,V,W) data using ,ayavi.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>xcol</strong> (<em>index</em>) – Xcolumn index or label</li>
<li><strong>ycol</strong> (<em>index</em>) – Y column index or label</li>
<li><strong>zcol</strong> (<em>index</em>) – Z column index or label</li>
<li><strong>ucol</strong> (<em>index</em>) – U column index or label</li>
<li><strong>vcol</strong> (<em>index</em>) – V column index or label</li>
<li><strong>wcol</strong> (<em>index</em>) – W column index or label</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><ul class="first simple">
<li><strong>colormap</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) – Vector field colour map - defaults to the jet colour map</li>
<li><strong>colors</strong> (<em>column index</em><em> or </em><em>numpy array</em>) – Values used to map the colors of the resultant file.</li>
<li><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) – glyph type, default is “cone”</li>
<li><strong>scale_factor</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – Scale-size of glyphs.</li>
<li><strong>figure</strong> (<em>mlab figure</em>) – Controls what mlab figure to use. Can be an integer, or a mlab.figure or False. If False then a new figure is always used,
otherwise it will default to using the last figure used by this DataFile object.</li>
<li><strong>plotter</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#callable" title="(in Python v2.7)"><em>callable</em></a>) – Optional arguement that passes a plotting function into the routine. Sensible choices might be plt.plot (default), py.semilogy, plt.semilogx</li>
<li><strong>kargs</strong> (<a class="reference external" href="https://docs.python.org/2/library/stdtypes.html#dict" title="(in Python v2.7)"><em>dict</em></a>) – A dictionary of other keyword arguments to pass into the plot function.</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A mayavi scene instance</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.polyfit">
<code class="descname">polyfit</code><span class="sig-paren">(</span><em>xcol=None</em>, <em>ycol=None</em>, <em>polynomial_order=2</em>, <em>bounds=&lt;function AnalysisMixin.&lt;lambda&gt;&gt;</em>, <em>result=None</em>, <em>replace=False</em>, <em>header=None</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.polyfit" title="Permalink to this definition">¶</a></dt>
<dd><p>Pass through to numpy.polyfit.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>xcol</strong> (<em>index</em>) – Index to the column in the data with the X data in it</li>
<li><strong>ycol</strong> (<em>index</em>) – Index to the column int he data with the Y data in it</li>
<li><strong>polynomial_order</strong> – Order of polynomial to fit (default 2)</li>
<li><strong>bounds</strong> (<em>callable</em>) – A function that evaluates True if the current row should be included in the fit</li>
<li><strong>result</strong> (<em>index or None</em>) – Add the fitted data to the current data object in a new column (default don’t add)</li>
<li><strong>replace</strong> (<em>bool</em>) – Overwrite or insert new data if result is not None (default False)</li>
<li><strong>header</strong> (<em>string or None</em>) – Name of column_header of replacement data. Default is construct a string from the y column headser and polynomial order.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><em>numpy.poly</em> – The best fit polynomial as a numpy.poly object.</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If the x or y columns are not specified (or are None) the the setas attribute is used instead.</p>
<p class="last">This method is depricated and may be removed in a future version in favour of the more general curve_fit</p>
</div>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.pop">
<code class="descname">pop</code><span class="sig-paren">(</span><em>k</em><span class="optional">[</span>, <em>d</em><span class="optional">]</span><span class="sig-paren">)</span> &#x2192; v, remove specified key and return the corresponding value.<a class="headerlink" href="#Stoner.Core.Data.pop" title="Permalink to this definition">¶</a></dt>
<dd><p>If key is not found, d is returned if given, otherwise KeyError is raised.</p>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.popitem">
<code class="descname">popitem</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; (k, v), remove and return some (key, value) pair<a class="headerlink" href="#Stoner.Core.Data.popitem" title="Permalink to this definition">¶</a></dt>
<dd><p>as a 2-tuple; but raise KeyError if D is empty.</p>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.quiver_plot">
<code class="descname">quiver_plot</code><span class="sig-paren">(</span><em>xcol=None</em>, <em>ycol=None</em>, <em>ucol=None</em>, <em>vcol=None</em>, <em>**kargs</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.quiver_plot" title="Permalink to this definition">¶</a></dt>
<dd><p>Make a 2D Quiver plot from the data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>xcol</strong> (<em>index</em>) – Xcolumn index or label</li>
<li><strong>ycol</strong> (<em>index</em>) – Y column index or label</li>
<li><strong>zcol</strong> (<em>index</em>) – Z column index or label</li>
<li><strong>ucol</strong> (<em>index</em>) – U column index or label</li>
<li><strong>vcol</strong> (<em>index</em>) – V column index or label</li>
<li><strong>wcol</strong> (<em>index</em>) – W column index or label</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><ul class="first simple">
<li><strong>xlabel</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) – </li>
<li><strong>ylabel</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) – Y axes label, Default is None - guess from metadata</li>
<li><strong>zlabel</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) – Z axis label, Default is None - guess from metadata</li>
<li><strong>plotter</strong> (<em>function</em>) – Function to use to plot data. Defaults to plt.contour</li>
<li><strong>headlength</strong><strong>,</strong><strong>headwidth</strong><strong>,</strong><strong>headaxislength</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – Controls the size of the quiver heads</li>
<li><strong>show_plot</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – Turn on interfactive plotting and show plot when drawn</li>
<li><strong>save_filename</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a><em> or </em><a class="reference external" href="https://docs.python.org/2/library/constants.html#None" title="(in Python v2.7)"><em>None</em></a>) – If set to a string, save the plot with this filename</li>
<li><strong>figure</strong> (<em>integer</em><em> or </em><a class="reference external" href="http://matplotlib.org/api/figure_api.html#module-matplotlib.figure" title="(in Matplotlib v2.1.0)"><em>matplotlib.figure</em></a><em> or </em><em>boolean</em>) – Controls which figure is used for the plot, or if a new figure is opened.</li>
<li><strong>**kargs</strong> (<a class="reference external" href="https://docs.python.org/2/library/stdtypes.html#dict" title="(in Python v2.7)"><em>dict</em></a>) – Other arguments are passed on to the plotter.</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A matplotlib figure instance.</p>
</td>
</tr>
</tbody>
</table>
<p>Keyword arguments are all passed through to <code class="xref py py-func docutils literal"><span class="pre">matplotlib.plt.quiver()</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.rename">
<code class="descname">rename</code><span class="sig-paren">(</span><em>old_col</em>, <em>new_col</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.rename" title="Permalink to this definition">¶</a></dt>
<dd><p>Renames columns without changing the underlying data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>old_col</strong> (<em>string, int, re</em>) – Old column index or name (using standard rules)</li>
<li><strong>new_col</strong> (<em>string</em>) – New name of column</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><em>self</em> – A copy of the modified <a class="reference internal" href="Stoner.Core.DataFile.html#Stoner.Core.DataFile" title="Stoner.Core.DataFile"><code class="xref py py-class docutils literal"><span class="pre">DataFile</span></code></a> instance</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.reorder_columns">
<code class="descname">reorder_columns</code><span class="sig-paren">(</span><em>cols</em>, <em>headers_too=True</em>, <em>setas_too=True</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.reorder_columns" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a new data array from the original data by assembling the columns in the order given.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>cols</strong> (<em>list of column indices</em>) – (referred to the oriignal
data set) from which to assemble the new data set</li>
<li><strong>headers_too</strong> (<em>bool</em>) – Reorder the column headers in the same
way as the data (defaults to True)</li>
<li><strong>setas_too</strong> (<em>bool</em>) – Reorder the column assignments in the same
way as the data (defaults to True)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><em>self</em> – A copy of the modified <a class="reference internal" href="Stoner.Core.DataFile.html#Stoner.Core.DataFile" title="Stoner.Core.DataFile"><code class="xref py py-class docutils literal"><span class="pre">DataFile</span></code></a> object</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.rolling_window">
<code class="descname">rolling_window</code><span class="sig-paren">(</span><em>window=7</em>, <em>wrap=True</em>, <em>exclude_centre=False</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.rolling_window" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterator that return a rolling window section of the data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><ul class="first simple">
<li><strong>window</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – Size of the rolling window (must be odd and &gt;= 3)</li>
<li><strong>wrap</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – Whether to use data from the other end of the array when at one end or the other.</li>
<li><strong>exclude_centre</strong> (<em>odd int</em><em> or </em><a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – Exclude the ciurrent row from the rolling window (defaults to False)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Yields:</th><td class="field-body"><p class="first last"><em>ndarray</em> – Yields with a section of data that is window rows long, each iteration moves the marker
one row further on.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.rows">
<code class="descname">rows</code><span class="sig-paren">(</span><em>not_masked=False</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.rows" title="Permalink to this definition">¶</a></dt>
<dd><p>Generator method that will iterate over rows of data</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><strong>not_masked</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – If a row is masked and this is true, then don’t return this row.</td>
</tr>
<tr class="field-even field"><th class="field-name">Yields:</th><td class="field-body"><em>1D array</em> – Returns the next row of data</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.save">
<code class="descname">save</code><span class="sig-paren">(</span><em>filename=None</em>, <em>**kargs</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.save" title="Permalink to this definition">¶</a></dt>
<dd><p>Saves a string representation of the current DataFile object into the file ‘filename’.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>filename</strong> (<em>string, bool or None</em>) – Filename to save data as, if this is
None then the current filename for the object is used
If this is not set, then then a file dialog is used. If f
ilename is False then a file dialog is forced.</li>
<li><strong>as_loaded</strong> (<em>bool,str</em>) – If True, then the <em>Loaded as</em> key is inspected to see what the original
class of the DataFile was and then this class’ save method is used to save the data. If a str then
the keyword value is interpreted as the name of a subclass of the the current DataFile.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><em>self</em> – The current <a class="reference internal" href="Stoner.Core.DataFile.html#Stoner.Core.DataFile" title="Stoner.Core.DataFile"><code class="xref py py-class docutils literal"><span class="pre">DataFile</span></code></a> object</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.scale">
<code class="descname">scale</code><span class="sig-paren">(</span><em>other</em>, <em>xcol=None</em>, <em>ycol=None</em>, <em>**kargs</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.scale" title="Permalink to this definition">¶</a></dt>
<dd><p>Scale the x and y data in this DataFile to match the x and y data in another DataFile.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>other</strong> (<em>DataFile</em>) – The other isntance of a datafile to match to</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><ul class="first simple">
<li><strong>xcol</strong> (<em>column index</em>) – Column with x points in it, default to None to use setas attribute value</li>
<li><strong>ycol</strong> (<em>column index</em>) – Column with ypoints in it, default to None to use setas attribute value</li>
<li><strong>xmode</strong> (<em>'affine'</em><em>, </em><em>'linear'</em><em>,</em><em>'scale'</em><em>,</em><em>'offset'</em>) – How to manipulate the x-data to match up</li>
<li><strong>ymode</strong> (<em>'linear'</em><em>,</em><em>'scale'</em><em>,</em><em>'offset'</em>) – How to manipulate the y-data to match up.</li>
<li><strong>bounds</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#callable" title="(in Python v2.7)"><em>callable</em></a>) – Used to identiyf the set of (x,y) points to be used for scaling. Defaults to the whole data set if not speicifed.</li>
<li><strong>otherbounds</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#callable" title="(in Python v2.7)"><em>callable</em></a>) – Used to detemrine the set of (x,y) points in the other data file. Defaults to bounds if not given.</li>
<li><strong>use_estimate</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a><em> or </em><em>3x2 array</em>) – Specifies whether to estimate an initial transformation value or to use the provided one, or
start with an identity transformation.</li>
<li><strong>replace</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – Whether to map the x,y data to the new co-ordinates and return a copy of this AnalysisMixin (true) or to just return
the results of the scaling.</li>
<li><strong>headers</strong> (<em>2-element list</em><em> or </em><em>tuple of strings</em>) – new column headers to use if replace is True.</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Either a copy of the AnalysisMixin modified so that the x and y columns match <em>other</em> if <em>replace</em> is True, or
<em>opt_trans</em>,*trans_err*,*new_xy_data*. Where <em>opt_trans</em> is the optimum affine transformation, <em>trans_err</em> is a matrix
giving the standard error in the transformation matrix components and  <em>new_xy_data</em> is an (n x 2) array of the transformed data.</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Example</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;Example of using scale to overlap data&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">Stoner</span> <span class="kn">import</span> <span class="n">Data</span>
<span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">linspace</span><span class="p">,</span><span class="n">sin</span><span class="p">,</span><span class="n">exp</span><span class="p">,</span><span class="n">pi</span><span class="p">,</span><span class="n">dstack</span>
<span class="kn">from</span> <span class="nn">numpy.random</span> <span class="kn">import</span> <span class="n">normal</span>
<span class="kn">import</span> <span class="nn">matplotlib</span> <span class="kn">as</span> <span class="nn">mpl</span>
<span class="kn">from</span> <span class="nn">tabulate</span> <span class="kn">import</span> <span class="n">tabulate</span>

<span class="n">mpl</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s1">&#39;text&#39;</span><span class="p">,</span> <span class="n">usetex</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">x</span><span class="o">=</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">10</span><span class="o">*</span><span class="n">pi</span><span class="p">,</span><span class="mi">201</span><span class="p">)</span>
<span class="n">x2</span><span class="o">=</span><span class="n">x</span><span class="o">*</span><span class="mf">1.5</span><span class="o">+</span><span class="mf">0.23</span>
<span class="n">y</span><span class="o">=</span><span class="mi">10</span><span class="o">*</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">x</span><span class="o">/</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="p">))</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">+</span><span class="n">normal</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">),</span><span class="n">scale</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
<span class="n">y2</span><span class="o">=</span><span class="mi">3</span><span class="o">*</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">x</span><span class="o">/</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="p">))</span><span class="o">*</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="o">+</span><span class="n">normal</span><span class="p">(</span><span class="n">size</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">),</span><span class="n">scale</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>

<span class="n">d</span><span class="o">=</span><span class="n">Data</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">column_headers</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Time&quot;</span><span class="p">,</span><span class="s2">&quot;Signal 1&quot;</span><span class="p">],</span><span class="n">setas</span><span class="o">=</span><span class="s2">&quot;xy&quot;</span><span class="p">)</span>
<span class="n">d2</span><span class="o">=</span><span class="n">Data</span><span class="p">(</span><span class="n">x2</span><span class="p">,</span><span class="n">y2</span><span class="p">,</span><span class="n">column_headers</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Time&quot;</span><span class="p">,</span><span class="s2">&quot;Signal 2&quot;</span><span class="p">],</span><span class="n">setas</span><span class="o">=</span><span class="s2">&quot;xy&quot;</span><span class="p">)</span>

<span class="n">d</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">d2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">figure</span><span class="o">=</span><span class="n">d</span><span class="o">.</span><span class="n">fig</span><span class="p">)</span>
<span class="n">d3</span><span class="o">=</span><span class="n">d2</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="n">d</span><span class="p">,</span><span class="n">header</span><span class="o">=</span><span class="s2">&quot;Signal 2 scaled&quot;</span><span class="p">,</span><span class="n">xmode</span><span class="o">=</span><span class="s2">&quot;affine&quot;</span><span class="p">)</span>
<span class="n">d3</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">figure</span><span class="o">=</span><span class="n">d</span><span class="o">.</span><span class="n">fig</span><span class="p">)</span>
<span class="n">d3</span><span class="p">[</span><span class="s2">&quot;test&quot;</span><span class="p">]</span><span class="o">=</span><span class="n">linspace</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="n">txt</span><span class="o">=</span><span class="n">tabulate</span><span class="p">(</span><span class="n">d3</span><span class="p">[</span><span class="s2">&quot;Transform&quot;</span><span class="p">],</span><span class="n">floatfmt</span><span class="o">=</span><span class="s2">&quot;.2f&quot;</span><span class="p">,</span><span class="n">tablefmt</span><span class="o">=</span><span class="s2">&quot;grid&quot;</span><span class="p">)</span>
<span class="n">d3</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="s2">&quot;Transform</span><span class="se">\n</span><span class="s2">{}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">txt</span><span class="p">),</span><span class="n">fontdict</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;size&quot;</span><span class="p">:</span><span class="s2">&quot;x-small&quot;</span><span class="p">})</span>
<span class="n">d3</span><span class="o">.</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Scaling Example&quot;</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../samples/scale_curves.png">png</a>, <a class="reference external" href="../samples/scale_curves.hires.png">hires.png</a>, <a class="reference external" href="../samples/scale_curves.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/scale_curves.png" src="../_images/scale_curves.png" />
</div>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.search">
<code class="descname">search</code><span class="sig-paren">(</span><em>xcol</em>, <em>value</em>, <em>columns=None</em>, <em>accuracy=0.0</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.search" title="Permalink to this definition">¶</a></dt>
<dd><p>Searches in the numerica data part of the file for lines that match and returns  the corresponding rows.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>xcol</strong> (<em>int,string.re</em>)</li>
<li><strong>value</strong> (<em>float, tuple, list or callable</em>) – Value to look for</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><ul class="first simple">
<li><strong>columns</strong> (<em>index</em><em> or </em><em>array of indices</em><em> or </em><a class="reference external" href="https://docs.python.org/2/library/constants.html#None" title="(in Python v2.7)"><em>None</em></a><em> (</em><em>default</em><em>)</em>) – columns of data to return - none represents all columns.</li>
<li><strong>accuracy</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – Uncertainty to accept when testing equalities</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><em>ndarray</em> – numpy array of matching rows or column values depending on the arguements.</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The value is interpreted as follows:</p>
<ul class="last simple">
<li>a float looks for an exact match</li>
<li>a list is a list of exact matches</li>
<li>a tuple should contain a (min,max) value.</li>
<li>A callable object should have accept a float and an array representing the value of
the search col for the the current row and the entire row.</li>
</ul>
</div>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.section">
<code class="descname">section</code><span class="sig-paren">(</span><em>**kargs</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.section" title="Permalink to this definition">¶</a></dt>
<dd><p>Assuming data has x,y or x,y,z co-ordinates, return data from a section of the parameter space.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><ul class="first simple">
<li><strong>x</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a><em>, </em><a class="reference external" href="https://docs.python.org/2/library/functions.html#tuple" title="(in Python v2.7)"><em>tuple</em></a><em>, </em><em>list</em><em> or </em><a class="reference external" href="https://docs.python.org/2/library/functions.html#callable" title="(in Python v2.7)"><em>callable</em></a>) – x values ,atch this condition are included inth e section</li>
<li><strong>y</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a><em>, </em><a class="reference external" href="https://docs.python.org/2/library/functions.html#tuple" title="(in Python v2.7)"><em>tuple</em></a><em>, </em><em>list</em><em>  or </em><a class="reference external" href="https://docs.python.org/2/library/functions.html#callable" title="(in Python v2.7)"><em>callable</em></a>) – y values ,atch this condition are included inth e section</li>
<li><strong>z</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a><em>, </em><a class="reference external" href="https://docs.python.org/2/library/functions.html#tuple" title="(in Python v2.7)"><em>tuple</em></a><em>,</em><em>list</em><em>  or </em><a class="reference external" href="https://docs.python.org/2/library/functions.html#callable" title="(in Python v2.7)"><em>callable</em></a>) – z values ,atch this condition are included inth e section</li>
<li><strong>r</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#callable" title="(in Python v2.7)"><em>callable</em></a>) – a function that takes a tuple (x,y,z) and returns True if the line is to be incluided in section</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><em>DataFile</em> – A <a class="reference internal" href="Stoner.Core.DataFile.html#Stoner.Core.DataFile" title="Stoner.Core.DataFile"><code class="xref py py-class docutils literal"><span class="pre">DataFile</span></code></a> like object that includes only those lines from the original that match the section specification</p>
</td>
</tr>
</tbody>
</table>
<p>Internally this function is calling <a class="reference internal" href="Stoner.Core.DataFile.html#Stoner.Core.DataFile.search" title="Stoner.Core.DataFile.search"><code class="xref py py-meth docutils literal"><span class="pre">DataFile.search()</span></code></a> to pull out matching sections of the data array.
To extract a 2D section of the parameter space orthogonal to one axis you just specify a condition on that axis. Specifying
conditions on two axes will return a line of points along the third axis. The final keyword parameter allows you to select
data points that lie in an arbitary plane or line. eg:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">d</span><span class="o">.</span><span class="n">section</span><span class="p">(</span><span class="n">r</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">:</span><span class="nb">abs</span><span class="p">(</span><span class="mi">2</span><span class="o">+</span><span class="mi">3</span><span class="o">*</span><span class="n">x</span><span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="n">y</span><span class="p">)</span><span class="o">&lt;</span><span class="mf">0.1</span> <span class="ow">and</span> <span class="n">z</span><span class="o">==</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>would extract points along the line 2y=3x+2 (note the use of an &lt; operator to avoid floating point rounding errors) where
the z-co-ordinate is 2.</p>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.select">
<code class="descname">select</code><span class="sig-paren">(</span><em>*args</em>, <em>**kargs</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.select" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce a copy of the DataFile with only data rows that match a criteria.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>args</strong> (<em>various</em>) – A single positional argument if present is interpreted as follows:</li>
<li><strong>* If a callable function is given, the entire row is presented to it.</strong> – If it evaluates True then that row is selected. This allows arbitary select operations</li>
<li><strong>* If a dict is given, then it and the kargs dictionary are merged and used to select the rows</strong></li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><p class="first"><strong>kargs</strong> (<em>various</em>) – <p>Arbitary keyword arguments are interpreted as requestion matches against the corresponding
columns. The keyword argument may have an additional <em>__operator*</em> appended to it which is interpreted
as follows:</p>
<ul class="simple">
<li><em>eq</em>  value equals argument value (this is the default test for scalar argument)</li>
<li><em>ne</em>  value doe not equal argument value</li>
<li><em>gt</em>  value doe greater than argument value</li>
<li><em>lt</em>  value doe less than argument value</li>
<li><em>ge</em>  value doe greater than or equal to argument value</li>
<li><em>le</em>  value doe less than or equal to argument value</li>
<li><em>between</em>  value lies beween the minimum and maximum values of the arguement (the default test for 2-length tuple arguments)</li>
<li><em>ibetween</em>,*ilbetween*,*iubetween* as above but include both,lower or upper values</li>
</ul>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><em>(DatFile)</em> – a copy the DataFile instance that contains just the matching rows.</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>if the operator is preceeded by <em>__not__</em> then the sense of the test is negated.</p>
<p>If any of the tests is True, then the row will be selected, so the effect is a logical OR. To
achieve a logical AND, you can chain two selects together:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">d</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">temp__le</span><span class="o">=</span><span class="mf">4.2</span><span class="p">,</span><span class="n">vti_temp__lt</span><span class="o">=</span><span class="mf">4.2</span><span class="p">)</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">field_gt</span><span class="o">=</span><span class="mf">3.0</span><span class="p">)</span>
</pre></div>
</div>
<p>will select rows that have either temp or vti_temp metadata values below 4.2 AND field metadata values greater than 3.</p>
<p>If you need to select on a row value that ends in an operator word, then append
<em>__eq</em> in the keyword name to force the equality test. If the metadata keys to select on are not valid python identifiers,
then pass them via the first positional dictionary value.</p>
<p class="last">There is a “magic” column name “_i” which is interpreted as the row numbers of the data.</p>
</div>
<dl class="docutils">
<dt>Example</dt>
<dd><div class="first highlight-python"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;Example using select method to pick out data.&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">Stoner</span> <span class="kn">import</span> <span class="n">Data</span>

<span class="n">d</span><span class="o">=</span><span class="n">Data</span><span class="p">(</span><span class="s2">&quot;sample.txt&quot;</span><span class="p">,</span><span class="n">setas</span><span class="o">=</span><span class="s2">&quot;xy&quot;</span><span class="p">)</span>
<span class="n">d</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fmt</span><span class="o">=</span><span class="s2">&quot;b-&quot;</span><span class="p">)</span>
<span class="n">d</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">Temp__gt</span><span class="o">=</span><span class="mi">75</span><span class="p">)</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">Res__between</span><span class="o">=</span><span class="p">(</span><span class="mf">5.3</span><span class="p">,</span><span class="mf">6.3</span><span class="p">))</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fmt</span><span class="o">=</span><span class="s2">&quot;ro&quot;</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;portion 1&quot;</span><span class="p">)</span>
<span class="n">d</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="n">Temp__lt</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">fmt</span><span class="o">=</span><span class="s2">&quot;g&lt;&quot;</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;portion 2&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../samples/select_example.png">png</a>, <a class="reference external" href="../samples/select_example.hires.png">hires.png</a>, <a class="reference external" href="../samples/select_example.pdf">pdf</a>)</p>
<div class="last figure">
<img alt="../_images/select_example.png" src="../_images/select_example.png" />
</div>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.setdefault">
<code class="descname">setdefault</code><span class="sig-paren">(</span><em>k</em><span class="optional">[</span>, <em>d</em><span class="optional">]</span><span class="sig-paren">)</span> &#x2192; D.get(k,d), also set D[k]=d if k not in D<a class="headerlink" href="#Stoner.Core.Data.setdefault" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.smooth">
<code class="descname">smooth</code><span class="sig-paren">(</span><em>window='boxcar'</em>, <em>xcol=None</em>, <em>ycol=None</em>, <em>size=None</em>, <em>**kargs</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.smooth" title="Permalink to this definition">¶</a></dt>
<dd><p>Smooth data by convoluting with a window.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>window</strong> (<em>string or tuple</em>) – Defines the window type to use by passing to <a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.signal.get_window.html#scipy.signal.get_window" title="(in SciPy v1.0.0)"><code class="xref py py-func docutils literal"><span class="pre">scipy.signal.get_window()</span></code></a>.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><ul class="first simple">
<li><strong>xcol</strong> (<em>column index</em><em> or </em><a class="reference external" href="https://docs.python.org/2/library/constants.html#None" title="(in Python v2.7)"><em>None</em></a>) – Data to use as x data if needed to define a window. If None, use <a class="reference internal" href="Stoner.Core.DataFile.html#Stoner.Core.DataFile.setas" title="Stoner.Core.DataFile.setas"><code class="xref py py-attr docutils literal"><span class="pre">Stoner.Core.DataFile.setas</span></code></a></li>
<li><strong>ycvol</strong> (<em>column index</em><em> or </em><a class="reference external" href="https://docs.python.org/2/library/constants.html#None" title="(in Python v2.7)"><em>None</em></a>) – Data to be smoothed</li>
<li><strong>size</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a><em> or </em><a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – If int, then the number of points to use in the smoothing window. If float, then the size in x-data to be used.</li>
<li><strong>result</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a><em> or </em><em>column index</em>) – Whether to add the smoothed data to the dataset and if so where.</li>
<li><strong>replace</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – Replace the exiting data or insert as a new column.</li>
<li><strong>header</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) – New column header for the new data.</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><em>(self or array)</em> – If result is False, then the return value will be a copy of the smoothed data, otherwise the return value
is a copy of the AnalysisMixin object with the smoothed data added,</p>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>If size is float, then it is necessary to map the X-data to a number of rows and to ensure that the data is evenly spaced in x.
To do this, the number of rows in the window is found by dividing the span in x by the size and multiplying by the total
lenfth. Then the data is interpolated to a new set of evenly space X over the same range, smoothed and then interpoalted back
to the original x values.</p>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.sort">
<code class="descname">sort</code><span class="sig-paren">(</span><em>*order</em>, <em>**kargs</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.sort" title="Permalink to this definition">¶</a></dt>
<dd><p>Sorts the data by column name. Sorts in place and returns a copy of the sorted data object for chaining methods.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>*order</strong> (<em>column index or list of indices or callable function</em>) – One or more sort order keys.
If the argument is a callable function then it should take a two tuple arguments and
return +1,0,-1 depending on whether the first argument is bigger, equal or smaller. Otherwise
if the argument is interpreted as a column index. If a single argument is supplied, then it may be
a list of column indices. If no sort orders are supplied then the data is sorted by the <a class="reference internal" href="Stoner.Core.DataFile.html#Stoner.Core.DataFile.setas" title="Stoner.Core.DataFile.setas"><code class="xref py py-attr docutils literal"><span class="pre">DataFile.setas</span></code></a> attribute
or if that is not set, then order of the columns in the data.</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><strong>reverse</strong> (<em>boolean</em>) – If true, the sorted array isreversed.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><em>self</em> – A copy of the <a class="reference internal" href="Stoner.Core.DataFile.html#Stoner.Core.DataFile" title="Stoner.Core.DataFile"><code class="xref py py-class docutils literal"><span class="pre">DataFile</span></code></a> sorted object</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.span">
<code class="descname">span</code><span class="sig-paren">(</span><em>column=None</em>, <em>bounds=None</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.span" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a tuple of the maximum and minumum values within the given column and bounds by calling into <code class="xref py py-meth docutils literal"><span class="pre">AnalysisMixin.max()</span></code> and <code class="xref py py-meth docutils literal"><span class="pre">AnalysisMixin.min()</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>column</strong> (<em>index</em>) – Column to look for the maximum in</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><strong>bounds</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#callable" title="(in Python v2.7)"><em>callable</em></a>) – A callable function that takes a single argument list of
numbers representing one row, and returns True for all rows to search in.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><em>(float,float)</em> – A tuple of (min value, max value)</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If column is not defined (or is None) the <a class="reference internal" href="Stoner.Core.DataFile.html#Stoner.Core.DataFile.setas" title="Stoner.Core.DataFile.setas"><code class="xref py py-attr docutils literal"><span class="pre">DataFile.setas</span></code></a> column
assignments are used.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.spline">
<code class="descname">spline</code><span class="sig-paren">(</span><em>xcol=None</em>, <em>ycol=None</em>, <em>sigma=None</em>, <em>**kargs</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.spline" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct a spline through x and y data and replace, add new data or return spline function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-odd field"><td>&#160;</td><td class="field-body"><ul class="first simple">
<li><strong>xcol</strong> (<em>column index</em>) – Column with x data or if None, use setas attribute.</li>
<li><strong>ycol</strong> (<em>column index</em>) – Column with y data or if None, use the setas attribute</li>
<li><strong>sigma</strong> (<em>column index</em><em>, or </em><em>array of data</em>) – Column with weights, or if None use the 1/yerr column.</li>
<li><strong>replace</strong> (<em>Boolean</em><em> or </em><em>column index</em><em> or </em><a class="reference external" href="https://docs.python.org/2/library/constants.html#None" title="(in Python v2.7)"><em>None</em></a>) – If True then the y-column data is repalced, if a column index then the
new data is added after the specified index, if False then the new y-data is returned and if None, then
spline object is returned.</li>
<li><strong>header</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a>) – If <em>replace</em> is True or a column index then use this string as the new column header.</li>
<li><strong>order</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – The order of spline to use (1-5)</li>
<li><strong>smoothing</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a><em> or </em><a class="reference external" href="https://docs.python.org/2/library/constants.html#None" title="(in Python v2.7)"><em>None</em></a>) – The smoothing factor to use when fitting the spline. A value of zero will create an
interpolating spline.</li>
<li><strong>bbox</strong> (<em>tuple of length 2</em>) – Bounding box for the spline - defaults to range of x values</li>
<li><strong>ext</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a><em> or </em><a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – How to extrapolate, default is “extrapolate”, but can also be “raise”,”zeros” or “const”.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">Depending on the value of <em>replace</em>, returns a copy of the AnalysisMixin, a 1D numpy array of data or an
scipy.interpolate.UniverateSpline object.</p>
</td>
</tr>
</tbody>
</table>
<p>This is really jsut a pass through to the scipy.interpolate.UnivariateSpline function. Also used in the extrapolate
function.</p>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.split">
<code class="descname">split</code><span class="sig-paren">(</span><em>*args</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.split" title="Permalink to this definition">¶</a></dt>
<dd><p>Recursively splits the current <a class="reference internal" href="Stoner.Core.DataFile.html#Stoner.Core.DataFile" title="Stoner.Core.DataFile"><code class="xref py py-class docutils literal"><span class="pre">DataFile</span></code></a> object into a <code class="xref py py-class docutils literal"><span class="pre">Stoner.Forlders.DataFolder</span></code> objects where each one contains the rows
from the original object which had the same value of a given column(s) or function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>*args</strong> (<em>column index or function</em>) – Each argument is used in turn to find key values for the files in the DataFolder</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><em>Stoner.Folders.DataFolder</em> – A <a class="reference internal" href="Stoner.Folders.DataFolder.html#Stoner.Folders.DataFolder" title="Stoner.Folders.DataFolder"><code class="xref py py-class docutils literal"><span class="pre">Stoner.Folders.DataFolder</span></code></a> object containing the individual
<code class="xref py py-class docutils literal"><span class="pre">AnalysisMixin</span></code> objects</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>On each iteration the first argument is called. If it is a column type then rows which amtch each unique value are collated
together and made into a separate file. If the argument is a callable, then it is called for each row, passing the row
as a single 1D array and the return result is used to group lines together. The return value should be hashable.</p>
<p>Once this is done and the <a class="reference internal" href="Stoner.Folders.DataFolder.html#Stoner.Folders.DataFolder" title="Stoner.Folders.DataFolder"><code class="xref py py-class docutils literal"><span class="pre">Stoner.Folders.DataFolder</span></code></a> exists, if there are remaining argument, then the method is
called recusivelyt for each file and the resulkting DataFolder added into the root DataFolder and the file is removed.</p>
<p>Thus, when all of the arguments are evaluated, the resulting DataFolder is a multi-level tree.</p>
<div class="last admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">There has been a change in the arguments for the split function  from version 0.8 of the Stoner Package.</p>
</div>
</div>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.stitch">
<code class="descname">stitch</code><span class="sig-paren">(</span><em>other</em>, <em>xcol=None</em>, <em>ycol=None</em>, <em>overlap=None</em>, <em>min_overlap=0.0</em>, <em>mode='All'</em>, <em>func=None</em>, <em>p0=None</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.stitch" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply a scaling to this data set to make it stich to another dataset.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>other</strong> (<em>DataFile</em>) – Another data set that is used as the base to stitch this one on to</li>
<li><strong>xcol,ycol</strong> (<em>index or None</em>) – The x and y data columns. If left as None then the current setas attribute is used.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><ul class="first simple">
<li><strong>overlap</strong> (<em>tuple of</em><em> (</em><em>lower</em><em>,</em><em>higher</em><em>) or </em><a class="reference external" href="https://docs.python.org/2/library/constants.html#None" title="(in Python v2.7)"><em>None</em></a>) – The band of x values that are used in both data sets to match, if left as None, thenthe common overlap of the x data is used.</li>
<li><strong>min_overlap</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#float" title="(in Python v2.7)"><em>float</em></a>) – If you know that overlap must be bigger than a certain amount, the bounds between the two data sets needs to be adjusted. In this case min_overlap shifts the boundary of the overlap on this DataFile.</li>
<li><strong>mode</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – Unless <em>func</em> is specified, controls which parameters are actually variable, defaults to all of them.</li>
<li><strong>func</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#callable" title="(in Python v2.7)"><em>callable</em></a>) – a stitching function that transforms <span class="math">\((x,y)\rightarrow(x',y')\)</span>. Default is to use functions defined by <em>mode</em></li>
<li><strong>p0</strong> (<em>iterable</em>) – if func is not None then p0 should be the starting values for the stitching function parameters</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><em>self</em> – A copy of the current <code class="xref py py-class docutils literal"><span class="pre">AnalysisMixin</span></code> with the x and y data columns adjusted to stitch</p>
</td>
</tr>
</tbody>
</table>
<p>To stitch the data together, the x and y data in the current data file is transforms so that
<span class="math">\(x'=x+A\)</span> and <span class="math">\(y'=By+C\)</span> where <span class="math">\(A,B,C\)</span> are constants and <span class="math">\((x',y')\)</span> are close matches to the
<span class="math">\((x,y)\)</span> data in <em>other</em>. The algorithm assumes that the overlap region contains equal
numbers of <span class="math">\((x,y)\)</span> points <em>mode</em> controls whether A,B, and C are fixed or adjustable</p>
<blockquote>
<div><ul class="simple">
<li>“All” - all three parameters adjustable</li>
<li>“Scale y, shift x” - C is fixed at 0.0</li>
<li>“Scale and shift y” A is fixed at 0.0</li>
<li>“Scale y” - only B is adjustable</li>
<li>“Shift y” - Only c is adjsutable</li>
<li>“Shift x” - Only A is adjustable</li>
<li>“Shift both” - B is fixed at 1.0</li>
</ul>
</div></blockquote>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">User Guide section <a class="reference internal" href="../UserGuide/analysisfile.html#stitch-guide"><span class="std std-ref">Stitching Datasets together</span></a></p>
</div>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.subplot">
<code class="descname">subplot</code><span class="sig-paren">(</span><em>*args</em>, <em>**kargs</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.subplot" title="Permalink to this definition">¶</a></dt>
<dd><p>Pass throuygh for plt.subplot().</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>rows</strong> (<em>int</em>) – If this is the only argument, then a three digit number representing
the rows,columns,index arguments. If seperate rows, column and index are provided,
then this is the number of rows of sub-plots in one figure.</li>
<li><strong>columns</strong> (<em>int</em>) – The number of columns of sub-plots in one figure.</li>
<li><strong>index</strong> (<em>int</em>) – Index (1 based) of the current sub-plot.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A matplotlib.Axes instance representing the current sub-plot</p>
</td>
</tr>
</tbody>
</table>
<p>As well as passing through to the plyplot routine of the same name, this
function maintains a list of the current sub-plot axes via the subplots attribute.</p>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.subtract">
<code class="descname">subtract</code><span class="sig-paren">(</span><em>a</em>, <em>b</em>, <em>replace=False</em>, <em>header=None</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.subtract" title="Permalink to this definition">¶</a></dt>
<dd><p>Subtract one column, number or array (b) from another column (a).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>a</strong> (<em>index</em>) – First column to work with</li>
<li><strong>b</strong> (<em>index, float or 1D array</em>) – Second column to work with.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><ul class="first simple">
<li><strong>header</strong> (<a class="reference external" href="https://docs.python.org/2/library/string.html#module-string" title="(in Python v2.7)"><em>string</em></a><em> or </em><a class="reference external" href="https://docs.python.org/2/library/constants.html#None" title="(in Python v2.7)"><em>None</em></a>) – new column header  (defaults to a-b</li>
<li><strong>replace</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – Replace the a column with the new data</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><em>self</em> – The newly modified <code class="xref py py-class docutils literal"><span class="pre">AnalysisMixin</span></code>.</p>
</td>
</tr>
</tbody>
</table>
<p>If a and b are tuples of length two, then the firstelement is assumed to be the value and
the second element an uncertainty in the value. The uncertainties will then be propagated and an
additional column with the uncertainites will be added to the data.</p>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.swap_column">
<code class="descname">swap_column</code><span class="sig-paren">(</span><em>*swp</em>, <em>**kargs</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.swap_column" title="Permalink to this definition">¶</a></dt>
<dd><p>Swaps pairs of columns in the data.</p>
<p>Useful for reordering data for idiot programs that expect columns in a fixed order.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>swp</strong> (<em>tuple of list of tuples of two elements</em>) – Each
element will be iused as a column index (using the normal rules
for matching columns).  The two elements represent the two
columns that are to be swapped.</li>
<li><strong>headers_too</strong> (<em>bool</em>) – Indicates the column headers
are swapped as well</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><em>self</em> – A copy of the modified <a class="reference internal" href="Stoner.Core.DataFile.html#Stoner.Core.DataFile" title="Stoner.Core.DataFile"><code class="xref py py-class docutils literal"><span class="pre">DataFile</span></code></a> objects</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If swp is a list, then the function is called recursively on each
element of the list. Thus in principle the &#64;swp could contain
lists of lists of tuples</p>
</div>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.threshold">
<code class="descname">threshold</code><span class="sig-paren">(</span><em>threshold</em>, <em>**kargs</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.threshold" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds partial indices where the data in column passes the threshold, rising or falling.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>threshold</strong> (<em>float</em>) – Value to look for in column col</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Keyword Arguments:</th></tr>
<tr class="field-even field"><td>&#160;</td><td class="field-body"><ul class="first simple">
<li><strong>col</strong> (<em>index</em>) – Column index to look for data in</li>
<li><strong>rising</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – look for case where the data is increasing in value (defaukt True)</li>
<li><strong>falling</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – look for case where data is fallinh in value (default False)</li>
<li><strong>xcol</strong> (<em>index</em><em>, </em><a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a><em> or </em><a class="reference external" href="https://docs.python.org/2/library/constants.html#None" title="(in Python v2.7)"><em>None</em></a>) – rather than returning a fractional row index, return the
interpolated value in column xcol. If xcol is False, then return a complete row
all_vals (bool): return all crossing points of the threshold or just the first. (default False)</li>
<li><strong>transpose</strong> (<em>bbool</em>) – Swap the x and y columns around - this is most useful when the column assignments
have been done via the setas attribute</li>
<li><strong>all_vals</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) – Return all values that match the criteria, or just the first in the file.</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><em>float</em> – Either a sing;le fractional row index, or an in terpolated x value</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you don’t sepcify a col value or set it to None, then the assigned columns via the
<a class="reference internal" href="Stoner.Core.DataFile.html#Stoner.Core.DataFile.setas" title="Stoner.Core.DataFile.setas"><code class="xref py py-attr docutils literal"><span class="pre">DataFile.setas</span></code></a> attribute will be used.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">There has been an API change. Versions prior to 0.1.9 placed the column before the threshold in the positional
argument list. In order to support the use of assigned columns, this has been swapped to the present order.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.unique">
<code class="descname">unique</code><span class="sig-paren">(</span><em>col</em>, <em>return_index=False</em>, <em>return_inverse=False</em><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.unique" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the unique values from the specified column - pass through for numpy.unique.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>col</strong> (<em>index</em>) – Column to look for unique values in</td>
</tr>
</tbody>
</table>
<p>Keyword Arguments:</p>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.update">
<code class="descname">update</code><span class="sig-paren">(</span><span class="optional">[</span><em>E</em>, <span class="optional">]</span><em>**F</em><span class="sig-paren">)</span> &#x2192; None.  Update D from mapping/iterable E and F.<a class="headerlink" href="#Stoner.Core.Data.update" title="Permalink to this definition">¶</a></dt>
<dd><p>If E present and has a .keys() method, does:     for k in E: D[k] = E[k]
If E present and lacks .keys() method, does:     for (k, v) in E: D[k] = v
In either case, this is followed by: for k, v in F.items(): D[k] = v</p>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.values">
<code class="descname">values</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &#x2192; an object providing a view on D's values<a class="headerlink" href="#Stoner.Core.Data.values" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.x2">
<code class="descname">x2</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.x2" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a new set of axes with a second x-scale.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">The new matplotlib.axes instance.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="Stoner.Core.Data.y2">
<code class="descname">y2</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#Stoner.Core.Data.y2" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate a new set of axes with a second y-scale.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">The new matplotlib.axes instance</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/StonerLogo2.png" alt="Logo"/>
            </a></p>
  <h4>Previous topic</h4>
  <p class="topless"><a href="Stoner.Core.DataFile.html"
                        title="previous chapter">DataFile</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="Stoner.Analysis.AnalysisMixin.html"
                        title="next chapter">AnalysisMixin</a></p>
<div class="sourcelink">
  <a href="../_sources/classes/Stoner.Core.Data.rst.txt" rel="nofollow">
    Show page source
  </a>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
  <div class="related bottom">
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="Stoner.Core.DataFile.html" title="Previous document">DataFile</a>
        </li>
        <li>
          <a href="Stoner.Analysis.AnalysisMixin.html" title="Next document">AnalysisMixin</a>
          &rarr;
        </li>
    </ul>
  </nav>
  <nav id="breadcrumbs">
    <ul>
      <li><a href="../index.html">Stoner Package</a></li>
      <li>
        <a href="../Stoner.html">Stoner Package</a>
      </li> 
    </ul>
  </nav>
  </div>
  <footer id="pagefooter">&copy; 2013-15, Gavin Burnell et al.Last updated on Dec 09, 2017.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a>
      1.6.5
        with the <a href="http://github.com/irskep/sphinx-better-theme">
          better</a> theme.

  </footer>

  
  </body>
</html>