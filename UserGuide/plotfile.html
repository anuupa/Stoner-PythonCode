<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Plotting Data &#8212; Stoner Pacakge API Documentation</title>
    
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Analysing Data Files" href="analysisfile.html" />
    <link rel="prev" title="Loading and Examining Data" href="datafile.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="analysisfile.html" title="Analysing Data Files"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="datafile.html" title="Loading and Examining Data"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Stoner Package</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="ugindex.html" accesskey="U">The Stoner Python Package User Guide</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="plotting-data">
<h1>Plotting Data<a class="headerlink" href="#plotting-data" title="Permalink to this headline">¶</a></h1>
<p>Data plotting and visualisation is handled by the <code class="xref py py-class docutils literal"><span class="pre">PlotMixin</span></code> sub-class of <a class="reference internal" href="../classes/Stoner.Core.DataFile.html#Stoner.Core.DataFile" title="Stoner.Core.DataFile"><code class="xref py py-class docutils literal"><span class="pre">Stoner.Core.DataFile</span></code></a>.
The purpose of the methods detailed here is to provide quick and convenient ways to plot data rather than providing
publication ready figures. The <code class="xref py py-class docutils literal"><span class="pre">PlotMixin</span></code> is included as apart of the Data class:</p>
<div class="section" id="quick-plots">
<h2>Quick Plots<a class="headerlink" href="#quick-plots" title="Permalink to this headline">¶</a></h2>
<p>The <code class="xref py py-class docutils literal"><span class="pre">PlotMixin</span></code> class is intended to help you make plots that look reasonably good with as little hassle as possible.
In common with many graph plotting programmes, it has a concept of declaring columns of data to be used for &#8216;x&#8217;, &#8216;y&#8217; axes and
for containing error bars. This is done with the <code class="xref py py-attr docutils literal"><span class="pre">DataFile.setas</span></code> attribute (see <a class="reference internal" href="datafile.html#setas"><span class="std std-ref">Marking Columns as Dimensions: the magic setas attribute</span></a> for full details). Once this is done, the plotting
methods will use these to try to make a sensible plot.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">p</span><span class="o">.</span><span class="n">setas</span><span class="o">=</span><span class="s2">&quot;xye&quot;</span>
<span class="n">p</span><span class="o">.</span><span class="n">setas</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span><span class="s2">&quot;y&quot;</span><span class="p">,</span><span class="s2">&quot;e&quot;</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">setas</span><span class="p">)</span>
</pre></div>
</div>
<p>Once the columns are identified, the <code class="xref py py-meth docutils literal"><span class="pre">PlotMixin.plot()</span></code> method can be used to do the actual plotting. This is simply a wrapper that insepects the
available columns and calls either <code class="xref py py-meth docutils literal"><span class="pre">PlotMixin.plot_xy()</span></code> or <code class="xref py py-meth docutils literal"><span class="pre">PlotMixin.plot_xyz()</span></code> as appropriate. All keyword arguments to :
py:meth:<cite>PlotMixin.plot</cite> are passed on to the actual plotting method.</p>
</div>
<div class="section" id="types-of-plot">
<h2>Types of Plot<a class="headerlink" href="#types-of-plot" title="Permalink to this headline">¶</a></h2>
<p><code class="xref py py-meth docutils literal"><span class="pre">PlotMixin.plot()</span></code> will try to make the msot sensible choice of plot depending on which columns you have specified and
the number of axes represetned.</p>
<blockquote>
<div><ul class="simple">
<li>x-y, x-y+-e, x-y-e-y-e etc. data will default to a 2D scatter plot with error bars</li>
<li>x-y-z data will be converted to a grid and plotted as a 3D surface plot.</li>
<li><dl class="first docutils">
<dt>x-y-u-v (i.e. 2D vectro fields) and x-y-u-v-w (3D vectros on a 2D plane) will be plotted as a colour image</dt>
<dd>where the colour is mapped to hue-saturation-luminescence scale. The hue gives the in plane ange while the luminescene gives
the out of plane component of the vector field.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>x-y-z-u-v-w data (i.e. 3D vector field on a 3D grid) is represented as a 3D quiver plot with coloured quivers (using the same H-S-L</dt>
<dd>colour space mapping as above) assuming mayavi is importable.</dd>
</dl>
</li>
</ul>
</div></blockquote>
<p>An alternative plot type for data with errorbars in <code class="xref py py-func docutils literal"><span class="pre">plotutils.errorfill()</span></code>. This uses a shaded line as an
alternative to the error bars, where the shading of the line varies from intense to transparent the further one
gets from the mean value. For 3D x-y-z plotting there is a <code class="xref py py-meth docutils literal"><span class="pre">PlotMixin.contour_xyz()</span></code> and a <code class="xref py py-meth docutils literal"><span class="pre">PlotMixin.image_plot()</span></code>
methods available. These give contonour plots and 2D colour map plots respectively.</p>
<div class="section" id="plotting-2d-data">
<h3>Plotting 2D data<a class="headerlink" href="#plotting-2d-data" title="Permalink to this headline">¶</a></h3>
<p><em>x-y</em> plots are produced by the <code class="xref py py-meth docutils literal"><span class="pre">PlotMixin.plot_xy()</span></code> method:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">p</span><span class="o">.</span><span class="n">plot_xy</span><span class="p">(</span><span class="n">column_x</span><span class="p">,</span> <span class="n">column_y</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">plot_xy</span><span class="p">(</span><span class="n">column_x</span><span class="p">,</span> <span class="p">[</span><span class="n">y1</span><span class="p">,</span><span class="n">y2</span><span class="p">])</span>
<span class="n">p</span><span class="o">.</span><span class="n">plot_xy</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="s1">&#39;ro&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">plot_xy</span><span class="p">(</span><span class="n">x</span><span class="p">,[</span><span class="n">y1</span><span class="p">,</span><span class="n">y2</span><span class="p">],[</span><span class="s1">&#39;ro&#39;</span><span class="p">,</span><span class="s1">&#39;b-&#39;</span><span class="p">])</span>
<span class="n">p</span><span class="o">.</span><span class="n">plot_xy</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">title</span><span class="o">=</span><span class="s1">&#39;My Plot&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">plot_xy</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">figure</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">plot_xy</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">plotter</span><span class="o">=</span><span class="n">pyplot</span><span class="o">.</span><span class="n">semilogy</span><span class="p">)</span>
</pre></div>
</div>
<p>The examples above demonstrate several use cases of the <code class="xref py py-meth docutils literal"><span class="pre">PlotMixin.plot_xy()</span></code> method. The first parameter is always
the x column that contains the data, the second is the y-data either as a single column or list of columns.
The third parameter is the style of the plot (lines, points, colours etc) and can either be a list if the y-column data
is a list or a single string. Finally additional parameters can be given to specify a title and to control which figure
is used for the plot. All matplotlib keyword parameters can be specified as additional keyword arguments and are passed
through to the relevant plotting function. The final example illustrates a convenient way to produce log-linear and log-log
plots. By default, <code class="xref py py-meth docutils literal"><span class="pre">PlotMixin.plot_xy()</span></code> uses the <strong>pyplot.plot</strong> function to produce linear scaler plots. There
are a number of useful plotter functions that will work like this</p>
<ul>
<li><p class="first">[pyplot.semilogx,pyplot.semilogy] These two plotting functions will produce log-linear plots, with semilogx making
the x-axes the log one and semilogy the y-axis.</p>
</li>
<li><p class="first">[pyplot.loglog] Liek the semi-log plots, this will produce a log-log plot.</p>
</li>
<li><p class="first">[pyplot.errorbar] this particularly useful plotting function will draw error bars. The values for the error bars are
passed as keyword arguments, <em>xerr</em> or <em>yerr</em>. In standard matplotlib, these can be numpy arrays or constants.
<code class="xref py py-meth docutils literal"><span class="pre">PlotMixin.plot_xy()</span></code> extends this by intercepting these arguements and offering some short cuts:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">p</span><span class="o">.</span><span class="n">plot_xy</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">plotter</span><span class="o">=</span><span class="n">errorbar</span><span class="p">,</span><span class="n">yerr</span><span class="o">=</span><span class="s1">&#39;dResistance&#39;</span><span class="p">,</span><span class="n">xerr</span><span class="o">=</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="s1">&#39;dTemp+&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>This is equivalent to doing something like:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">p</span><span class="o">.</span><span class="n">plot_xy</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">plotter</span><span class="o">=</span><span class="n">errorbar</span><span class="p">,</span><span class="n">yerr</span><span class="o">=</span><span class="n">p</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s1">&#39;dResistance&#39;</span><span class="p">),</span><span class="n">xerr</span><span class="o">=</span><span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span><span class="n">p</span><span class="o">.</span><span class="n">column</span><span class="p">(</span><span class="s1">&#39;dTemp+&#39;</span><span class="p">)])</span>
</pre></div>
</div>
<p>If you actually want to pass a constant to the <em>x/yerr</em> keywords you should use a float rather than an integer.</p>
</li>
</ul>
<p>The X and Y axis label will be set from the column headers.</p>
</div>
<div class="section" id="plotting-3d-data">
<h3>Plotting 3D Data<a class="headerlink" href="#plotting-3d-data" title="Permalink to this headline">¶</a></h3>
<p>A number of the measurement rigs will produce data in the form of rows of $x,y,z$ values. Often it is desirable to plot
these on a surface plot or 3D plot. The <code class="xref py py-meth docutils literal"><span class="pre">PlotMixin.plot_xyz()</span></code> method can be used for this.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;3D surface plot example.&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">Stoner</span> <span class="kn">import</span> <span class="n">Data</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.cm</span>

<span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">100</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">100</span><span class="p">))</span>
<span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
<span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
<span class="n">z</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="mi">4</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="n">y</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="n">y</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span>

<span class="n">p</span><span class="o">=</span><span class="n">Data</span><span class="p">()</span>
<span class="n">p</span><span class="o">=</span><span class="n">p</span><span class="o">&amp;</span><span class="n">x</span><span class="o">&amp;</span><span class="n">y</span><span class="o">&amp;</span><span class="n">z</span>
<span class="n">p</span><span class="o">.</span><span class="n">column_headers</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;X&quot;</span><span class="p">,</span><span class="s2">&quot;Y&quot;</span><span class="p">,</span><span class="s2">&quot;Z&quot;</span><span class="p">]</span>
<span class="n">p</span><span class="o">.</span><span class="n">setas</span><span class="o">=</span><span class="s2">&quot;xyz&quot;</span>

<span class="n">p</span><span class="o">.</span><span class="n">plot_xyz</span><span class="p">(</span><span class="n">cmap</span><span class="o">=</span><span class="n">matplotlib</span><span class="o">.</span><span class="n">cm</span><span class="o">.</span><span class="n">jet</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Surface plot&quot;</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../samples/3D_plot.py">Source code</a>, <a class="reference external" href="../samples/3D_plot.png">png</a>, <a class="reference external" href="../samples/3D_plot.hires.png">hires.png</a>, <a class="reference external" href="../samples/3D_plot.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/3D_plot.png" src="../_images/3D_plot.png" />
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;Plot 3d fdata as a colourmap.&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">Stoner</span> <span class="kn">import</span> <span class="n">Data</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">100</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">100</span><span class="p">))</span>
<span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
<span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
<span class="n">z</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="mi">4</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="n">y</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="n">y</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span>

<span class="n">p</span><span class="o">=</span><span class="n">Data</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">column_stack</span><span class="p">((</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">)),</span><span class="n">column_headers</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;X&quot;</span><span class="p">,</span><span class="s2">&quot;Y&quot;</span><span class="p">,</span><span class="s2">&quot;Z&quot;</span><span class="p">])</span>
<span class="n">p</span><span class="o">.</span><span class="n">setas</span><span class="o">=</span><span class="s2">&quot;xyz&quot;</span>

<span class="n">p</span><span class="o">.</span><span class="n">colormap_xyz</span><span class="p">()</span>
<span class="n">p</span><span class="o">.</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Colourmap plot&quot;</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../samples/colormap_plot.py">Source code</a>, <a class="reference external" href="../samples/colormap_plot.png">png</a>, <a class="reference external" href="../samples/colormap_plot.hires.png">hires.png</a>, <a class="reference external" href="../samples/colormap_plot.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/colormap_plot.png" src="../_images/colormap_plot.png" />
</div>
<p>By default the <code class="xref py py-meth docutils literal"><span class="pre">PlotMixin.plot_xyz()</span></code> will produce a 3D surface plot with the z-axis coded with a rainbow colour-map
(specifically, the matplotlib provided <em>matplotlib.cm.jet</em> colour-map. This can be overriden with the <em>cmap</em> keyword
parameter. If a simple 2D surface plot is required, then the <em>plotter</em> parameter should be set to a suitable function
such as <strong>pyplot.pcolor</strong>.</p>
<p>Like <code class="xref py py-meth docutils literal"><span class="pre">PlotMixin.plot_xy()</span></code>, a <em>figure</em> parameter can be used to control the figure being used and any additional
keywords are passed through to the plotting function. The axes labels are set from the corresponding column labels.</p>
<p>Another option is a contour plot based on <code class="docutils literal"><span class="pre">(x,y,z)</span></code> data points. This can be done with the <code class="xref py py-meth docutils literal"><span class="pre">PlotMixin.contour_xyz()</span></code>
method.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;Plot 3D data on a contour plot.&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">Stoner</span> <span class="kn">import</span> <span class="n">Data</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">100</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">100</span><span class="p">))</span>
<span class="n">x</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
<span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="o">.</span><span class="n">ravel</span><span class="p">()</span>
<span class="n">z</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="mi">4</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="n">y</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="n">y</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span>

<span class="n">p</span><span class="o">=</span><span class="n">Data</span><span class="p">()</span>
<span class="n">p</span><span class="o">=</span><span class="n">p</span><span class="o">&amp;</span><span class="n">x</span><span class="o">&amp;</span><span class="n">y</span><span class="o">&amp;</span><span class="n">z</span>
<span class="n">p</span><span class="o">.</span><span class="n">column_headers</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;X&quot;</span><span class="p">,</span><span class="s2">&quot;Y&quot;</span><span class="p">,</span><span class="s2">&quot;Z&quot;</span><span class="p">]</span>
<span class="n">p</span><span class="o">.</span><span class="n">setas</span><span class="o">=</span><span class="s2">&quot;xyz&quot;</span>

<span class="n">p</span><span class="o">.</span><span class="n">contour_xyz</span><span class="p">()</span>
<span class="n">p</span><span class="o">.</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Contour plot&quot;</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../samples/contour_plot.py">Source code</a>, <a class="reference external" href="../samples/contour_plot.png">png</a>, <a class="reference external" href="../samples/contour_plot.hires.png">hires.png</a>, <a class="reference external" href="../samples/contour_plot.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/contour_plot.png" src="../_images/contour_plot.png" />
</div>
<p>Both <code class="xref py py-meth docutils literal"><span class="pre">PlotMixin.plot_xyz()</span></code> and <code class="xref py py-meth docutils literal"><span class="pre">PlotMixin.contour_xyz()</span></code> make use of a call to <code class="xref py py-meth docutils literal"><span class="pre">PlotMixin.griddata()</span></code>
which is a utility method of the <code class="xref py py-class docutils literal"><span class="pre">PlotMixin</span></code> &#8211; essentially this is just a pass through method to the underlying
<em>scipy.interpolate.griddata*</em> function. The shape of the grid is determined through a combination of the <em>xlim</em>, <em>ylim</em>
and <em>shape</em> arguments.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">X</span><span class="p">,</span><span class="n">Y</span><span class="p">,</span><span class="n">Z</span><span class="o">=</span><span class="n">p</span><span class="o">.</span><span class="n">griddata</span><span class="p">(</span><span class="n">xcol</span><span class="p">,</span><span class="n">ycol</span><span class="p">,</span><span class="n">zcol</span><span class="p">,</span><span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="mi">100</span><span class="p">))</span>
<span class="n">X</span><span class="p">,</span><span class="n">Y</span><span class="p">,</span><span class="n">Z</span><span class="o">=</span><span class="n">p</span><span class="o">.</span><span class="n">griddata</span><span class="p">(</span><span class="n">xcol</span><span class="p">,</span><span class="n">ycol</span><span class="p">,</span><span class="n">zcol</span><span class="p">,</span><span class="n">xlim</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">100</span><span class="p">),</span><span class="n">ylim</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">100</span><span class="p">))</span>
</pre></div>
</div>
<p>If a <em>xlim</em> or <em>ylim</em> arguments are provided and are two tuples, then they set the maximum and minimum values of the relevant axis.
If they are three tuples, then the third argument is the number of points along that axis and overrides any setting in the <em>shape</em>
parameter. If the <em>xlim</em> or <em>ylim</em> parameters are not presents, then the maximum and minimum values of the relevant axis are used.
If no <em>shape</em> information is provided, the default is to make the shape a square of sidelength given by the square root of the
number of points.</p>
<blockquote>
<div>Alternatively, if your data is already in the form of a matrix, you can use the <code class="xref py py-meth docutils literal"><span class="pre">PlotMixin.plot_matrix()</span></code> method.</div></blockquote>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;Plot data defined on a matrix.&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">Stoner</span> <span class="kn">import</span> <span class="n">Data</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">101</span><span class="p">),</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">101</span><span class="p">))</span>
<span class="n">z</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="mi">4</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="n">y</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">x</span><span class="o">**</span><span class="mi">2</span><span class="o">+</span><span class="n">y</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span>

<span class="n">p</span><span class="o">=</span><span class="n">Data</span><span class="p">()</span>
<span class="n">p</span><span class="o">=</span><span class="n">p</span><span class="o">&amp;</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">101</span><span class="p">)</span><span class="o">&amp;</span><span class="n">z</span>
<span class="n">p</span><span class="o">.</span><span class="n">column_headers</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;X&quot;</span><span class="p">]</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">101</span><span class="p">)):</span>
    <span class="n">p</span><span class="o">.</span><span class="n">column_headers</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>

<span class="n">p</span><span class="o">.</span><span class="n">plot_matrix</span><span class="p">(</span><span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;x&quot;</span><span class="p">,</span><span class="n">ylabel</span><span class="o">=</span><span class="s2">&quot;y&quot;</span><span class="p">,</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Data as Matrix&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../samples/matrix_plot.py">Source code</a>, <a class="reference external" href="../samples/matrix_plot.png">png</a>, <a class="reference external" href="../samples/matrix_plot.hires.png">hires.png</a>, <a class="reference external" href="../samples/matrix_plot.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/matrix_plot.png" src="../_images/matrix_plot.png" />
</div>
<p>The first example just uses all the default values, in which case the matrix is assumed to run from the 2nd column in the
file to the last and over all of the rows. The x values for each row are found from the contents of the first column, and
the y values for each column are found from the column headers interpreted as a floating pint number. The colourmap defaults
to the built in &#8216;jet&#8217; theme. The x axis label is set to be the column header for the first column, the y axis label is set
either from the meta data item &#8216;ylabel or to &#8216;Y Data&#8217;. Likewise the z axis label is set from the corresponding metadata
item or defaults to &#8216;Z Data;. In the second form these parameters are all set explicitly. The <em>xvals</em> parameter can be
either a column index (integer or sring) or a list, tuple or numpy array. The <em>yvals</em> parameter can be either a row number
(integer) or list,tuple or numpy array. Other parameters (including <em>plotter</em>, <em>figure</em> etc) work as for the
<code class="xref py py-meth docutils literal"><span class="pre">PlotMixin.plot_xyz()</span></code> method. The <em>rectang</em> parameter is used to select only part of the data array to use as the matrix.
It may be 2-tuple in which case it specifies just the origin as (row,column) or a 4-tuple in which case the third and forth
elements are the number of rows and columns to include. If <em>xvals</em> or <em>yvals</em> specify particular column or rows then the
origin of the matrix is moved to be one column further over and one row further down (ie the matrix is to the right and
below the columns and rows used to generate the x and y data values). The final example illustrates how to generate a
new 2D surface plot in a new window using default matrix setup.</p>
</div>
<div class="section" id="plotting-vector-fields">
<h3>Plotting Vector Fields<a class="headerlink" href="#plotting-vector-fields" title="Permalink to this headline">¶</a></h3>
<p>For these purposes a vector field is a set of points $(x,y,z)$ at which a 3D vector $(u,v,w)$ is defined. Often vector
fields are visualised by using quiver plots, where a small arrow points in the direction of the vector and whose length
is proportional to the magnitude. This can also be suplemented by colour information - in one scheme a hue-saturation-luminence
space is used, where hue described a direction in the x-y plane, the luminence describes the vertical component and the
saturation, the relative magnitude. This is a common scheme in micro-magnetics, so is supported in the Stoner package.
Following the naming convention above, the <code class="xref py py-meth docutils literal"><span class="pre">PlotMixin.plot_xyzuvw()</span></code> method handles these plots.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">p</span><span class="o">.</span><span class="n">plot_xyzuvw</span><span class="p">(</span><span class="n">xcol</span><span class="p">,</span><span class="n">ycol</span><span class="p">,</span><span class="n">zcol</span><span class="p">,</span><span class="n">ucol</span><span class="p">,</span><span class="n">vcol</span><span class="p">,</span><span class="n">wcol</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">plot_xyzuvw</span><span class="p">(</span><span class="n">xcol</span><span class="p">,</span><span class="n">ycol</span><span class="p">,</span><span class="n">zcol</span><span class="p">,</span><span class="n">ucol</span><span class="p">,</span><span class="n">vcol</span><span class="p">,</span><span class="n">wcol</span><span class="p">,</span><span class="n">colors</span><span class="o">=</span><span class="s2">&quot;color_data&quot;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">plot_xyzuvw</span><span class="p">(</span><span class="n">xcol</span><span class="p">,</span><span class="n">ycol</span><span class="p">,</span><span class="n">zcol</span><span class="p">,</span><span class="n">ucol</span><span class="p">,</span><span class="n">vcol</span><span class="p">,</span><span class="n">wcol</span><span class="p">,</span><span class="n">colors</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">))</span>
<span class="n">p</span><span class="o">.</span><span class="n">plot_xyzuvw</span><span class="p">(</span><span class="n">xcol</span><span class="p">,</span><span class="n">ycol</span><span class="p">,</span><span class="n">zcol</span><span class="p">,</span><span class="n">ucol</span><span class="p">,</span><span class="n">vcol</span><span class="p">,</span><span class="n">wcol</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;arrow&#39;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">plot_xyzuvw</span><span class="p">(</span><span class="n">xcol</span><span class="p">,</span><span class="n">ycol</span><span class="p">,</span><span class="n">zcol</span><span class="p">,</span><span class="n">ucol</span><span class="p">,</span><span class="n">vcol</span><span class="p">,</span><span class="n">wcol</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;arrow&#39;</span><span class="p">,</span><span class="n">colors</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">scale_factor</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">plot_xyzuvw</span><span class="p">(</span><span class="n">xcol</span><span class="p">,</span><span class="n">ycol</span><span class="p">,</span><span class="n">zcol</span><span class="p">,</span><span class="n">ucol</span><span class="p">,</span><span class="n">vcol</span><span class="p">,</span><span class="n">wcol</span><span class="p">,</span><span class="n">plotter</span><span class="o">=</span><span class="n">myplotfunc</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="xref py py-meth docutils literal"><span class="pre">PlotMixin.plot_xyzuvw()</span></code> method uses a default vector field plot function that is based on mayavi from
Enthought. The import is done when the plot is required to speed loading times for the <code class="xref py py-mod docutils literal"><span class="pre">Stoner.plot</span></code> when
2D plotting only is required.</p>
<p>The first example above will result in a plot using flat arroiws coloured according to the vector magnitude. The second
examnple will instead color them using the specified column from the data. The third example demonstrates passing in
a separate list of colour data. In both of these cases the relative magnitude of the colors data is mapped to a colour map
(which can be given via a colormap keyword parameter).</p>
<p>The next example demonstrates changing the glyph used for each data point - in this case to a 3D arrow, but &#8220;cone&#8221; is also
a common choice. In the fifth example, the <em>colors</em> keyword is set to <em>True</em>. This signals the plotting function to colour
the individual pints with the H-S-L colour space as described above. The other keyword parameter, scale_factor is
passed through (as indeed are any other keyword parameters) to the underlying mayavi.mlab functions. The final example
demonstrates the use of the <em>plotter</em> keyword, analogous to the 2D and 3D examples to switch the actual plotting function.</p>
<p>As the mayavi.mlab quiver3d plotting function doesn&#8217;t support a title, and axes labels by default, these are not used by
default in this function.</p>
</div>
</div>
<div class="section" id="very-quick-plotting">
<h2>Very Quick Plotting<a class="headerlink" href="#very-quick-plotting" title="Permalink to this headline">¶</a></h2>
<p>For convenience, a <code class="xref py py-meth docutils literal"><span class="pre">PlotMixin.plot()</span></code> method is defined that will try to work out the necessary details. In combination
with the <a class="reference internal" href="../classes/Stoner.Core.DataFile.html#Stoner.Core.DataFile.setas" title="Stoner.Core.DataFile.setas"><code class="xref py py-attr docutils literal"><span class="pre">Stoner.Core.DataFile.setas</span></code></a> attribute it allows very quick plots to be constructed.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;Simple plot in 2 lines.&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">Stoner</span> <span class="kn">import</span> <span class="n">Data</span>
<span class="n">p</span><span class="o">=</span><span class="n">Data</span><span class="p">(</span><span class="s2">&quot;sample.txt&quot;</span><span class="p">,</span><span class="n">setas</span><span class="o">=</span><span class="s2">&quot;xy&quot;</span><span class="p">)</span>
<span class="c1"># Quick plot</span>
<span class="n">p</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../samples/single_plot.py">Source code</a>, <a class="reference external" href="../samples/single_plot.png">png</a>, <a class="reference external" href="../samples/single_plot.hires.png">hires.png</a>, <a class="reference external" href="../samples/single_plot.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/single_plot.png" src="../_images/single_plot.png" />
</div>
</div>
<div class="section" id="getting-more-control-on-the-figure">
<h2>Getting More Control on the Figure<a class="headerlink" href="#getting-more-control-on-the-figure" title="Permalink to this headline">¶</a></h2>
<p>It is useful to be able to get access to the matplotlib figure that is used for each <code class="xref py py-class docutils literal"><span class="pre">PlotMixin</span></code> instance. The
<code class="xref py py-attr docutils literal"><span class="pre">PlotMixin.fig</span></code> attribute can do this, thus allowing plots from multiple <code class="xref py py-class docutils literal"><span class="pre">PlotMixin</span></code> instances to be
combined in a single figure.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">p1</span><span class="o">.</span><span class="n">plot_xy</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39;r-&#39;</span><span class="p">)</span>
<span class="n">p2</span><span class="o">.</span><span class="n">plot_xy</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39;bo&#39;</span><span class="p">,</span><span class="n">figure</span><span class="o">=</span><span class="n">p1</span><span class="o">.</span><span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
<p>Likewise the <code class="xref py py-attr docutils literal"><span class="pre">PlotMixin.axes</span></code> attribute returns the current axes object of the current figure in use by the <code class="xref py py-class docutils literal"><span class="pre">PlotMixin</span></code>
instance.</p>
<p>There&#8217;s a couple of extra methods that just pass through to the pyplot equivalents:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">p</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
<span class="n">p</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<div class="section" id="setting-axes-labels-plot-titles-and-legends">
<h3>Setting Axes Labels, Plot Titles and Legends<a class="headerlink" href="#setting-axes-labels-plot-titles-and-legends" title="Permalink to this headline">¶</a></h3>
<p><code class="xref py py-class docutils literal"><span class="pre">PlotMixin</span></code> provides some useful attributes for setting specific aspects of the figures. Any
<em>get_</em> and <em>set_</em> method of <code class="xref py py-class docutils literal"><span class="pre">pyplot.Axes</span></code> can be read or written as a <code class="xref py py-class docutils literal"><span class="pre">PlotMixin</span></code> attribute.
Internally this is implemented by calling the corresponding method on the current axes of the <code class="xref py py-class docutils literal"><span class="pre">PlotMixin</span></code>&#8216;s
figure. When setting the attribute, lists and tuples will be assumed to contain positional arguments and dictionaries
keyword arguments. If you want to pass a single tuple, list or dictionary, then you should wrap it in a single
element tuple.</p>
<p>Particualrly useful attributes include:</p>
<ul class="simple">
<li><code class="xref py py-attr docutils literal"><span class="pre">PlotMixin.xlabel</span></code>, <code class="xref py py-attr docutils literal"><span class="pre">PlotMixin.ylabel</span></code> will set the x and y axes labels</li>
<li><code class="xref py py-attr docutils literal"><span class="pre">PlotMixin.title</span></code> will set the plot title</li>
<li><code class="xref py py-attr docutils literal"><span class="pre">PlotMixin.xlim</span></code>, <code class="xref py py-attr docutils literal"><span class="pre">PlotMixin.ylim</span></code> will accept a tuple to set the x- and y-axes limits.</li>
<li><dl class="first docutils">
<dt><code class="xref py py-attr docutils literal"><span class="pre">PlotMixin.labels</span></code> sets a list of strings that are the preferred name for each column. This is to</dt>
<dd>allow the plotting routines to provide a default name for an axis label that can be different from the
name of the column used for indexing purposes. If the label for a column is not set, then the column
header is used instead. If a column header is changed, then the <code class="xref py py-attr docutils literal"><span class="pre">PlotMixin.labels</span></code> attribute will
be overwritten.</dd>
</dl>
</li>
</ul>
<p>In addition, you can read any method of <code class="xref py py-class docutils literal"><span class="pre">pyplot.Axes</span></code> as an attribute of <code class="xref py py-class docutils literal"><span class="pre">PlotMixin</span></code>. This allows
one to call the methods directly on the PlotMixin instance without needing to extract a reference to the current
axes.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">p</span><span class="o">.</span><span class="n">xlabel</span><span class="o">=</span><span class="s2">&quot;My X Axis&quot;</span>
<span class="n">p</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;My X Axis&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>are both equivalent, but the latter form allows access to the full keyword arguments of the x axis label control.</p>
</div>
</div>
<div class="section" id="plotting-on-second-y-or-x-axes">
<h2>Plotting on Second Y (or X) Axes<a class="headerlink" href="#plotting-on-second-y-or-x-axes" title="Permalink to this headline">¶</a></h2>
<p>To plot a second curve using the same x axis, but a different y axis scale, the <code class="xref py py-meth docutils literal"><span class="pre">PlotMixin.y2()</span></code> method is
provided. This produces a second axes object with a common x-axis, but independent y-axis on the right of the plot.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;Plot data using two y-axes.&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">Stoner</span> <span class="kn">import</span> <span class="n">Data</span>
<span class="n">p</span><span class="o">=</span><span class="n">Data</span><span class="p">(</span><span class="s2">&quot;sample.txt&quot;</span><span class="p">,</span><span class="n">setas</span><span class="o">=</span><span class="s2">&quot;xyy&quot;</span><span class="p">)</span>

<span class="n">p</span><span class="o">.</span><span class="n">plot_xy</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="s2">&quot;k-&quot;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">y2</span><span class="p">()</span>
<span class="n">p</span><span class="o">.</span><span class="n">plot_xy</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="s2">&quot;r-&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../samples/double_y_plot.py">Source code</a>, <a class="reference external" href="../samples/double_y_plot.png">png</a>, <a class="reference external" href="../samples/double_y_plot.hires.png">hires.png</a>, <a class="reference external" href="../samples/double_y_plot.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/double_y_plot.png" src="../_images/double_y_plot.png" />
</div>
<p>There is an equivalent <code class="xref py py-meth docutils literal"><span class="pre">PlotMixin.x2()</span></code> method to create a second set of axes with a common y scale but different x scales.</p>
<p>To work out which set of axes you are current working with the <code class="xref py py-attr docutils literal"><span class="pre">PlotMixin.ax</span></code> attribute can be read or set.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">p</span><span class="o">.</span><span class="n">plot_xy</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">y2</span><span class="p">()</span>
<span class="n">p</span><span class="o">.</span><span class="n">plot_xy</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">ax</span><span class="o">=</span><span class="mi">0</span> <span class="c1"># Set back to first x,y1 plot</span>
<span class="n">p</span><span class="o">.</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;Plot 1&quot;</span>
<span class="n">p</span><span class="o">.</span><span class="n">ax</span><span class="o">=</span><span class="mi">1</span> <span class="c1"># Set to the second</span>
<span class="n">p</span><span class="o">.</span><span class="n">yabel</span><span class="o">=</span><span class="s2">&quot;Plot 2&quot;</span>
</pre></div>
</div>
<div class="section" id="plot-templates">
<h3>Plot Templates<a class="headerlink" href="#plot-templates" title="Permalink to this headline">¶</a></h3>
<p>Frequently one wishes to create many plots that have a similar set of formatting options - for example
in a thesis or to conform to a journal&#8217;s specifications. The <code class="xref py py-mod docutils literal"><span class="pre">Stoner.plot.formats</span></code> in conjunctions with
the <code class="xref py py-attr docutils literal"><span class="pre">PlotMixin.template</span></code> attribute can help here.</p>
<p>A <code class="xref py py-attr docutils literal"><span class="pre">PlotMixin.template</span></code> template is a set of instructions that controls the default settings for many
aspects of a matplotlib figure&#8217;s style. In addition the template allows for pyplot formatting commands to be
executed during the process of plotting a figure.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;Customising a template for plotting.&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">Stoner</span> <span class="kn">import</span> <span class="n">Data</span>
<span class="kn">from</span> <span class="nn">Stoner.plot.formats</span> <span class="kn">import</span> <span class="n">SketchPlot</span>
<span class="n">p</span><span class="o">=</span><span class="n">Data</span><span class="p">(</span><span class="s2">&quot;sample.txt&quot;</span><span class="p">,</span><span class="n">setas</span><span class="o">=</span><span class="s2">&quot;xy&quot;</span><span class="p">,</span><span class="n">template</span><span class="o">=</span><span class="n">SketchPlot</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../samples/template2.py">Source code</a>, <a class="reference external" href="../samples/template2.png">png</a>, <a class="reference external" href="../samples/template2.hires.png">hires.png</a>, <a class="reference external" href="../samples/template2.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/template2.png" src="../_images/template2.png" />
</div>
<p>The template can either be set by passing a subclass of <a class="reference internal" href="../classes/Stoner.plot.formats.DefaultPlotStyle.html#Stoner.plot.formats.DefaultPlotStyle" title="Stoner.plot.formats.DefaultPlotStyle"><code class="xref py py-class docutils literal"><span class="pre">Stoner.plot.formats.DefaultPlotStyle</span></code></a> or
a particular instance of such a subclass. This latter option allows you to override the default plot attribute
settings defined by the template class with your own choice - or indeed, to add further style attributes. This
can be done by either calling the template and passing it arguments as keywords, or by settiong attributes directly on the template.
Because the matplotlib <em>rcParams</em> dictionary has keys that are not valid Python identifiers, periods in the rcParams keys
are translated as underscores and thus underscores become double underscores. When setting attributes on the template directly,
prefix the translated rcParam key with <em>template_</em>.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;Simple ploting with a template.&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">Stoner</span> <span class="kn">import</span> <span class="n">Data</span>
<span class="kn">from</span> <span class="nn">Stoner.plot.formats</span> <span class="kn">import</span> <span class="n">DefaultPlotStyle</span>
<span class="n">p</span><span class="o">=</span><span class="n">Data</span><span class="p">(</span><span class="s2">&quot;sample.txt&quot;</span><span class="p">,</span><span class="n">setas</span><span class="o">=</span><span class="s2">&quot;xy&quot;</span><span class="p">,</span><span class="n">template</span><span class="o">=</span><span class="n">DefaultPlotStyle</span><span class="p">())</span>
<span class="n">p</span><span class="o">.</span><span class="n">template</span><span class="p">(</span><span class="n">axes_color__cycle</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;r&quot;</span><span class="p">,</span><span class="s2">&quot;g&quot;</span><span class="p">,</span><span class="s2">&quot;b&quot;</span><span class="p">])</span>
<span class="n">p</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../samples/template.py">Source code</a>, <a class="reference external" href="../samples/template.png">png</a>, <a class="reference external" href="../samples/template.hires.png">hires.png</a>, <a class="reference external" href="../samples/template.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/template.png" src="../_images/template.png" />
</div>
<p>You can also copy the style template from one plot to the next.</p>
<blockquote>
<div>q=Data()
q.template=p.template</div></blockquote>
<p>The possible attributes that can be passed over to the template are essentially all the rc parameters for matplotlib
(see <code class="xref py py-func docutils literal"><span class="pre">matplotlib.pyplot.rcParams()</span></code>) except that periods &#8216;.&#8217; are replced with underscores &#8216;_&#8217; and single underscores
are replaced with double underscores.</p>
<p>Matplotlib makes use of stylesheets - essentially separate files of matplotlibrc entries. The template classes have a stylename
parameter that controls which stylesheet is used. This can be either one of the built in styles (see <code class="xref py py-attr docutils literal"><span class="pre">matplotlib.pyplot.styles.available</span></code>)
or refer to a file on disc. The template will search for the file (named <em>&lt;stylename&gt;</em>.mplstyle) in.</p>
<blockquote>
<div><ol class="arabic simple">
<li>the same directory as the template class file is,</li>
<li>a subdirectory called <em>stylelib</em> of the directory where the template class file is or,</li>
<li>the stylelib subfolder of the Stoner package directory.</li>
</ol>
</div></blockquote>
<p>Where a template class is a subclass of the  <a class="reference internal" href="../classes/Stoner.plot.formats.DefaultPlotStyle.html#Stoner.plot.formats.DefaultPlotStyle" title="Stoner.plot.formats.DefaultPlotStyle"><code class="xref py py-class docutils literal"><span class="pre">DefaultPlotStyle</span></code></a>, the stylesheets are inherited in the same order as the
class heirarchy.</p>
<p>Changing the value of Lpy:attr:<cite>DefaultPlotStyle.stylename</cite> will force the tempalte to recalculate the stylesheet heirarchy, refidning
the paths to the stylesheets. You can also do any in-place modifications to the template stylesheet list (e.g. appending or extending it).</p>
<p>Further customisation is possible by creating a subclass of <a class="reference internal" href="../classes/Stoner.plot.formats.DefaultPlotStyle.html#Stoner.plot.formats.DefaultPlotStyle" title="Stoner.plot.formats.DefaultPlotStyle"><code class="xref py py-class docutils literal"><span class="pre">DefaultPlotStyle</span></code></a> and overriding the
<a class="reference internal" href="../classes/Stoner.plot.formats.DefaultPlotStyle.customise.html#Stoner.plot.formats.DefaultPlotStyle.customise" title="Stoner.plot.formats.DefaultPlotStyle.customise"><code class="xref py py-meth docutils literal"><span class="pre">DefaultPlotStyle.customise()</span></code></a> method and <a class="reference internal" href="../classes/Stoner.plot.formats.DefaultPlotStyle.customise_axes.html#Stoner.plot.formats.DefaultPlotStyle.customise_axes" title="Stoner.plot.formats.DefaultPlotStyle.customise_axes"><code class="xref py py-meth docutils literal"><span class="pre">DefaultPlotStyle.customise_axes()</span></code></a> method.</p>
<p>The seaborn paclage offers many options for producing visually appealing plots with a higher level abstraction of the matplotlib api/
The <a class="reference internal" href="../classes/Stoner.plot.formats.SeabornPlotStyle.html#Stoner.plot.formats.SeabornPlotStyle" title="Stoner.plot.formats.SeabornPlotStyle"><code class="xref py py-class docutils literal"><span class="pre">SeabornPlotStyle</span></code></a> template class offers a quick interface to using this. It takes attributes <a class="reference internal" href="../classes/Stoner.plot.formats.SeabornPlotStyle.html#Stoner.plot.formats.SeabornPlotStyle.stylename" title="Stoner.plot.formats.SeabornPlotStyle.stylename"><code class="xref py py-attr docutils literal"><span class="pre">SeabornPlotStyle.stylename</span></code></a>,
<a class="reference internal" href="../classes/Stoner.plot.formats.SeabornPlotStyle.html#Stoner.plot.formats.SeabornPlotStyle.context" title="Stoner.plot.formats.SeabornPlotStyle.context"><code class="xref py py-attr docutils literal"><span class="pre">SeabornPlotStyle.context</span></code></a> and <a class="reference internal" href="../classes/Stoner.plot.formats.SeabornPlotStyle.html#Stoner.plot.formats.SeabornPlotStyle.palette" title="Stoner.plot.formats.SeabornPlotStyle.palette"><code class="xref py py-attr docutils literal"><span class="pre">SeabornPlotStyle.palette</span></code></a> to set the corresponding seaborn settings.</p>
</div>
<div class="section" id="making-multi-plot-figures">
<h3>Making Multi-plot Figures<a class="headerlink" href="#making-multi-plot-figures" title="Permalink to this headline">¶</a></h3>
<div class="section" id="adding-an-inset-to-a-figure">
<h4>Adding an Inset to a Figure<a class="headerlink" href="#adding-an-inset-to-a-figure" title="Permalink to this headline">¶</a></h4>
<p>The <code class="xref py py-meth docutils literal"><span class="pre">PlotMixin.inset()</span></code> method can be used to creagte an inset in the current figure. Subsequent plots
will be to the inset until a new set of axes are chosen. The <code class="xref py py-class docutils literal"><span class="pre">pyplot.Axes</span></code> instance of the inset is appended to the
<code class="xref py py-attr docutils literal"><span class="pre">PlotMixin.axes</span></code> attribute.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;Add an inset to a plot.&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">Stoner</span> <span class="kn">import</span> <span class="n">Data</span>
<span class="n">p</span><span class="o">=</span><span class="n">Data</span><span class="p">(</span><span class="s2">&quot;sample.txt&quot;</span><span class="p">,</span><span class="n">setas</span><span class="o">=</span><span class="s2">&quot;xy&quot;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">p</span><span class="o">.</span><span class="n">inset</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;50%&quot;</span><span class="p">,</span><span class="n">height</span><span class="o">=</span><span class="s2">&quot;50%&quot;</span><span class="p">)</span>
<span class="n">p</span><span class="o">.</span><span class="n">setas</span><span class="o">=</span><span class="s2">&quot;x.y&quot;</span>
<span class="n">p</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">p</span><span class="o">.</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;&quot;</span> <span class="c1">#Turn off the inset title</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../samples/inset_plot.py">Source code</a>, <a class="reference external" href="../samples/inset_plot.png">png</a>, <a class="reference external" href="../samples/inset_plot.hires.png">hires.png</a>, <a class="reference external" href="../samples/inset_plot.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/inset_plot.png" src="../_images/inset_plot.png" />
</div>
<p>The <em>loc</em> parameter specifies the location of the inset, the width and height the size (either as a percentage or
fixed units). There is an optional parent keyword that lets you specify an alternative parent set of axes for the
inset.</p>
<blockquote>
<div><ul class="simple">
<li><em>loc</em> = 1 top-right inset</li>
<li><em>loc</em> = 2 top left inset</li>
<li><em>loc</em> = 3 bottom left inset</li>
<li><em>loc</em> = 4 bottom right inset</li>
<li><em>loc</em> = 5 mid-right inset</li>
<li><em>loc</em> = 6 mid-left inset</li>
<li><em>loc</em> = 7 mid-right inset</li>
<li><em>loc</em> = 8 mid-bottom inset</li>
<li><em>loc</em> = 9 mid-top inset</li>
<li><em>loc</em> = 0 centre inset</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="handling-more-than-one-column-of-y-data">
<h4>Handling More than One Column of Y Data<a class="headerlink" href="#handling-more-than-one-column-of-y-data" title="Permalink to this headline">¶</a></h4>
<p>By default if <code class="xref py py-meth docutils literal"><span class="pre">PlotMixin.plot_xy()</span></code> is given more than one column of y data, it will plot all
of the data on a single y-axis scale. If the y data to be plotted is not of a similar order of mangitude
this can result in a less than helpful plot.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;Plot data on a single y-axis.&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">Stoner</span> <span class="kn">import</span> <span class="n">Data</span>
<span class="n">p</span><span class="o">=</span><span class="n">Data</span><span class="p">(</span><span class="s2">&quot;sample.txt&quot;</span><span class="p">,</span><span class="n">setas</span><span class="o">=</span><span class="s2">&quot;xyy&quot;</span><span class="p">)</span>
<span class="c1"># Quick plot</span>
<span class="n">p</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../samples/common_y_plot.py">Source code</a>, <a class="reference external" href="../samples/common_y_plot.png">png</a>, <a class="reference external" href="../samples/common_y_plot.hires.png">hires.png</a>, <a class="reference external" href="../samples/common_y_plot.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/common_y_plot.png" src="../_images/common_y_plot.png" />
</div>
<p>The <code class="xref py py-meth docutils literal"><span class="pre">PlotMixin.plot_xy()</span></code> method (and also the <code class="xref py py-meth docutils literal"><span class="pre">PlotMixin.plot()</span></code> method when doing 2D plots) will take
a keyword argument <em>multiple</em> that can offer a number of alternatives. If you have just two y columns, or the the
second and subsequent ones can fit on a common scale, then a double-y axis plot might be appropriate.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;Double y axis plot.&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">Stoner</span> <span class="kn">import</span> <span class="n">Data</span>
<span class="n">p</span><span class="o">=</span><span class="n">Data</span><span class="p">(</span><span class="s2">&quot;sample.txt&quot;</span><span class="p">,</span><span class="n">setas</span><span class="o">=</span><span class="s2">&quot;xyy&quot;</span><span class="p">)</span>
<span class="c1"># Quick plot</span>
<span class="n">p</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">multiple</span><span class="o">=</span><span class="s2">&quot;y2&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../samples/multiple_y2_plot.py">Source code</a>, <a class="reference external" href="../samples/multiple_y2_plot.png">png</a>, <a class="reference external" href="../samples/multiple_y2_plot.hires.png">hires.png</a>, <a class="reference external" href="../samples/multiple_y2_plot.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/multiple_y2_plot.png" src="../_images/multiple_y2_plot.png" />
</div>
<p>Alternatively, if you want the various y plots to form multiple panels with a common x-axis (a <em>ganged plot</em>) then
<em>multiple</em> can be set of <em>panels</em>.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;Plot data using mutiple sub-plots.&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">Stoner</span> <span class="kn">import</span> <span class="n">Data</span>
<span class="n">p</span><span class="o">=</span><span class="n">Data</span><span class="p">(</span><span class="s2">&quot;sample.txt&quot;</span><span class="p">,</span><span class="n">setas</span><span class="o">=</span><span class="s2">&quot;xyy&quot;</span><span class="p">)</span>
<span class="c1"># Quick plot</span>
<span class="n">p</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">multiple</span><span class="o">=</span><span class="s2">&quot;panels&quot;</span><span class="p">)</span>
<span class="c1">#Helps to fix layout !</span>
<span class="n">p</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../samples/multiple_panels_plot.py">Source code</a>, <a class="reference external" href="../samples/multiple_panels_plot.png">png</a>, <a class="reference external" href="../samples/multiple_panels_plot.hires.png">hires.png</a>, <a class="reference external" href="../samples/multiple_panels_plot.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/multiple_panels_plot.png" src="../_images/multiple_panels_plot.png" />
</div>
<p>Finally, you can also simply plot the y data as a grid of independent subplots.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;Independent sub plots for multiple y data.&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">Stoner</span> <span class="kn">import</span> <span class="n">Data</span>
<span class="n">p</span><span class="o">=</span><span class="n">Data</span><span class="p">(</span><span class="s2">&quot;sample.txt&quot;</span><span class="p">,</span><span class="n">setas</span><span class="o">=</span><span class="s2">&quot;xyy&quot;</span><span class="p">)</span>
<span class="c1"># Quick plot</span>
<span class="n">p</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">multiple</span><span class="o">=</span><span class="s2">&quot;subplots&quot;</span><span class="p">)</span>
<span class="c1">#Helps to fix layout !</span>
<span class="n">p</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../samples/subplot_plot.py">Source code</a>, <a class="reference external" href="../samples/subplot_plot.png">png</a>, <a class="reference external" href="../samples/subplot_plot.hires.png">hires.png</a>, <a class="reference external" href="../samples/subplot_plot.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/subplot_plot.png" src="../_images/subplot_plot.png" />
</div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/StonerLogo.png" alt="Logo"/>
            </a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Plotting Data</a><ul>
<li><a class="reference internal" href="#quick-plots">Quick Plots</a></li>
<li><a class="reference internal" href="#types-of-plot">Types of Plot</a><ul>
<li><a class="reference internal" href="#plotting-2d-data">Plotting 2D data</a></li>
<li><a class="reference internal" href="#plotting-3d-data">Plotting 3D Data</a></li>
<li><a class="reference internal" href="#plotting-vector-fields">Plotting Vector Fields</a></li>
</ul>
</li>
<li><a class="reference internal" href="#very-quick-plotting">Very Quick Plotting</a></li>
<li><a class="reference internal" href="#getting-more-control-on-the-figure">Getting More Control on the Figure</a><ul>
<li><a class="reference internal" href="#setting-axes-labels-plot-titles-and-legends">Setting Axes Labels, Plot Titles and Legends</a></li>
</ul>
</li>
<li><a class="reference internal" href="#plotting-on-second-y-or-x-axes">Plotting on Second Y (or X) Axes</a><ul>
<li><a class="reference internal" href="#plot-templates">Plot Templates</a></li>
<li><a class="reference internal" href="#making-multi-plot-figures">Making Multi-plot Figures</a><ul>
<li><a class="reference internal" href="#adding-an-inset-to-a-figure">Adding an Inset to a Figure</a></li>
<li><a class="reference internal" href="#handling-more-than-one-column-of-y-data">Handling More than One Column of Y Data</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="datafile.html"
                        title="previous chapter">Loading and Examining Data</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="analysisfile.html"
                        title="next chapter">Analysing Data Files</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/UserGuide/plotfile.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="analysisfile.html" title="Analysing Data Files"
             >next</a> |</li>
        <li class="right" >
          <a href="datafile.html" title="Loading and Examining Data"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Stoner Package</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="ugindex.html" >The Stoner Python Package User Guide</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2013-15, Gavin Burnell et al.
      Last updated on Apr 23, 2017.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.1.
    </div>
  </body>
</html>